/*! For license information please see BatchToSpaceND.js.LICENSE.txt */
import{backend_util,BatchToSpaceND}from"@tensorflow/tfjs-core";import{reshape}from"./Reshape";import{slice}from"./Slice";import{transpose}from"./Transpose";function batchToSpaceND(e){const{inputs:a,backend:t,attrs:s}=e,{x:n}=a,{blockShape:c,crops:p}=s,r=c.reduce(((e,a)=>e*a)),o=backend_util.getReshaped(n.shape,c,r),i=backend_util.getPermuted(o.length,c.length),d=backend_util.getReshapedPermuted(n.shape,c,r),h=backend_util.getSliceBeginCoords(p,c.length),l=backend_util.getSliceSize(d,p,c.length),b=reshape({inputs:{x:n},backend:t,attrs:{shape:o}}),u=transpose({inputs:{x:b},backend:t,attrs:{perm:i}}),k=reshape({inputs:{x:u},backend:t,attrs:{shape:d}}),m=slice({inputs:{x:k},backend:t,attrs:{begin:h,size:l}});return t.disposeData(b.dataId),t.disposeData(u.dataId),t.disposeData(k.dataId),m}export const batchToSpaceNDConfig={kernelName:BatchToSpaceND,backendName:"wasm",kernelFunc:batchToSpaceND};