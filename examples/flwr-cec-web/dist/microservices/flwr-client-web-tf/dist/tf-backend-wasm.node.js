/*! For license information please see tf-backend-wasm.node.js.LICENSE.txt */
"use strict";var tfjsCore=require("@tensorflow/tfjs-core"),require$$0=require("fs"),require$$1=require("path"),require$$3=require("perf_hooks"),require$$4=require("os");function _mergeNamespaces(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(a){if("default"!==a&&!(a in e)){var n=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(e,a,n.get?n:{enumerable:!0,get:function(){return t[a]}})}}))})),e}var CppDType,FusableActivation,wasmFusedMatMul,extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},extendStatics(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function a(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}function __awaiter(e,t,a,n){return new(a||(a=Promise))((function(r,i){function s(e){try{o(n.next(e))}catch(e){i(e)}}function u(e){try{o(n.throw(e))}catch(e){i(e)}}function o(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(s,u)}o((n=n.apply(e,t||[])).next())}))}function __generator(e,t){var a,n,r,i,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,n=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){s.label=i[1];break}if(6===i[0]&&s.label<r[1]){s.label=r[1],r=i;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(i);break}r[2]&&s.ops.pop(),s.trys.pop();continue}i=t.call(e,s)}catch(e){i=[6,e],n=0}finally{a=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,a=t&&e[t],n=0;if(a)return a.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var a="function"==typeof Symbol&&e[Symbol.iterator];if(!a)return e;var n,r,i=a.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(e){r={error:e}}finally{try{n&&!n.done&&(a=i.return)&&a.call(i)}finally{if(r)throw r.error}}return s}function __spreadArray(e,t,a){if(a||2===arguments.length)for(var n,r=0,i=t.length;r<i;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}function setup$1a(e){wasmFusedMatMul=e.wasm.cwrap(tfjsCore._FusedMatMul,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])}function fusedBatchMatMul(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.a,i=t.b,s=t.bias,u=t.preluActivationWeights;if("float32"!==r.dtype||"float32"!==i.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");var o=n.transposeA,p=n.transposeB,d=n.activation,l=n.leakyreluAlpha,c=a.dataIdMap.get(r.dataId).id,m=a.dataIdMap.get(i.dataId).id,f=0;if(null!=s){var h=a.dataIdMap.get(s.dataId);if(1!==h.shape.length)throw new Error("_FusedMatMul only supports rank-1 bias but got "+"rank ".concat(h.shape.length,"."));f=h.id}var g=null==u?0:a.dataIdMap.get(u.dataId).id,b=FusableActivation[d];if(null==b)throw new Error("".concat(d," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var y=o?r.shape[2]:r.shape[1],_=p?i.shape[1]:i.shape[2],C=tfjsCore.broadcast_util.assertAndGetBroadcastShape(r.shape.slice(0,-2),i.shape.slice(0,-2)),w=a.makeOutput(__spreadArray(__spreadArray([],__read(C),!1),[y,_],!1),r.dtype),v=a.dataIdMap.get(w.dataId).id,k=new Uint8Array(new Int32Array(r.shape).buffer),I=new Uint8Array(new Int32Array(i.shape).buffer);return wasmFusedMatMul(c,k,r.shape.length,m,I,i.shape.length,o,p,b,f,g,l||0,v),w}!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(CppDType||(CppDType={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(FusableActivation||(FusableActivation={}));var _fusedMatMulConfig={kernelName:tfjsCore._FusedMatMul,backendName:"wasm",setupFunc:setup$1a,kernelFunc:fusedBatchMatMul};function createUnaryKernelConfig(e,t){var a;return{kernelName:e,backendName:"wasm",setupFunc:function(t){a=t.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){var n=e.backend,r=e.inputs.x,i=n.dataIdMap.get(r.dataId).id,s=n.makeOutput(r.shape,t||r.dtype),u=n.dataIdMap.get(s.dataId).id;return 0===tfjsCore.util.sizeFromShape(s.shape)||a(i,CppDType[r.dtype],u),s}}}var absConfig=createUnaryKernelConfig(tfjsCore.Abs),acosConfig=createUnaryKernelConfig(tfjsCore.Acos),acoshConfig=createUnaryKernelConfig(tfjsCore.Acosh);function createBinaryKernelConfig(e,t,a){var n;return{kernelName:e,backendName:"wasm",setupFunc:function(t){n=t.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){var t=e.backend,r=e.inputs,i=r.a,s=r.b,u=t.dataIdMap.get(i.dataId).id,o=t.dataIdMap.get(s.dataId).id,p=null!=a?a:i.dtype,d=tfjsCore.backend_util.assertAndGetBroadcastShape(i.shape,s.shape),l=t.makeOutput(d,p);if(0===tfjsCore.util.sizeFromShape(d))return l;var c=new Uint8Array(new Int32Array(i.shape).buffer),m=new Uint8Array(new Int32Array(s.shape).buffer),f=t.dataIdMap.get(l.dataId).id;return n(u,c,i.shape.length,o,m,s.shape.length,CppDType[i.dtype],f),l}}}var wasmFunc$6,addConfig=createBinaryKernelConfig(tfjsCore.Add);function setupFunc$1(e){wasmFunc$6=e.wasm.cwrap(tfjsCore.AddN,null,["array","number","number","number"])}function addn(e){var t=e.inputs,a=e.backend,n=a.makeOutput(t[0].shape,t[0].dtype);if(0===tfjsCore.util.sizeFromShape(n.shape))return n;var r=t.map((function(e){return a.dataIdMap.get(e.dataId).id})),i=new Uint8Array(new Int32Array(r).buffer),s=a.dataIdMap.get(n.dataId).id;return wasmFunc$6(i,r.length,CppDType[n.dtype],s),n}var addNConfig={kernelName:tfjsCore.AddN,backendName:"wasm",setupFunc:setupFunc$1,kernelFunc:addn};function identity(e){var t=e.inputs.x,a=e.backend;if("string"===t.dtype)return tfjsCore.tensor(a.readSync(t.dataId),t.shape,t.dtype);var n=a.makeOutput(t.shape,t.dtype),r=a.typedArrayFromHeap(t);return a.typedArrayFromHeap(n).set(r),n}var wasmTranspose,identityConfig={kernelName:tfjsCore.Identity,backendName:"wasm",kernelFunc:identity};function setup$19(e){wasmTranspose=e.wasm.cwrap(tfjsCore.Transpose,null,["number","array","number","number","number","array","number"])}function transpose(e){for(var t=e.inputs,a=e.backend,n=e.attrs,r=__read(removeOneSizeDims(t.x.shape,n.perm),2),i=r[0],s=r[1],u=!0,o=0;o<s.length;o++)s[o]!==o&&(u=!1);var p=computeOutShape(t.x.shape,n.perm),d={dataId:t.x.dataId,shape:i,dtype:t.x.dtype};if(u){var l=identity({inputs:t,backend:a});return l.shape=p,l}var c=a.makeOutput(p,d.dtype),m=a.dataIdMap.get(d.dataId).id,f=a.dataIdMap.get(c.dataId).id,h=new Uint8Array(new Int32Array(s).buffer),g=new Uint8Array(new Int32Array(d.shape).buffer);return wasmTranspose(m,g,d.shape.length,CppDType[d.dtype],f,h,s.length),c}function computeOutShape(e,t){for(var a=new Array(e.length),n=0;n<a.length;n++)a[n]=e[t[n]];return a}function removeOneSizeDims(e,t){for(var a=[],n=[],r=0;r<e.length;++r)1!==e[r]&&a.push(e[r]),1!==e[t[r]]&&n.push(t[r]);for(r=0;r<n.length;++r){for(var i=-1,s=0;s<n.length;++s)n[s]>=r&&(-1===i||n[i]>n[s])&&(i=s);n[i]=r}return[a,n]}var wasmAll,transposeConfig={kernelName:tfjsCore.Transpose,backendName:"wasm",kernelFunc:transpose,setupFunc:setup$19};function permuteAxesAndTranspose(e,t,a){var n=e.shape,r=e.shape.length,i=tfjsCore.util.parseAxisParam(t,n),s=i,u=tfjsCore.backend_util.getAxesPermutation(s,r),o=null,p=!1;if(null!=u){for(var d=new Array(r),l=0;l<d.length;l++)d[l]=n[u[l]];s=tfjsCore.backend_util.getInnerMostAxes(s.length,r),o=transpose({inputs:{x:e},attrs:{perm:u},backend:a});var c=a.dataIdMap.get(e.dataId).id;a.dataIdMap.get(o.dataId).id!==c&&(p=!0)}return{transposed:o,originalAxes:i,axes:s,inputWasTransposed:p}}function setup$18(e){wasmAll=e.wasm.cwrap(tfjsCore.All,null,["number, number, number"])}function all(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.axis,i=n.keepDims,s=a.x,u=t.dataIdMap.get(s.dataId).id,o=s,p=permuteAxesAndTranspose(s,r,t),d=p.transposed,l=p.axes,c=p.originalAxes,m=p.inputWasTransposed;m&&(o=d,u=t.dataIdMap.get(d.dataId).id);var f=o.shape.length;tfjsCore.backend_util.assertAxesAreInnerMostDims("all",l,f);var h=__read(tfjsCore.backend_util.computeOutAndReduceShapes(o.shape,l),2),g=h[0],b=h[1],y=tfjsCore.util.sizeFromShape(b),_=t.makeOutput(g,s.dtype);if(0!==tfjsCore.util.sizeFromShape(o.shape)){var C=t.dataIdMap.get(_.dataId).id;wasmAll(u,y,C)}if(m&&t.disposeData(d.dataId),i){var w=tfjsCore.backend_util.expandShapeToKeepDim(_.shape,c);_.shape=w}return _}var wasmAny,allConfig={kernelName:tfjsCore.All,backendName:"wasm",setupFunc:setup$18,kernelFunc:all};function setup$17(e){wasmAny=e.wasm.cwrap(tfjsCore.Any,null,["number, number, number"])}function any(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.axis,i=n.keepDims,s=a.x,u=t.dataIdMap.get(s.dataId).id,o=s,p=permuteAxesAndTranspose(s,r,t),d=p.transposed,l=p.axes,c=p.originalAxes,m=p.inputWasTransposed;m&&(o=d,u=t.dataIdMap.get(d.dataId).id);var f=o.shape.length;tfjsCore.backend_util.assertAxesAreInnerMostDims("any",l,f);var h=__read(tfjsCore.backend_util.computeOutAndReduceShapes(o.shape,l),2),g=h[0],b=h[1],y=tfjsCore.util.sizeFromShape(b),_=t.makeOutput(g,s.dtype);if(0!==tfjsCore.util.sizeFromShape(o.shape)){var C=t.dataIdMap.get(_.dataId).id;wasmAny(u,y,C)}if(m&&t.disposeData(d.dataId),i){var w=tfjsCore.backend_util.expandShapeToKeepDim(_.shape,c);_.shape=w}return _}var anyConfig={kernelName:tfjsCore.Any,backendName:"wasm",setupFunc:setup$17,kernelFunc:any};function createArgMinMaxKernelConfig(e){var t;return{kernelName:e,backendName:"wasm",setupFunc:function(a){t=a.wasm.cwrap(e,null,["number","number","number","number","number"])},kernelFunc:function(e){var a=e.backend,n=e.inputs,r=e.attrs.axis,i=n.x,s=a.dataIdMap.get(i.dataId).id,u=s,o=i,p=permuteAxesAndTranspose(i,r,a),d=p.transposed,l=p.axes,c=p.inputWasTransposed;if(c){var m=a.dataIdMap.get(d.dataId).id;m!==s&&(o=d,u=m)}var f=o.shape.slice(0,-1),h=a.makeOutput(f,"int32"),g=a.dataIdMap.get(h.dataId).id,b=tfjsCore.util.sizeFromShape(h.shape),y=o.shape[l[0]];return t(u,CppDType[o.dtype],b,y,g),c&&a.disposeData(d.dataId),h}}}var wasmAvgPool,argMaxConfig=createArgMinMaxKernelConfig(tfjsCore.ArgMax),argMinConfig=createArgMinMaxKernelConfig(tfjsCore.ArgMin),asinConfig=createUnaryKernelConfig(tfjsCore.Asin),asinhConfig=createUnaryKernelConfig(tfjsCore.Asinh),atanConfig=createUnaryKernelConfig(tfjsCore.Atan),atan2Config=createBinaryKernelConfig(tfjsCore.Atan2),atanhConfig=createUnaryKernelConfig(tfjsCore.Atanh);function setup$16(e){wasmAvgPool=e.wasm.cwrap(tfjsCore.AvgPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function avgPool(e){var t=e.inputs,a=e.attrs,n=e.backend,r=t.x,i=n.dataIdMap.get(r.dataId).id,s=a.filterSize,u=a.strides,o=a.pad,p=a.dimRoundingMode,d=tfjsCore.backend_util.computePool2DInfo(r.shape,s,u,1,o,p),l=d.filterHeight,c=d.filterWidth,m=d.padInfo.top,f=d.padInfo.right,h=d.padInfo.bottom,g=d.padInfo.left,b=d.strideHeight,y=d.strideWidth,_=d.inChannels;if("channelsLast"!==d.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(d.dataFormat,"'. Please use 'channelsLast'."));if(1!==d.dilationWidth||1!==d.dilationHeight)throw new Error("was backend only supports average pooling with dilation = [1, 1], "+"got [".concat(d.dilationHeight,", ").concat(d.dilationWidth,"]."));var C=n.makeOutput(d.outShape,"float32"),w=n.dataIdMap.get(C.dataId).id;return wasmAvgPool(i,r.shape[0],r.shape[1],r.shape[2],l,c,m,f,h,g,b,y,_,w),C}var wasmAvgPool3D,avgPoolConfig={kernelName:tfjsCore.AvgPool,backendName:"wasm",setupFunc:setup$16,kernelFunc:avgPool};function setup$15(e){wasmAvgPool3D=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function avgPool3D(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.filterSize,s=n.strides,u=n.pad,o=n.dimRoundingMode,p=n.dataFormat,d=tfjsCore.backend_util.computePool3DInfo(r.shape,i,s,1,u,o,p),l=a.makeOutput(d.outShape,r.dtype);return wasmAvgPool3D(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(l.dataId).id,d.batchSize,d.inChannels,d.inDepth,d.inHeight,d.inWidth,d.outDepth,d.outHeight,d.outWidth,d.strideDepth,d.strideHeight,d.strideWidth,d.dilationDepth,d.dilationHeight,d.dilationWidth,d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth,d.padInfo.front,d.padInfo.top,d.padInfo.left),l}var wasmAvgPool3DGrad,avgPool3DConfig={kernelName:tfjsCore.AvgPool3D,backendName:"wasm",setupFunc:setup$15,kernelFunc:avgPool3D};function setup$14(e){wasmAvgPool3DGrad=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function avgPool3DGrad(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.dy,i=t.input,s=n.filterSize,u=n.strides,o=n.pad,p=n.dimRoundingMode,d=tfjsCore.backend_util.computePool3DInfo(i.shape,s,u,1,o,p),l=a.makeOutput(i.shape,i.dtype);return wasmAvgPool3DGrad(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(l.dataId).id,d.batchSize,d.inChannels,d.inDepth,d.inHeight,d.inWidth,d.outDepth,d.outHeight,d.outWidth,d.strideDepth,d.strideHeight,d.strideWidth,d.dilationDepth,d.dilationHeight,d.dilationWidth,d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth,d.padInfo.front,d.padInfo.top,d.padInfo.left,d.filterDepth,d.filterHeight,d.filterWidth),l}var wasmAvgPoolGrad,avgPool3DGradConfig={kernelName:tfjsCore.AvgPool3DGrad,backendName:"wasm",setupFunc:setup$14,kernelFunc:avgPool3DGrad};function setup$13(e){wasmAvgPoolGrad=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function avgPoolGrad(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.dy,i=t.input,s=n.filterSize,u=n.strides,o=n.pad,p=tfjsCore.backend_util.computePool2DInfo(i.shape,s,u,1,o),d=a.makeOutput(i.shape,i.dtype);return wasmAvgPoolGrad(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(d.dataId).id,p.batchSize,p.inChannels,p.inHeight,p.inWidth,p.outHeight,p.outWidth,p.strideHeight,p.strideWidth,p.dilationHeight,p.dilationWidth,p.effectiveFilterHeight,p.effectiveFilterWidth,p.padInfo.top,p.padInfo.left,p.filterHeight,p.filterWidth),d}var avgPoolGradConfig={kernelName:tfjsCore.AvgPoolGrad,backendName:"wasm",setupFunc:setup$13,kernelFunc:avgPoolGrad};function reshape(e){var t=e.inputs,a=e.attrs,n=t.x,r=a.shape,i=tfjsCore.util.sizeFromShape(n.shape),s=tfjsCore.util.inferFromImplicitShape(r,i);return tfjsCore.util.assert(i===tfjsCore.util.sizeFromShape(s),(function(){return"new shape: ".concat(s,", old shape: ").concat(n.shape,". New shape and old ")+"shape must have the same number of elements."})),e.backend.incRef(n.dataId),{dataId:n.dataId,shape:s,dtype:n.dtype}}var wasmBatchMatMul,reshapeConfig={kernelName:tfjsCore.Reshape,backendName:"wasm",kernelFunc:reshape};function setup$12(e){wasmBatchMatMul=e.wasm.cwrap(tfjsCore.BatchMatMul,null,["number","array","number","number","array","number","number","number","number"])}function batchMatMul(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.a,i=t.b,s=n.transposeA,u=n.transposeB;if("float32"!==r.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");var o=r.shape.length,p=i.shape.length,d=s?r.shape[o-2]:r.shape[o-1],l=u?i.shape[p-1]:i.shape[p-2],c=s?r.shape[o-1]:r.shape[o-2],m=u?i.shape[p-2]:i.shape[p-1],f=r.shape.slice(0,-2),h=i.shape.slice(0,-2),g=tfjsCore.util.sizeFromShape(f),b=tfjsCore.util.sizeFromShape(h),y=tfjsCore.broadcast_util.assertAndGetBroadcastShape(r.shape.slice(0,-2),i.shape.slice(0,-2)).concat([c,m]);tfjsCore.util.assert(d===l,(function(){return"Error in matMul: inner shapes (".concat(d,") and (")+"".concat(l,") of Tensors with shapes ").concat(r.shape," and ")+"".concat(i.shape," and transposeA=").concat(s)+" and transposeB=".concat(u," must match.")}));var _=u?[b,m,l]:[b,l,m],C=reshape({inputs:{x:r},backend:a,attrs:{shape:s?[g,d,c]:[g,c,d]}}),w=reshape({inputs:{x:i},backend:a,attrs:{shape:_}}),v=a.dataIdMap.get(C.dataId).id,k=a.dataIdMap.get(w.dataId).id,I=s?C.shape[2]:C.shape[1],S=u?w.shape[1]:w.shape[2],M=Math.max(g,b),A=a.makeOutput([M,I,S],C.dtype),D=a.dataIdMap.get(A.dataId).id,j=new Uint8Array(new Int32Array(C.shape).buffer),x=new Uint8Array(new Int32Array(w.shape).buffer);return wasmBatchMatMul(v,j,C.shape.length,k,x,w.shape.length,s,u,D),a.disposeData(C.dataId),a.disposeData(w.dataId),A.shape=y,A}var batchMatMulConfig={kernelName:tfjsCore.BatchMatMul,backendName:"wasm",setupFunc:setup$12,kernelFunc:batchMatMul};function concatImpl(e,t,a,n){var r=tfjsCore.util.getArrayFromDType(a,tfjsCore.util.sizeFromShape(t));if(n&&"string"!==a){var i=0;e.forEach((function(e){var t=tfjsCore.util.sizeFromShape(e.shape);r.set(e.vals,i),i+=t}))}else{var s=0;e.forEach((function(e){for(var n="string"===a?tfjsCore.backend_util.fromUint8ToStringArray(e.vals):e.vals,i=0,u=0;u<e.shape[0];++u)for(var o=u*t[1]+s,p=0;p<e.shape[1];++p)r[o+p]=n[i++];s+=e.shape[1]}))}return r}function rangeImpl(e,t,a,n){if(e===t||e<t&&a<0||t<e&&a>1)return tfjsCore.util.makeZerosTypedArray(0,n);var r=Math.abs(Math.ceil((t-e)/a)),i=tfjsCore.util.makeZerosTypedArray(r,n);t<e&&1===a&&(a=-1),i[0]=e;for(var s=1;s<i.length;s++)i[s]=i[s-1]+a;return i}function sliceImpl(e,t,a,n,r){var i=tfjsCore.slice_util.isSliceContinous(n,t,a),s=tfjsCore.util.sizeFromShape(a),u=tfjsCore.util.computeStrides(n);if(i){var o=tfjsCore.slice_util.computeFlatOffset(t,u);return"string"===r?e.slice(o,o+s):e.subarray(o,o+s)}for(var p="string"===r?tfjsCore.backend_util.fromUint8ToStringArray(e):e,d=tfjsCore.buffer(n,r,p),l=tfjsCore.buffer(a,r),c=0;c<l.size;++c){var m=l.indexToLoc(c),f=m.map((function(e,a){return e+t[a]}));l.set.apply(l,__spreadArray([d.get.apply(d,__spreadArray([],__read(f),!1))],__read(m),!1))}return"string"===r?tfjsCore.backend_util.fromStringArrayToUint8(l.values):l.values}tfjsCore.backend_util.RowPartitionType;var StringNGramsOp=function(){function e(e,t,a,n,r,i){this.separator=tfjsCore.util.encodeString(e),this.nGramWidths=t,this.leftPad=tfjsCore.util.encodeString(a),this.rightPad=tfjsCore.util.encodeString(n),this.padWidth=r,this.preserveShort=i}return e.prototype.getPadWidth=function(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)},e.prototype.getNumNGrams=function(e,t){var a=this.getPadWidth(t);return Math.max(0,e+2*a-t+1)},e.prototype.createNGrams=function(e,t,a,n,r,i){for(var s=function(s){var o=u.getPadWidth(i),p=Math.max(0,o-s),d=Math.max(0,o-(r-(s+1))),l=i-(p+d),c=t+(p>0?0:s-o),m=0;m+=p*u.leftPad.length;for(var f=0;f<l;++f)m+=e[c+f].length;m+=d*u.rightPad.length,m+=(p+d+l-1)*u.separator.length,a[n+s]=new Uint8Array(m);var h=a[n+s],g=0,b=function(e){return e.forEach((function(e){return h[g++]=e}))};for(f=0;f<p;++f)b(u.leftPad),b(u.separator);for(f=0;f<l-1;++f)b(e[c+f]),b(u.separator);if(l>0)for(b(e[c+l-1]),f=0;f<d;++f)b(u.separator),b(u.rightPad);else{for(f=0;f<d-1;++f)b(u.rightPad),b(u.separator);b(u.rightPad)}},u=this,o=0;o<r;++o)s(o)},e.prototype.compute=function(e,t){var a=this,n=e.length,r=t.length;if(r>0){var i=t[0];if(0!==i)throw new Error("First split value must be 0, got ".concat(i));for(var s=1;s<r;++s){var u=t[s]>=i;if(!(u=u&&t[s]<=n))throw new Error("Invalid split value ".concat(t[s],", must be in [").concat(i,", ").concat(n,"]"));i=t[s]}if(i!==n)throw new Error("Last split value must be data size. Expected ".concat(n,", got ").concat(i))}var o=r-1,p=tfjsCore.util.getArrayFromDType("int32",r);if(0===n||0===r){var d=new Array(n);for(s=0;s<=o;++s)p[s]=0;return[d,p]}p[0]=0;var l=function(e){var n=t[e]-t[e-1],r=0;c.nGramWidths.forEach((function(e){r+=a.getNumNGrams(n,e)})),c.preserveShort&&n>0&&0===r&&(r=1),p[e]=p[e-1]+r},c=this;for(s=1;s<=o;++s)l(s);var m=new Array(p[o]),f=function(n){var r=t[n],i=p[n];if(h.nGramWidths.forEach((function(s){var u=t[n+1]-t[n],o=a.getNumNGrams(u,s);a.createNGrams(e,r,m,i,o,s),i+=o})),h.preserveShort&&i===p[n]){var s=t[n+1]-t[n];if(0===s)return"continue";var u=s+2*h.padWidth;h.createNGrams(e,r,m,i,1,u)}},h=this;for(s=0;s<o;++s)f(s);return[m,p]},e}();function stringNGramsImpl(e,t,a,n,r,i,s,u){return new StringNGramsOp(a,n,r,i,s,u).compute(e,t)}function split(e,t,a,n){if(e.length)if(0!==t.length)if(1!==t.length){var r=0;for(o=0;o<e.length+1;o++)o!==e.length&&-1===t.indexOf(e[o])||(u=e.subarray(r,o),a&&0===u.length||n.push(u),r=o+1)}else{for(var i=t[0],s=e.indexOf(i);-1!==s;){var u=e.subarray(0,s);a&&0===u.length||n.push(u),s=(e=e.subarray(s+1)).indexOf(i)}a&&0===e.length||n.push(e)}else for(var o=0;o<e.length;++o)n.push(e.subarray(o,o+1))}function stringSplitImpl(e,t,a){for(var n=e.length,r=[],i=0,s=0,u=new Array(n),o=0;o<n;++o){var p=r.length;split(e[o],t,a,r);var d=r.length-p;u[o]=d,i+=d,s=Math.max(s,d)}var l=tfjsCore.util.getArrayFromDType("int32",2*i),c=new Array(i),m=[n,s],f=0;for(o=0;o<n;++o)for(var h=0;h<u[o];++h)l[2*f]=o,l[2*f+1]=h,c[f]=r[f],++f;return[l,c,m]}function stringToHashBucketFastImpl(e,t){for(var a=tfjsCore.util.getArrayFromDType("int32",e.length),n=0;n<e.length;++n)a[n]=tfjsCore.util.fingerPrint64(e[n]).modulo(t).getLowBitsUnsigned();return a}function uniqueImpl(e,t,a,n){for(var r=tfjsCore.util.parseAxisParam(t,a)[0],i=[1,a[0],1],s=0;s<r;s++)i[0]*=a[s];for(i[1]=a[r],s=r+1;s<a.length;s++)i[2]*=a[s];var u=new Map,o=new Int32Array(a[r]),p=new tfjsCore.TensorBuffer(i,n,e),d=[],l=1===i[0]&&1===i[2];for(s=0;s<a[r];s++){var c=void 0;if(l)c=e[s].toString();else{for(var m=[],f=0;f<i[0];f++)for(var h=0;h<i[2];h++)m.push(p.get(f,s,h));c=m.join(",")}var g=u.get(c);if(null!=g)o[s]=g;else{var b=u.size;u.set(c,b),o[s]=b,d.push(s)}}var y=i.slice();y[1]=u.size;var _=new tfjsCore.TensorBuffer(y,n);d.forEach((function(e,t){for(var a=0;a<i[0];a++)for(var n=0;n<i[2];n++)_.set(p.get(a,e,n),a,t,n)}));var C=a.slice();return C[r]=y[1],{outputValues:_.values,outputShape:C,indices:o}}function slice(e){var t=e.inputs.x,a=e.attrs,n=a.begin,r=a.size,i=e.backend,s=__read(tfjsCore.slice_util.parseSliceParams(t,n,r),2),u=s[0],o=s[1],p=tfjsCore.slice_util.isSliceContinous(t.shape,u,o),d=i.readSync(t.dataId),l=i.makeOutput(o,t.dtype),c=tfjsCore.util.computeStrides(t.shape),m=i.dataIdMap.get(l.dataId);if(p){var f=tfjsCore.slice_util.computeFlatOffset(u,c);return"string"===t.dtype?m.stringBytes=d.slice(f,f+tfjsCore.util.sizeFromShape(o)):i.typedArrayFromHeap(l).set(d.subarray(f,f+tfjsCore.util.sizeFromShape(o))),l}if("string"===t.dtype){var h=sliceImpl(d,u,o,t.shape,t.dtype);return m.stringBytes=h,l}var g=i.typedArrayFromHeap(l),b=t.shape.length;return 2===b?slice2d(d,c[0],g,u,o):3===b?slice3d(d,c[0],c[1],g,u,o):4===b?slice4d(d,c[0],c[1],c[2],g,u,o):(h=sliceImpl(d,u,o,t.shape,t.dtype),g.set(h)),l}function slice2d(e,t,a,n,r){for(var i=0,s=n[0],u=n[1],o=s+r[0],p=s;p<o;p++){var d=p*t+u;a.set(e.subarray(d,d+r[1]),i),i+=r[1]}}function slice3d(e,t,a,n,r,i){for(var s=0,u=r[0],o=r[1],p=r[2],d=u+i[0],l=o+i[1],c=u;c<d;c++)for(var m=o;m<l;m++){var f=c*t+m*a+p;n.set(e.subarray(f,f+i[2]),s),s+=i[2]}}function slice4d(e,t,a,n,r,i,s){for(var u=0,o=i[0],p=i[1],d=i[2],l=o+s[0],c=p+s[1],m=d+s[2],f=i[3],h=o;h<l;h++)for(var g=p;g<c;g++)for(var b=d;b<m;b++){var y=h*t+g*a+b*n+f;r.set(e.subarray(y,y+s[3]),u),u+=s[3]}}var sliceConfig={kernelName:tfjsCore.Slice,backendName:"wasm",kernelFunc:slice};function batchToSpaceND(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.blockShape,s=n.crops,u=i.reduce((function(e,t){return e*t})),o=tfjsCore.backend_util.getReshaped(r.shape,i,u),p=tfjsCore.backend_util.getPermuted(o.length,i.length),d=tfjsCore.backend_util.getReshapedPermuted(r.shape,i,u),l=tfjsCore.backend_util.getSliceBeginCoords(s,i.length),c=tfjsCore.backend_util.getSliceSize(d,s,i.length),m=reshape({inputs:{x:r},backend:a,attrs:{shape:o}}),f=transpose({inputs:{x:m},backend:a,attrs:{perm:p}}),h=reshape({inputs:{x:f},backend:a,attrs:{shape:d}}),g=slice({inputs:{x:h},backend:a,attrs:{begin:l,size:c}});return a.disposeData(m.dataId),a.disposeData(f.dataId),a.disposeData(h.dataId),g}var wasmBincount,batchToSpaceNDConfig={kernelName:tfjsCore.BatchToSpaceND,backendName:"wasm",kernelFunc:batchToSpaceND};function setup$11(e){wasmBincount=e.wasm.cwrap(tfjsCore.Bincount,null,["number","number","boolean","number","number","number"])}function bincount(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.x,i=a.weights,s=n.size,u=0!==i.shape.reduce((function(e,t){return e*t}),1),o=1===r.shape.length?[s]:[r.shape[0],s],p=t.makeOutput(o,i.dtype);function d(e){return t.dataIdMap.get(e.dataId).id}return wasmBincount(d(r),s,u,d(i),CppDType[i.dtype],d(p)),p}var bincountConfig={kernelName:tfjsCore.Bincount,backendName:"wasm",setupFunc:setup$11,kernelFunc:bincount},bitwiseAndConfig=createBinaryKernelConfig(tfjsCore.BitwiseAnd);function broadcastArgs(e){var t=e.inputs,a=e.backend,n=t.s0,r=t.s1,i=a.typedArrayFromHeap(n),s=a.typedArrayFromHeap(r),u=tfjsCore.backend_util.assertAndGetBroadcastShape(Array.from(i),Array.from(s));return a.makeOutput([u.length],"int32",void 0,new Int32Array(u))}var broadcastArgsConfig={kernelName:tfjsCore.BroadcastArgs,backendName:"wasm",kernelFunc:broadcastArgs};function cast(e){var t=e.inputs.x,a=e.attrs.dtype,n=e.backend,r=n.makeOutput(t.shape,a),i=n.typedArrayFromHeap(t);return n.typedArrayFromHeap(r).set(i),r}var wasmClip,castConfig={kernelName:tfjsCore.Cast,backendName:"wasm",kernelFunc:cast},ceilConfig=createUnaryKernelConfig(tfjsCore.Ceil);function setup$10(e){wasmClip=e.wasm.cwrap(tfjsCore.ClipByValue,null,["number","number","number","number"])}function clip(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.clipValueMin,s=n.clipValueMax,u=a.dataIdMap.get(r.dataId).id,o=a.makeOutput(r.shape,r.dtype),p=a.dataIdMap.get(o.dataId).id;return wasmClip(u,i,s,p),o}var clipByValueConfig={kernelName:tfjsCore.ClipByValue,backendName:"wasm",setupFunc:setup$10,kernelFunc:clip};function concat(e){var t=e.inputs,a=e.backend,n=tfjsCore.util.parseAxisParam(e.attrs.axis,t[0].shape)[0],r=t.map((function(e){return e.shape}));tfjsCore.backend_util.assertParamsConsistent(r,n);var i=tfjsCore.backend_util.computeOutShape(t.map((function(e){return e.shape})),n),s=t.filter((function(e){return tfjsCore.util.sizeFromShape(e.shape)>0}));if(1===s.length)return identity({inputs:{x:s[0]},backend:a});var u=a.makeOutput(i,t[0].dtype);if(0===tfjsCore.util.sizeFromShape(i))return u;if("string"===s[0].dtype){var o=s.map((function(e){var t=tfjsCore.util.sizeFromShape(e.shape.slice(n));return reshape({inputs:{x:e},backend:a,attrs:{shape:[-1,t]}})})),p=o.map((function(e){return{vals:a.readSync(e.dataId),shape:e.shape}}));i=tfjsCore.backend_util.computeOutShape(o.map((function(e){return e.shape})),1);var d=1===o[0].shape[0],l=concatImpl(p,i,t[0].dtype,d),c=tfjsCore.backend_util.computeOutShape(s.map((function(e){return e.shape})),n);return u.shape=c,a.dataIdMap.get(u.dataId).stringBytes=tfjsCore.backend_util.fromStringArrayToUint8(l),o.forEach((function(e){return a.disposeData(e.dataId)})),u}for(var m=tfjsCore.util.sizeFromShape(s[0].shape.slice(0,n)),f=0,h=s.map((function(e){var t=tfjsCore.util.sizeFromShape(e.shape.slice(n));return f+=t,t})),g=s.map((function(e){return a.typedArrayFromHeap(e)})),b=a.typedArrayFromHeap(u),y=0;y<m;y++)for(var _=y*f,C=0;C<g.length;C++){var w=h[C],v=y*w,k=g[C].subarray(v,v+w);b.set(k,_),_+=w}return u}var wasmConv2d,concatConfig={kernelName:tfjsCore.Concat,backendName:"wasm",kernelFunc:concat};function setup$$(e){wasmConv2d=e.wasm.cwrap(tfjsCore.Conv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function conv2d(e){var t=e.inputs,a=e.attrs,n=e.backend,r=t.x,i=t.filter,s=n.dataIdMap.get(r.dataId).id,u=n.dataIdMap.get(i.dataId).id,o=a.strides,p=a.dilations,d=a.pad,l=a.dimRoundingMode,c=a.dataFormat,m=tfjsCore.backend_util.convertConv2DDataFormat(c),f=tfjsCore.backend_util.computeConv2DInfo(r.shape,i.shape,o,p,d,l,!1,m),h=f.filterHeight,g=f.filterWidth,b=f.padInfo.top,y=f.padInfo.right,_=f.padInfo.bottom,C=f.padInfo.left,w=f.dilationHeight,v=f.dilationWidth,k=f.strideHeight,I=f.strideWidth,S=f.inChannels,M=f.outChannels,A="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error("wasm backend Conv2D does not support dataFormat:'"+"".concat(f.dataFormat,"'. Please use 'channelsLast'."));var D=n.makeOutput(f.outShape,"float32"),j=n.dataIdMap.get(D.dataId).id;return wasmConv2d(s,r.shape[0],r.shape[1],r.shape[2],u,h,g,b,y,_,C,A,w,v,k,I,S,M,j),D}var wasmConv2DBackpropInput,conv2DConfig={kernelName:tfjsCore.Conv2D,backendName:"wasm",setupFunc:setup$$,kernelFunc:conv2d};function setup$_(e){wasmConv2DBackpropInput=e.wasm.cwrap(tfjsCore.Conv2DBackpropInput,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function conv2DBackpropInput(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.dy,i=a.filter,s=n.strides,u=n.pad,o=n.dataFormat,p=n.dimRoundingMode,d=n.inputShape,l=tfjsCore.backend_util.convertConv2DDataFormat(o),c=tfjsCore.backend_util.computeConv2DInfo(d,i.shape,s,1,u,p,!1,l),m=c.batchSize,f=c.filterHeight,h=c.filterWidth,g=c.inChannels,b=c.inHeight,y=c.inWidth,_=c.outChannels,C=c.outHeight,w=c.outWidth,v=c.strideHeight,k=c.strideWidth,I=f-1-c.padInfo.top,S=h-1-c.padInfo.left,M="channelsLast"===c.dataFormat,A=tfjsCore.util.computeStrides(c.inShape),D=tfjsCore.util.computeStrides(r.shape),j=__read(tfjsCore.util.computeStrides(i.shape),3),x=j[0],F=j[1],N=j[2],R=A[0],P=M?A[1]:A[2],T=M?A[2]:1,B=M?1:A[1],E=D[0],W=M?D[1]:D[2],O=M?D[2]:1,z=M?1:D[1],$=t.makeOutput(c.inShape,"float32"),G=t.dataIdMap.get($.dataId).id,H=t.dataIdMap.get(r.dataId).id,L=t.dataIdMap.get(i.dataId).id;return wasmConv2DBackpropInput(H,L,m,f,h,b,y,g,C,w,_,v,k,I,S,x,F,N,R,P,T,B,E,W,O,z,G),$}var wasmConv3D,conv2DBackpropInputConfig={kernelName:tfjsCore.Conv2DBackpropInput,backendName:"wasm",setupFunc:setup$_,kernelFunc:conv2DBackpropInput};function setup$Z(e){wasmConv3D=e.wasm.cwrap(tfjsCore.Conv3D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function conv3D(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=t.filter,s=n.strides,u=n.pad,o=n.dilations;if("float32"!==r.dtype)throw new Error("Tensor x must have dtype float32, got ".concat(r.dtype));if("float32"!==i.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));var p=tfjsCore.backend_util.computeConv3DInfo(r.shape,i.shape,s,o,u),d=a.makeOutput(p.outShape,r.dtype);return wasmConv3D(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(d.dataId).id,p.batchSize,p.inDepth,p.inHeight,p.inWidth,p.inChannels,p.outDepth,p.outHeight,p.outWidth,p.outChannels,p.strideDepth,p.strideHeight,p.strideWidth,p.dilationDepth,p.dilationHeight,p.dilationWidth,p.filterDepth,p.filterHeight,p.filterWidth,p.padInfo.front,p.padInfo.top,p.padInfo.left),d}var wasmConv3DBackpropFilterV2,conv3DConfig={kernelName:tfjsCore.Conv3D,backendName:"wasm",setupFunc:setup$Z,kernelFunc:conv3D};function setup$Y(e){wasmConv3DBackpropFilterV2=e.wasm.cwrap(tfjsCore.Conv3DBackpropFilterV2,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function conv3DBackpropFilterV2(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=t.dy,s=n.strides,u=n.pad,o=n.filterShape;if("float32"!==r.dtype)throw new Error("Tensor dy must have dtype float32, got ".concat(r.dtype));if("float32"!==i.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));var p=tfjsCore.backend_util.computeConv3DInfo(r.shape,o,s,1,u),d=a.makeOutput(p.filterShape,i.dtype);return wasmConv3DBackpropFilterV2(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(d.dataId).id,p.batchSize,p.inDepth,p.inHeight,p.inWidth,p.inChannels,p.outDepth,p.outHeight,p.outWidth,p.outChannels,p.strideDepth,p.strideHeight,p.strideWidth,p.dilationDepth,p.dilationHeight,p.dilationWidth,p.filterDepth,p.filterHeight,p.filterWidth,p.padInfo.front,p.padInfo.top,p.padInfo.left),d}var wasmConv3DBackpropInputV2,conv3DBackpropFilterV2Config={kernelName:tfjsCore.Conv3DBackpropFilterV2,backendName:"wasm",setupFunc:setup$Y,kernelFunc:conv3DBackpropFilterV2};function setup$X(e){wasmConv3DBackpropInputV2=e.wasm.cwrap(tfjsCore.Conv3DBackpropInputV2,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function conv3DBackpropInputV2(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.dy,i=t.filter,s=n.pad,u=n.strides,o=n.inputShape;if("float32"!==r.dtype)throw new Error("Tensor dy must have dtype float32, got ".concat(r.dtype));if("float32"!==i.dtype)throw new Error("Tensor filter must have dtype float32, got ".concat(i.dtype));var p=tfjsCore.backend_util.computeConv3DInfo(o,i.shape,u,1,s),d=a.makeOutput(p.inShape,r.dtype);return wasmConv3DBackpropInputV2(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(d.dataId).id,p.batchSize,p.inDepth,p.inHeight,p.inWidth,p.inChannels,p.outDepth,p.outHeight,p.outWidth,p.outChannels,p.strideDepth,p.strideHeight,p.strideWidth,p.dilationDepth,p.dilationHeight,p.dilationWidth,p.filterDepth,p.filterHeight,p.filterWidth,p.padInfo.front,p.padInfo.top,p.padInfo.left),d}var InterpolationMethod,wasmCropAndResize,conv3DBackpropInputV2Config={kernelName:tfjsCore.Conv3DBackpropInputV2,backendName:"wasm",setupFunc:setup$X,kernelFunc:conv3DBackpropInputV2},cosConfig=createUnaryKernelConfig(tfjsCore.Cos),coshConfig=createUnaryKernelConfig(tfjsCore.Cosh);function setup$W(e){wasmCropAndResize=e.wasm.cwrap(tfjsCore.CropAndResize,null,["number","number","number","number","array","number","number","number","number","number"])}function cropAndResize(e){var t,a=e.backend,n=e.inputs,r=e.attrs,i=r.method,s=r.extrapolationValue,u=r.cropSize,o=n.image,p=n.boxes,d=n.boxInd,l=p.shape[0],c=__read(u,2),m=c[0],f=c[1],h=[l,m,f,o.shape[3]],g=a.dataIdMap.get(o.dataId);"float32"!==o.dtype&&(t=cast({backend:a,inputs:{x:o},attrs:{dtype:"float32"}}),g=a.dataIdMap.get(t.dataId));var b=g.id,y=a.dataIdMap.get(p.dataId).id,_=a.dataIdMap.get(d.dataId).id,C=a.makeOutput(h,"float32"),w=a.dataIdMap.get(C.dataId).id,v=new Uint8Array(new Int32Array(o.shape).buffer);return wasmCropAndResize(b,y,_,l,v,m,f,InterpolationMethod[i],s,w),null!=t&&a.disposeData(t.dataId),C}!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(InterpolationMethod||(InterpolationMethod={}));var wasmCumprod,cropAndResizeConfig={kernelName:tfjsCore.CropAndResize,backendName:"wasm",setupFunc:setup$W,kernelFunc:cropAndResize};function setup$V(e){wasmCumprod=e.wasm.cwrap(tfjsCore.Cumprod,null,["number","number","number","number","number","number"])}function cumprod(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.axis,s=n.exclusive,u=n.reverse,o=r.shape.length;tfjsCore.util.assert("float32"===r.dtype||"int32"===r.dtype,(function(){return"cumprod does not support ".concat(r.dtype," tensors in the WASM backend")}));var p=tfjsCore.backend_util.getAxesPermutation([i],o),d=r;null!==p&&(d=transpose({inputs:{x:r},attrs:{perm:p},backend:a}));var l=tfjsCore.backend_util.getInnerMostAxes(1,o)[0];tfjsCore.backend_util.assertAxesAreInnerMostDims("cumprod",[l],o);var c=a.makeOutput(d.shape,d.dtype),m=d.shape[l],f=a.dataIdMap.get(d.dataId).id,h=a.dataIdMap.get(c.dataId).id;wasmCumprod(f,s?1:0,u?1:0,m,h,CppDType[r.dtype]);var g=c;return null!==p&&(g=transpose({inputs:{x:c},attrs:{perm:tfjsCore.backend_util.getUndoAxesPermutation(p)},backend:a}),a.disposeData(d.dataId),a.disposeData(c.dataId)),g}var wasmCumsum,cumprodConfig={kernelName:tfjsCore.Cumprod,backendName:"wasm",setupFunc:setup$V,kernelFunc:cumprod};function setup$U(e){wasmCumsum=e.wasm.cwrap(tfjsCore.Cumsum,null,["number","number","number","number","number","number"])}function cumsum(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.axis,s=n.exclusive,u=n.reverse,o=r.shape.length;tfjsCore.util.assert("float32"===r.dtype||"int32"===r.dtype,(function(){return"cumsum does not support ".concat(r.dtype," tensors in the WASM backend")}));var p=tfjsCore.backend_util.getAxesPermutation([i],o),d=r;null!==p&&(d=transpose({inputs:{x:r},attrs:{perm:p},backend:a}));var l=tfjsCore.backend_util.getInnerMostAxes(1,o)[0];tfjsCore.backend_util.assertAxesAreInnerMostDims("cumsum",[l],o);var c=a.makeOutput(d.shape,d.dtype),m=d.shape[l],f=a.dataIdMap.get(d.dataId).id,h=a.dataIdMap.get(c.dataId).id;wasmCumsum(f,s?1:0,u?1:0,m,h,CppDType[r.dtype]);var g=c;return null!==p&&(g=transpose({inputs:{x:c},attrs:{perm:tfjsCore.backend_util.getUndoAxesPermutation(p)},backend:a}),a.disposeData(d.dataId),a.disposeData(c.dataId)),g}var wasmDenseBincount,cumsumConfig={kernelName:tfjsCore.Cumsum,backendName:"wasm",setupFunc:setup$U,kernelFunc:cumsum};function setup$T(e){wasmDenseBincount=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])}function denseBincount(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.x,i=a.weights,s=n.size,u=n.binaryOutput,o=0!==i.shape.reduce((function(e,t){return e*t}),1),p=1===r.shape.length?[s]:[r.shape[0],s],d=t.makeOutput(p,i.dtype);function l(e){return t.dataIdMap.get(e.dataId).id}return wasmDenseBincount(l(r),new Uint8Array(new Int32Array(r.shape).buffer),r.shape.length,s,o,l(i),CppDType[i.dtype],u,l(d)),d}var wasmDepthToSpace,denseBincountConfig={kernelName:tfjsCore.DenseBincount,backendName:"wasm",setupFunc:setup$T,kernelFunc:denseBincount};function setup$S(e){wasmDepthToSpace=e.wasm.cwrap(tfjsCore.DepthToSpace,null,["number","number","number","array","number","array","array","number","number"])}function depthToSpace(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.x,i=n.blockSize,s=n.dataFormat,u=r.shape[0],o=("NHWC"===s?r.shape[1]:r.shape[2])*i,p=("NHWC"===s?r.shape[2]:r.shape[3])*i,d=("NHWC"===s?r.shape[3]:r.shape[1])/(i*i),l="NHWC"===s?[u,o,p,d]:[u,d,o,p],c=t.makeOutput(l,"float32"),m=t.dataIdMap.get(r.dataId).id,f=new Uint8Array(new Int32Array(tfjsCore.util.computeStrides(r.shape)).buffer),h=new Uint8Array(new Int32Array(l).buffer),g=new Uint8Array(new Int32Array(tfjsCore.util.computeStrides(l)).buffer),b=t.dataIdMap.get(c.dataId).id;return wasmDepthToSpace(m,i,"NHWC"===s?1:0,f,r.shape.length-1,h,g,l.length,b),c}var wasmDepthwiseConv2d,depthToSpaceConfig={kernelName:tfjsCore.DepthToSpace,backendName:"wasm",setupFunc:setup$S,kernelFunc:depthToSpace};function setup$R(e){wasmDepthwiseConv2d=e.wasm.cwrap(tfjsCore.DepthwiseConv2dNative,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function depthwiseConv2d(e){var t=e.inputs,a=e.attrs,n=e.backend,r=t.x,i=t.filter,s=n.dataIdMap.get(r.dataId).id,u=n.dataIdMap.get(i.dataId).id,o=a.strides,p=a.dilations,d=a.pad,l=a.dimRoundingMode,c=null==p?[1,1]:p,m=tfjsCore.backend_util.computeConv2DInfo(r.shape,i.shape,o,c,d,l,!0),f=m.filterHeight,h=m.filterWidth,g=m.padInfo.top,b=m.padInfo.right,y=m.padInfo.bottom,_=m.padInfo.left,C=m.dilationHeight,w=m.dilationWidth,v=m.strideHeight,k=m.strideWidth,I=m.inChannels,S=m.outChannels,M="SAME"===m.padInfo.type?1:0;if("channelsLast"!==m.dataFormat)throw new Error("wasm backend DepthwiseConv2dNative does not support dataFormat:'"+"".concat(m.dataFormat,"'. Please use 'channelsLast'."));var A=n.makeOutput(m.outShape,"float32"),D=n.dataIdMap.get(A.dataId).id;return wasmDepthwiseConv2d(s,r.shape[0],r.shape[1],r.shape[2],u,f,h,g,b,y,_,M,C,w,v,k,I,S,D),A}var wasmDiag,depthwiseConv2dNativeConfig={kernelName:tfjsCore.DepthwiseConv2dNative,backendName:"wasm",setupFunc:setup$R,kernelFunc:depthwiseConv2d};function setup$Q(e){wasmDiag=e.wasm.cwrap("Diag",null,["number","number","number","number"])}function diag(e){var t=e.inputs,a=e.backend,n=t.x,r=tfjsCore.util.sizeFromShape(n.shape),i=a.makeOutput(__spreadArray(__spreadArray([],__read(n.shape),!1),__read(n.shape),!1),n.dtype);return wasmDiag(a.dataIdMap.get(n.dataId).id,CppDType[n.dtype],r,a.dataIdMap.get(i.dataId).id),i}var wasmDilation2D,diagConfig={kernelName:tfjsCore.Diag,backendName:"wasm",setupFunc:setup$Q,kernelFunc:diag};function setup$P(e){wasmDilation2D=e.wasm.cwrap(tfjsCore.Dilation2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function dilation2D(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=t.filter,s=n.strides,u=n.pad,o=n.dilations;if(r.dtype!==i.dtype)throw new Error("Dilation2D error: x must have the same dtype as filter. Got ".concat(r.dtype," and ").concat(i.dtype));var p=tfjsCore.backend_util.computeDilation2DInfo(r.shape,i.shape,s,u,"NHWC",o),d=a.makeOutput(p.outShape,r.dtype);return wasmDilation2D(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(d.dataId).id,CppDType[r.dtype],p.batchSize,p.inChannels,p.inHeight,p.inWidth,p.outHeight,p.outWidth,p.strideHeight,p.strideWidth,p.dilationHeight,p.dilationWidth,p.filterHeight,p.filterWidth,p.padInfo.top,p.padInfo.left),d}var wasmDilation2DBackpropFilter,dilation2DConfig={kernelName:tfjsCore.Dilation2D,backendName:"wasm",setupFunc:setup$P,kernelFunc:dilation2D};function setup$O(e){wasmDilation2DBackpropFilter=e.wasm.cwrap(tfjsCore.Dilation2DBackpropFilter,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function dilation2DBackpropFilter(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=t.filter,s=t.dy,u=n.strides,o=n.pad,p=n.dilations;if(r.dtype!==i.dtype||r.dtype!==s.dtype)throw new Error("Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ".concat(r.dtype,", ").concat(i.dtype,", and ").concat(s.dtype));var d=tfjsCore.backend_util.computeDilation2DInfo(r.shape,i.shape,u,o,"NHWC",p),l=a.makeOutput(i.shape,i.dtype);return wasmDilation2DBackpropFilter(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(s.dataId).id,a.dataIdMap.get(l.dataId).id,CppDType[r.dtype],d.batchSize,d.inChannels,d.inHeight,d.inWidth,d.outHeight,d.outWidth,d.strideHeight,d.strideWidth,d.dilationHeight,d.dilationWidth,d.filterHeight,d.filterWidth,d.padInfo.top,d.padInfo.left),l}var wasmDilation2DBackpropInput,dilation2DBackpropFilterConfig={kernelName:tfjsCore.Dilation2DBackpropFilter,backendName:"wasm",setupFunc:setup$O,kernelFunc:dilation2DBackpropFilter};function setup$N(e){wasmDilation2DBackpropInput=e.wasm.cwrap(tfjsCore.Dilation2DBackpropInput,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function dilation2DBackpropInput(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=t.filter,s=t.dy,u=n.strides,o=n.pad,p=n.dilations;if(r.dtype!==i.dtype||r.dtype!==s.dtype)throw new Error("Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ".concat(r.dtype,", ").concat(i.dtype,", and ").concat(s.dtype));var d=tfjsCore.backend_util.computeDilation2DInfo(r.shape,i.shape,u,o,"NHWC",p),l=a.makeOutput(r.shape,r.dtype);return wasmDilation2DBackpropInput(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(s.dataId).id,a.dataIdMap.get(l.dataId).id,CppDType[r.dtype],d.batchSize,d.inChannels,d.inHeight,d.inWidth,d.outHeight,d.outWidth,d.strideHeight,d.strideWidth,d.dilationHeight,d.dilationWidth,d.filterHeight,d.filterWidth,d.padInfo.top,d.padInfo.left),l}var wasmEluGrad,dilation2DBackpropInputConfig={kernelName:tfjsCore.Dilation2DBackpropInput,backendName:"wasm",setupFunc:setup$N,kernelFunc:dilation2DBackpropInput},eluConfig=createUnaryKernelConfig(tfjsCore.Elu);function setup$M(e){wasmEluGrad=e.wasm.cwrap(tfjsCore.EluGrad,null,["number","number","number"])}function eluGrad(e){var t=e.inputs,a=e.backend,n=t.dy,r=t.y,i=a.makeOutput(r.shape,"float32"),s=function(e){return a.dataIdMap.get(e.dataId).id};return wasmEluGrad(s(r),s(n),s(i)),i}var eluGradConfig={kernelName:tfjsCore.EluGrad,backendName:"wasm",setupFunc:setup$M,kernelFunc:eluGrad},supportsFullBroadcast$8=!1,equalConfig=createBinaryKernelConfig(tfjsCore.Equal,supportsFullBroadcast$8,"bool"),erfConfig=createUnaryKernelConfig(tfjsCore.Erf),expConfig=createUnaryKernelConfig(tfjsCore.Exp,"float32");function expandDims(e){var t=e.inputs,a=e.attrs,n=e.backend,r=t.input,i=a.dim,s=r.shape.length,u=r.shape.slice(),o=i;return i<0&&(tfjsCore.util.assert(-(s+1)<=i,(function(){return"Axis must be in the interval [".concat(-(s+1),", ").concat(s,"]")})),o=s+i+1),u.splice(o,0,1),reshape({inputs:{x:r},backend:n,attrs:{shape:u}})}var expandDimsConfig={kernelName:tfjsCore.ExpandDims,backendName:"wasm",kernelFunc:expandDims},expm1Config=createUnaryKernelConfig(tfjsCore.Expm1,"float32");function fill(e){var t=e.attrs,a=t.shape,n=t.value,r=e.backend,i=e.attrs.dtype;i=i||tfjsCore.util.inferDtype(n);var s=r.makeOutput(a,i);return r.typedArrayFromHeap(s).fill(n),s}var wasmFlipLeftRight,fillConfig={kernelName:tfjsCore.Fill,backendName:"wasm",kernelFunc:fill};function setup$L(e){wasmFlipLeftRight=e.wasm.cwrap(tfjsCore.FlipLeftRight,null,["number","number","number","number","number","number"])}function flipLeftRight(e){var t=e.inputs,a=e.backend,n=t.image,r=a.makeOutput(n.shape,n.dtype),i=a.dataIdMap.get(n.dataId).id,s=a.dataIdMap.get(r.dataId).id,u=__read(n.shape,4),o=u[0],p=u[1],d=u[2],l=u[3];return wasmFlipLeftRight(i,o,p,d,l,s),r}var wasmBatchNorm,flipLeftRightConfig={kernelName:tfjsCore.FlipLeftRight,backendName:"wasm",kernelFunc:flipLeftRight,setupFunc:setup$L},floorConfig=createUnaryKernelConfig(tfjsCore.Floor),floorDivConfig=createBinaryKernelConfig(tfjsCore.FloorDiv);function setup$K(e){wasmBatchNorm=e.wasm.cwrap(tfjsCore.FusedBatchNorm,null,["number","number","number","number","number","number","number"])}function fusedBatchNorm(e){var t=e.backend,a=e.inputs,n=e.attrs.varianceEpsilon,r=a.x,i=a.mean,s=a.variance,u=a.offset,o=a.scale,p=t.dataIdMap.get(r.dataId).id,d=t.dataIdMap.get(i.dataId).id,l=t.dataIdMap.get(s.dataId).id,c=null!=u?t.dataIdMap.get(u.dataId).id:0,m=null!=o?t.dataIdMap.get(o.dataId).id:0,f=t.makeOutput(r.shape,r.dtype);if(0===tfjsCore.util.sizeFromShape(r.shape))return f;var h=t.dataIdMap.get(f.dataId).id;return wasmBatchNorm(p,d,l,c,m,n,h),f}var wasmFusedConv2d,fusedBatchNormConfig={kernelName:tfjsCore.FusedBatchNorm,backendName:"wasm",setupFunc:setup$K,kernelFunc:fusedBatchNorm};function setup$J(e){wasmFusedConv2d=e.wasm.cwrap(tfjsCore.FusedConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function fusedConv2d(e){var t=e.inputs,a=e.attrs,n=e.backend,r=t.x,i=t.filter,s=t.bias,u=t.preluActivationWeights,o=a.strides,p=a.pad,d=a.dilations,l=a.dataFormat,c=a.dimRoundingMode,m=a.activation,f=a.leakyreluAlpha,h=tfjsCore.backend_util.computeConv2DInfo(r.shape,i.shape,o,d,p,c),g=FusableActivation[m];if(null==g)throw new Error("".concat(m," activation not yet supported for FusedConv2D ")+"in the wasm backend.");var b=n.dataIdMap.get(r.dataId).id,y=n.dataIdMap.get(i.dataId).id,_=h.outChannels,C=0;if(null!=s){var w=n.dataIdMap.get(s.dataId);if(1!==w.shape.length)throw new Error("FusedConv2D only supports rank-1 bias but got "+"rank ".concat(w.shape.length,"."));if(w.shape[0]!==_)throw new Error("FusedConv2D bias shape (".concat(w.shape,") does not ")+"match the number of output channels (".concat(_,")"));C=w.id}var v=h.filterHeight,k=h.filterWidth,I=h.padInfo.top,S=h.padInfo.right,M=h.padInfo.bottom,A=h.padInfo.left,D=h.dilationHeight,j=h.dilationWidth,x=h.strideHeight,F=h.strideWidth,N=h.inChannels,R="SAME"===h.padInfo.type?1:0,P=h.batchSize,T=h.inHeight,B=h.inWidth;if("NHWC"!==l)throw new Error("wasm backend FusedConv2D does not support dataFormat:'"+"".concat(l,"'. Please use 'NHWC'."));var E=n.makeOutput(h.outShape,"float32"),W=n.dataIdMap.get(E.dataId).id,O=null==u?0:n.dataIdMap.get(u.dataId).id;return wasmFusedConv2d(b,P,T,B,y,v,k,C,I,S,M,A,R,D,j,x,F,N,_,g,O,f||0,W),E}var wasmFusedDepthwiseConv2d,fusedConv2DConfig={kernelName:tfjsCore.FusedConv2D,backendName:"wasm",setupFunc:setup$J,kernelFunc:fusedConv2d};function setup$I(e){wasmFusedDepthwiseConv2d=e.wasm.cwrap(tfjsCore.FusedDepthwiseConv2D,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function fusedDepthwiseConv2d(e){var t=e.inputs,a=e.attrs,n=e.backend,r=t.x,i=t.filter,s=t.bias,u=t.preluActivationWeights,o=a.strides,p=a.pad,d=a.dilations,l=a.dataFormat,c=a.dimRoundingMode,m=a.activation,f=a.leakyreluAlpha,h=tfjsCore.backend_util.computeConv2DInfo(r.shape,i.shape,o,d,p,c,!0),g=FusableActivation[m];if(null==g)throw new Error("".concat(m," activation not yet supported for FusedDepthwiseConv2D ")+"in the wasm backend.");var b=n.dataIdMap.get(r.dataId).id,y=n.dataIdMap.get(i.dataId).id,_=h.outChannels,C=0;if(null!=s){var w=n.dataIdMap.get(s.dataId);if(1!==w.shape.length)throw new Error("FusedDepthwiseConv2D only supports rank-1 bias but got "+"rank ".concat(w.shape.length,"."));if(w.shape[0]!==_)throw new Error("FusedDepthwiseConv2D bias shape (".concat(w.shape,") does not ")+"match the number of output channels (".concat(_,")"));C=w.id}var v=h.filterHeight,k=h.filterWidth,I=h.padInfo.top,S=h.padInfo.right,M=h.padInfo.bottom,A=h.padInfo.left,D=h.dilationHeight,j=h.dilationWidth,x=h.strideHeight,F=h.strideWidth,N=h.inChannels,R="SAME"===h.padInfo.type?1:0,P=h.batchSize,T=h.inHeight,B=h.inWidth;if("NHWC"!==l)throw new Error("wasm backend FusedDepthwiseConv2D does not support dataFormat:'"+"".concat(l,"'. Please use 'NHWC'."));var E=n.makeOutput(h.outShape,"float32"),W=n.dataIdMap.get(E.dataId).id,O=null==u?0:n.dataIdMap.get(u.dataId).id;return wasmFusedDepthwiseConv2d(b,P,T,B,y,v,k,C,I,S,M,A,R,D,j,x,F,N,_,g,O,f||0,W),E}var wasmGatherNd,fusedDepthwiseConv2DConfig={kernelName:tfjsCore.FusedDepthwiseConv2D,backendName:"wasm",setupFunc:setup$I,kernelFunc:fusedDepthwiseConv2d};function setup$H(e){wasmGatherNd=e.wasm.cwrap(tfjsCore.GatherNd,null,["number","number","number","number","number","number","array","number"])}function gatherNd(e){var t=e.backend,a=e.inputs,n=a.params,r=a.indices,i=__read(tfjsCore.gather_util.prepareAndValidate(n,r),4),s=i[0],u=i[1],o=i[2],p=i[3],d=t.makeOutput(s,n.dtype);if(0===u)return d;var l=r.shape,c=l[l.length-1],m=t.dataIdMap.get(n.dataId).id,f=t.dataIdMap.get(r.dataId).id,h=new Uint8Array(new Int32Array(p).buffer),g=t.dataIdMap.get(d.dataId).id;return wasmGatherNd(m,CppDType[n.dtype],f,u,c,o,h,g),d}var wasmGather,gatherNdConfig={kernelName:tfjsCore.GatherNd,backendName:"wasm",setupFunc:setup$H,kernelFunc:gatherNd};function setup$G(e){wasmGather=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])}function gatherV2(e){for(var t=e.backend,a=e.inputs,n=e.attrs,r=a.x,i=a.indices,s=n.axis,u=n.batchDims,o=tfjsCore.util.parseAxisParam(s,r.shape)[0],p=t.readSync(i.dataId),d=r.shape[o],l=function(e){var t=p[e];tfjsCore.util.assert(t<=d-1&&t>=0,(function(){return"GatherV2: the index value ".concat(t," is not in [0, ").concat(d-1,"]")}))},c=0;c<p.length;++c)l(c);var m=tfjsCore.backend_util.segment_util.collectGatherOpShapeInfo(r,i,o,u),f=reshape({inputs:{x:r},attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]},backend:t}),h=tfjsCore.util.sizeFromShape(i.shape),g=reshape({inputs:{x:i},attrs:{shape:[m.batchSize,h/m.batchSize]},backend:t}),b=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],y=t.makeOutput(b,r.dtype);if(0===tfjsCore.util.sizeFromShape(r.shape))return y;var _=f.shape.length-1,C=t.dataIdMap.get(f.dataId).id,w=t.dataIdMap.get(g.dataId).id,v=t.dataIdMap.get(y.dataId).id,k=new Uint8Array(new Int32Array(tfjsCore.util.computeStrides(f.shape)).buffer),I=new Uint8Array(new Int32Array(tfjsCore.util.computeStrides(b)).buffer);return wasmGather(C,CppDType[r.dtype],k,_,w,m.batchSize,I,v),t.disposeData(f.dataId),t.disposeData(g.dataId),y.shape=m.outputShape,y}var wasmFunc$5,gatherV2Config={kernelName:tfjsCore.GatherV2,backendName:"wasm",setupFunc:setup$G,kernelFunc:gatherV2},supportsFullBroadcast$7=!1,greaterConfig=createBinaryKernelConfig(tfjsCore.Greater,supportsFullBroadcast$7,"bool"),supportsFullBroadcast$6=!1,greaterEqualConfig=createBinaryKernelConfig(tfjsCore.GreaterEqual,supportsFullBroadcast$6,"bool"),isFiniteConfig=createUnaryKernelConfig(tfjsCore.IsFinite,"bool"),isInfConfig=createUnaryKernelConfig(tfjsCore.IsInf,"bool"),isNaNConfig=createUnaryKernelConfig(tfjsCore.IsNan,"bool");function setupFunc(e){wasmFunc$5=e.wasm.cwrap(tfjsCore.LeakyRelu,null,["number","number","number","number"])}function leakyRelu(e){var t=e.inputs.x,a=e.attrs.alpha,n=e.backend,r=n.dataIdMap.get(t.dataId).id,i=n.makeOutput(t.shape,"float32");if(0!==tfjsCore.util.sizeFromShape(t.shape)){var s=n.dataIdMap.get(i.dataId).id;wasmFunc$5(r,CppDType[t.dtype],a,s)}return i}var wasmLinSpace,leakyReluConfig={kernelName:tfjsCore.LeakyRelu,backendName:"wasm",setupFunc,kernelFunc:leakyRelu},supportsFullBroadcast$5=!1,lessConfig=createBinaryKernelConfig(tfjsCore.Less,supportsFullBroadcast$5,"bool"),supportsFullBroadcast$4=!1,lessEqualConfig=createBinaryKernelConfig(tfjsCore.LessEqual,supportsFullBroadcast$4,"bool");function setup$F(e){wasmLinSpace=e.wasm.cwrap(tfjsCore.LinSpace,null,["number","number","number","number"])}function linSpace(e){var t=e.attrs,a=e.backend,n=t.start,r=t.stop,i=t.num,s=Math.floor(i),u=a.makeOutput([s],"float32");return wasmLinSpace(a.dataIdMap.get(u.dataId).id,n,r,s),u}var wasmLRN,linSpaceConfig={kernelName:tfjsCore.LinSpace,backendName:"wasm",setupFunc:setup$F,kernelFunc:linSpace},logConfig=createUnaryKernelConfig(tfjsCore.Log),log1pConfig=createUnaryKernelConfig(tfjsCore.Log1p),supportsFullBroadcast$3=!1,logicalAndConfig=createBinaryKernelConfig(tfjsCore.LogicalAnd,supportsFullBroadcast$3,"bool"),logicalNotConfig=createUnaryKernelConfig(tfjsCore.LogicalNot),supportsFullBroadcast$2=!1,logicalOrConfig=createBinaryKernelConfig(tfjsCore.LogicalOr,supportsFullBroadcast$2,"bool"),supportsFullBroadcast$1=!1,logicalXorConfig=createBinaryKernelConfig(tfjsCore.LogicalXor,supportsFullBroadcast$1,"bool");function setup$E(e){wasmLRN=e.wasm.cwrap(tfjsCore.LRN,null,["number","number","number","number","number","number","number"])}function lrn(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.depthRadius,s=n.bias,u=n.alpha,o=n.beta;if("float32"!==r.dtype)throw new Error("LRN error: x must have dtype float32");var p=a.makeOutput(r.shape,r.dtype);return wasmLRN(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(p.dataId).id,r.shape[3],i,s,u,o),p}var wasmLRNGrad,lrnConfig={kernelName:tfjsCore.LRN,backendName:"wasm",setupFunc:setup$E,kernelFunc:lrn};function setup$D(e){wasmLRNGrad=e.wasm.cwrap(tfjsCore.LRNGrad,null,["number","number","number","number","number","number","number","number","number"])}function lrnGrad(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=t.y,s=t.dy,u=n.depthRadius,o=n.bias,p=n.alpha,d=n.beta;if("float32"!==r.dtype||"float32"!==i.dtype||"float32"!==s.dtype)throw new Error("LRNGrad error: x, y, and dy must have dtype float32");var l=a.makeOutput(r.shape,r.dtype);return wasmLRNGrad(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(s.dataId).id,a.dataIdMap.get(l.dataId).id,s.shape[3],u,o,p,d),l}var wasmMax,lrnGradConfig={kernelName:tfjsCore.LRNGrad,backendName:"wasm",setupFunc:setup$D,kernelFunc:lrnGrad};function setup$C(e){wasmMax=e.wasm.cwrap(tfjsCore.Max,null,["number","number","number","number"])}function max(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.reductionIndices,i=n.keepDims,s=a.x,u=t.dataIdMap.get(s.dataId).id,o=s,p=permuteAxesAndTranspose(s,r,t),d=p.transposed,l=p.axes,c=p.originalAxes,m=p.inputWasTransposed;m&&(o=d,u=t.dataIdMap.get(d.dataId).id);var f=o.shape.length;tfjsCore.backend_util.assertAxesAreInnerMostDims("max",l,f);var h=__read(tfjsCore.backend_util.computeOutAndReduceShapes(o.shape,l),2),g=h[0],b=h[1],y=tfjsCore.util.sizeFromShape(b),_=t.makeOutput(g,s.dtype);if(0!==tfjsCore.util.sizeFromShape(o.shape)){var C=t.dataIdMap.get(_.dataId).id;wasmMax(u,CppDType[s.dtype],y,C)}if(m&&t.disposeData(d.dataId),i){var w=tfjsCore.backend_util.expandShapeToKeepDim(_.shape,c);_.shape=w}return _}var wasmMaxPool,maxConfig={kernelName:tfjsCore.Max,backendName:"wasm",setupFunc:setup$C,kernelFunc:max},maximumConfig=createBinaryKernelConfig(tfjsCore.Maximum);function setup$B(e){wasmMaxPool=e.wasm.cwrap(tfjsCore.MaxPool,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function maxPool(e){var t=e.inputs,a=e.attrs,n=e.backend,r=t.x,i=n.dataIdMap.get(r.dataId).id;tfjsCore.util.assert("float32"===r.dtype,(function(){return"Error in MaxPool: only float32 input is supported. Got ".concat(r.dtype,".")}));var s=a.filterSize,u=a.strides,o=a.pad,p=a.dimRoundingMode,d=tfjsCore.backend_util.computePool2DInfo(r.shape,s,u,1,o,p),l=d.filterHeight,c=d.filterWidth,m=d.padInfo.top,f=d.padInfo.right,h=d.padInfo.bottom,g=d.padInfo.left,b=d.dilationHeight,y=d.dilationWidth,_=d.strideHeight,C=d.strideWidth,w=d.inChannels,v=d.outChannels;if("channelsLast"!==d.dataFormat)throw new Error("wasm backend does not support dataFormat:'"+"".concat(d.dataFormat,"'. Please use 'channelsLast'."));var k=n.makeOutput(d.outShape,"float32"),I=n.dataIdMap.get(k.dataId).id;return wasmMaxPool(i,r.shape[0],r.shape[1],r.shape[2],l,c,m,f,h,g,b,y,_,C,w,v,I),k}var wasmMaxPool3D,maxPoolConfig={kernelName:tfjsCore.MaxPool,backendName:"wasm",setupFunc:setup$B,kernelFunc:maxPool};function setup$A(e){wasmMaxPool3D=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function maxPool3D(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.filterSize,s=n.strides,u=n.pad,o=n.dimRoundingMode,p=n.dataFormat,d=tfjsCore.backend_util.computePool3DInfo(r.shape,i,s,1,u,o,p),l=a.makeOutput(d.outShape,r.dtype);return wasmMaxPool3D(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(l.dataId).id,d.batchSize,d.inChannels,d.inDepth,d.inHeight,d.inWidth,d.outDepth,d.outHeight,d.outWidth,d.strideDepth,d.strideHeight,d.strideWidth,d.dilationDepth,d.dilationHeight,d.dilationWidth,d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth,d.padInfo.front,d.padInfo.top,d.padInfo.left),l}var wasmMaxPool3DGrad,maxPool3DConfig={kernelName:tfjsCore.MaxPool3D,backendName:"wasm",setupFunc:setup$A,kernelFunc:maxPool3D};function setup$z(e){wasmMaxPool3DGrad=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function maxPool3DGrad(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.dy,i=t.input,s=n.filterSize,u=n.strides,o=n.pad,p=n.dimRoundingMode,d=tfjsCore.backend_util.computePool3DInfo(i.shape,s,u,1,o,p),l=a.makeOutput(i.shape,i.dtype);return wasmMaxPool3DGrad(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(l.dataId).id,d.batchSize,d.inChannels,d.inDepth,d.inHeight,d.inWidth,d.outDepth,d.outHeight,d.outWidth,d.strideDepth,d.strideHeight,d.strideWidth,d.dilationDepth,d.dilationHeight,d.dilationWidth,d.effectiveFilterDepth,d.effectiveFilterHeight,d.effectiveFilterWidth,d.padInfo.front,d.padInfo.top,d.padInfo.left),l}var wasmMaxPoolGrad,maxPool3DGradConfig={kernelName:tfjsCore.MaxPool3DGrad,backendName:"wasm",setupFunc:setup$z,kernelFunc:maxPool3DGrad};function setup$y(e){wasmMaxPoolGrad=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function maxPoolGrad(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.dy,i=t.input,s=n.filterSize,u=n.strides,o=n.pad,p=n.dimRoundingMode,d=tfjsCore.backend_util.computePool2DInfo(i.shape,s,u,1,o,p),l=a.makeOutput(i.shape,i.dtype);return wasmMaxPoolGrad(a.dataIdMap.get(i.dataId).id,a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(l.dataId).id,d.batchSize,d.inChannels,d.inHeight,d.inWidth,d.outHeight,d.outWidth,d.strideHeight,d.strideWidth,d.dilationHeight,d.dilationWidth,d.effectiveFilterHeight,d.effectiveFilterWidth,d.padInfo.top,d.padInfo.left),l}var wasmMaxPoolWithArgmax,maxPoolGradConfig={kernelName:tfjsCore.MaxPoolGrad,backendName:"wasm",setupFunc:setup$y,kernelFunc:maxPoolGrad};function setup$x(e){wasmMaxPoolWithArgmax=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])}function maxPoolWithArgmax(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.filterSize,s=n.strides,u=n.pad,o=n.includeBatchInIndex;tfjsCore.util.assert(4===r.shape.length,(function(){return"Error in maxPool: input must be rank 4 but got rank ".concat(r.shape.length,".")}));var p=[1,1];tfjsCore.util.assert(tfjsCore.backend_util.eitherStridesOrDilationsAreOne(s,p),(function(){return"Error in maxPool: Either strides or dilations must be 1. "+"Got strides ".concat(s," and dilations '").concat(p,"'")}));var d=tfjsCore.backend_util.computePool2DInfo(r.shape,i,s,[1,1],u),l=a.makeOutput(d.outShape,r.dtype),c=a.makeOutput(d.outShape,"int32");return wasmMaxPoolWithArgmax(a.dataIdMap.get(r.dataId).id,a.dataIdMap.get(l.dataId).id,a.dataIdMap.get(c.dataId).id,CppDType[r.dtype],o,d.batchSize,d.inChannels,d.inHeight,d.inWidth,d.outHeight,d.outWidth,d.strideHeight,d.strideWidth,d.dilationHeight,d.dilationWidth,d.effectiveFilterHeight,d.effectiveFilterWidth,d.padInfo.top,d.padInfo.left),[l,c]}var wasmMean,maxPoolWithArgmaxConfig={kernelName:tfjsCore.MaxPoolWithArgmax,backendName:"wasm",setupFunc:setup$x,kernelFunc:maxPoolWithArgmax};function setup$w(e){wasmMean=e.wasm.cwrap(tfjsCore.Mean,null,["number, number, number"])}function mean(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.axis,i=n.keepDims,s=a.x,u=t.dataIdMap.get(s.dataId).id,o=u,p=s,d=permuteAxesAndTranspose(s,r,t),l=d.transposed,c=d.axes,m=d.originalAxes,f=d.inputWasTransposed,h=c;if(f){var g=t.dataIdMap.get(l.dataId).id;g!==u&&(p=l,o=g,h=tfjsCore.backend_util.getInnerMostAxes(h.length,p.shape.length))}tfjsCore.backend_util.assertAxesAreInnerMostDims("mean",h,p.shape.length);var b=__read(tfjsCore.backend_util.computeOutAndReduceShapes(p.shape,h),2),y=b[0],_=b[1],C=tfjsCore.util.sizeFromShape(_),w=p;"float32"!==p.dtype&&(w=cast({backend:t,inputs:{x:p},attrs:{dtype:"float32"}}),o=t.dataIdMap.get(w.dataId).id);var v=t.makeOutput(y,"float32");if(0!==tfjsCore.util.sizeFromShape(p.shape)){var k=t.dataIdMap.get(v.dataId).id;wasmMean(o,C,k)}if(f&&t.disposeData(l.dataId),i){var I=tfjsCore.backend_util.expandShapeToKeepDim(v.shape,m);v.shape=I}return"float32"!==p.dtype&&t.disposeData(w.dataId),v}var wasmMin,meanConfig={kernelName:tfjsCore.Mean,backendName:"wasm",setupFunc:setup$w,kernelFunc:mean};function setup$v(e){wasmMin=e.wasm.cwrap(tfjsCore.Min,null,["number","number","number","number"])}function min(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.axis,i=n.keepDims,s=a.x,u=t.dataIdMap.get(s.dataId).id,o=u,p=s,d=permuteAxesAndTranspose(s,r,t),l=d.transposed,c=d.axes,m=d.originalAxes,f=d.inputWasTransposed;if(f){var h=t.dataIdMap.get(l.dataId).id;h!==u&&(p=l,o=h)}var g=p.shape.length;tfjsCore.backend_util.assertAxesAreInnerMostDims("min",c,g);var b=__read(tfjsCore.backend_util.computeOutAndReduceShapes(p.shape,c),2),y=b[0],_=b[1],C=tfjsCore.util.sizeFromShape(_),w=t.makeOutput(y,p.dtype);if(0!==tfjsCore.util.sizeFromShape(p.shape)){var v=t.dataIdMap.get(w.dataId).id;wasmMin(o,CppDType[s.dtype],C,v)}if(f&&t.disposeData(l.dataId),i){var k=tfjsCore.backend_util.expandShapeToKeepDim(w.shape,m);w.shape=k}return w}var MirrorPaddingMode,wasmMirrorPad,minConfig={kernelName:tfjsCore.Min,backendName:"wasm",setupFunc:setup$v,kernelFunc:min},minimumConfig=createBinaryKernelConfig(tfjsCore.Minimum);function setup$u(e){wasmMirrorPad=e.wasm.cwrap(tfjsCore.MirrorPad,null,["number","array","number","number","array","array","number","number"])}function mirrorPad(e){var t=e.inputs.x,a=e.backend,n=e.attrs,r=n.paddings,i=n.mode,s=r.map((function(e,a){return e[0]+t.shape[a]+e[1]})),u=a.dataIdMap.get(t.dataId).id,o=a.makeOutput(s,t.dtype),p=a.dataIdMap.get(o.dataId).id,d=new Uint8Array(new Int32Array(t.shape).buffer),l=r.map((function(e){return e[0]})),c=r.map((function(e){return e[1]})),m=new Uint8Array(new Int32Array(l).buffer),f=new Uint8Array(new Int32Array(c).buffer);return wasmMirrorPad(u,d,t.shape.length,CppDType[t.dtype],m,f,MirrorPaddingMode[i],p),o}!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(MirrorPaddingMode||(MirrorPaddingMode={}));var wasmFunc$4,mirrorPadConfig={kernelName:tfjsCore.MirrorPad,backendName:"wasm",kernelFunc:mirrorPad,setupFunc:setup$u};function setup$t(e){wasmFunc$4=e.wasm.cwrap(tfjsCore.Softmax,null,["number","number","number","number"])}function softmax(e){var t=e.backend,a=e.inputs.logits,n=e.attrs.dim,r=t.dataIdMap.get(a.dataId).id,i=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(i.dataId).id,u=a.shape[n],o=tfjsCore.util.sizeFromShape(a.shape)/u;return 0===tfjsCore.util.sizeFromShape(i.shape)||wasmFunc$4(r,s,u,o),i}var wasmMultinomial,softmaxConfig={kernelName:tfjsCore.Softmax,backendName:"wasm",setupFunc:setup$t,kernelFunc:softmax};function setup$s(e){wasmMultinomial=e.wasm.cwrap(tfjsCore.Multinomial,null,["number","number","number","number","number","number"])}function multinomial(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.logits,i=n.numSamples,s=n.seed,u=n.normalized;if("float32"!==r.dtype)throw new Error("Tensor logits must have dtype float32, got ".concat(r.dtype));var o=u?r:softmax({inputs:{logits:r},backend:a,attrs:{dim:r.shape.length-1}}),p=__read(o.shape,2),d=p[0],l=p[1],c=a.makeOutput([d,i],"int32");return wasmMultinomial(a.dataIdMap.get(o.dataId).id,d,l,i,s,a.dataIdMap.get(c.dataId).id),u||a.disposeData(o.dataId),c}var wasmFunc$3,multinomialConfig={kernelName:tfjsCore.Multinomial,backendName:"wasm",setupFunc:setup$s,kernelFunc:multinomial},modConfig=createBinaryKernelConfig(tfjsCore.Mod),multiplyConfig=createBinaryKernelConfig(tfjsCore.Multiply),negConfig=createUnaryKernelConfig(tfjsCore.Neg);function parseResultStruct(e,t){var a=new Int32Array(e.wasm.HEAPU8.buffer,t,4),n=a[0],r=a[1],i=a[2],s=a[3];return e.wasm._free(t),{pSelectedIndices:n,selectedSize:r,pSelectedScores:i,pValidOutputs:s}}function setup$r(e){wasmFunc$3=e.wasm.cwrap(tfjsCore.NonMaxSuppressionV3,"number",["number","number","number","number","number"])}function kernelFunc$1(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.iouThreshold,i=n.maxOutputSize,s=n.scoreThreshold,u=a.boxes,o=a.scores,p=t.dataIdMap.get(u.dataId).id,d=t.dataIdMap.get(o.dataId).id,l=parseResultStruct(t,wasmFunc$3(p,d,i,r,s)),c=l.pSelectedIndices,m=l.selectedSize,f=l.pSelectedScores,h=l.pValidOutputs;return t.wasm._free(f),t.wasm._free(h),t.makeOutput([m],"int32",c)}var wasmFunc$2,nonMaxSuppressionV3Config={kernelName:tfjsCore.NonMaxSuppressionV3,backendName:"wasm",setupFunc:setup$r,kernelFunc:kernelFunc$1};function setup$q(e){wasmFunc$2=e.wasm.cwrap(tfjsCore.NonMaxSuppressionV4,"number",["number","number","number","number","number","bool"])}function nonMaxSuppressionV4(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.iouThreshold,i=n.maxOutputSize,s=n.scoreThreshold,u=n.padToMaxOutputSize,o=a.boxes,p=a.scores,d=t.dataIdMap.get(o.dataId).id,l=t.dataIdMap.get(p.dataId).id,c=parseResultStruct(t,wasmFunc$2(d,l,i,r,s,u)),m=c.pSelectedIndices,f=c.selectedSize,h=c.pSelectedScores,g=c.pValidOutputs;return t.wasm._free(h),[t.makeOutput([f],"int32",m),t.makeOutput([],"int32",g)]}var wasmFunc$1,nonMaxSuppressionV4Config={kernelName:tfjsCore.NonMaxSuppressionV4,backendName:"wasm",setupFunc:setup$q,kernelFunc:nonMaxSuppressionV4};function setup$p(e){wasmFunc$1=e.wasm.cwrap(tfjsCore.NonMaxSuppressionV5,"number",["number","number","number","number","number","number"])}function kernelFunc(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.iouThreshold,i=n.maxOutputSize,s=n.scoreThreshold,u=n.softNmsSigma,o=a.boxes,p=a.scores,d=t.dataIdMap.get(o.dataId).id,l=t.dataIdMap.get(p.dataId).id,c=parseResultStruct(t,wasmFunc$1(d,l,i,r,s,u)),m=c.pSelectedIndices,f=c.selectedSize,h=c.pSelectedScores,g=c.pValidOutputs;return t.wasm._free(g),[t.makeOutput([f],"int32",m),t.makeOutput([f],"float32",h)]}var wasmOneHot,nonMaxSuppressionV5Config={kernelName:tfjsCore.NonMaxSuppressionV5,backendName:"wasm",setupFunc:setup$p,kernelFunc},supportsFullBroadcast=!1,notEqualConfig=createBinaryKernelConfig(tfjsCore.NotEqual,supportsFullBroadcast,"bool");function setup$o(e){wasmOneHot=e.wasm.cwrap(tfjsCore.OneHot,null,["number","number","number","number","number"])}function oneHot(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.indices,i=n.dtype,s=n.depth,u=n.onValue,o=n.offValue,p=a.makeOutput(__spreadArray(__spreadArray([],__read(r.shape),!1),[s],!1),i),d=a.dataIdMap.get(p.dataId).id,l=a.dataIdMap.get(r.dataId).id;return wasmOneHot(l,s,u,o,d),p}var oneHotConfig={kernelName:tfjsCore.OneHot,backendName:"wasm",setupFunc:setup$o,kernelFunc:oneHot};function onesLike(e){var t=e.inputs.x,a=e.backend,n=a.makeOutput(t.shape,t.dtype);return a.typedArrayFromHeap(n).fill(1),n}var onesLikeConfig={kernelName:tfjsCore.OnesLike,backendName:"wasm",kernelFunc:onesLike};function pack(e){var t=e.inputs,a=e.backend,n=e.attrs.axis;if(1===t.length)return expandDims({inputs:{input:t[0]},backend:a,attrs:{dim:n}});var r=t[0].shape,i=t[0].dtype;t.forEach((function(e){tfjsCore.util.assertShapesMatch(r,e.shape,"All tensors passed to stack must have matching shapes"),tfjsCore.util.assert(i===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var s=[],u=concat({inputs:t.map((function(e){var t=expandDims({inputs:{input:e},backend:a,attrs:{dim:n}});return s.push(t),t})),backend:a,attrs:{axis:n}});return s.forEach((function(e){return a.disposeData(e.dataId)})),u}var wasmPadV2,packConfig={kernelName:tfjsCore.Pack,backendName:"wasm",kernelFunc:pack};function setup$n(e){wasmPadV2=e.wasm.cwrap(tfjsCore.PadV2,null,["number","array","number","number","array","array","number","number"])}function pad(e){var t=e.inputs.x,a=e.backend,n=e.attrs,r=n.paddings,i=n.constantValue,s=r.map((function(e,a){return e[0]+t.shape[a]+e[1]}));if(0===tfjsCore.util.sizeFromShape(t.shape))return fill({backend:a,attrs:{shape:s,value:i,dtype:t.dtype}});var u=a.dataIdMap.get(t.dataId).id,o=a.makeOutput(s,t.dtype),p=a.dataIdMap.get(o.dataId).id,d=new Uint8Array(new Int32Array(t.shape).buffer),l=r.map((function(e){return e[0]})),c=r.map((function(e){return e[1]})),m=new Uint8Array(new Int32Array(l).buffer),f=new Uint8Array(new Int32Array(c).buffer);return wasmPadV2(u,d,t.shape.length,CppDType[t.dtype],m,f,i,p),o}var wasmPrelu,padV2Config={kernelName:tfjsCore.PadV2,backendName:"wasm",kernelFunc:pad,setupFunc:setup$n},powConfig=createBinaryKernelConfig(tfjsCore.Pow);function setup$m(e){wasmPrelu=e.wasm.cwrap(tfjsCore.Prelu,null,["number","number","number"])}function prelu(e){var t=e.inputs,a=e.backend,n=t.x,r=t.alpha,i=a.dataIdMap.get(n.dataId).id,s=a.dataIdMap.get(r.dataId).id,u=i,o=n,p=o;"float32"!==o.dtype&&(p=cast({backend:a,inputs:{x:n},attrs:{dtype:"float32"}}),u=a.dataIdMap.get(p.dataId).id);var d=a.makeOutput(n.shape,"float32"),l=a.dataIdMap.get(d.dataId).id;return wasmPrelu(u,s,l),"float32"!==o.dtype&&a.disposeData(p.dataId),d}var wasmProd,preluConfig={kernelName:tfjsCore.Prelu,backendName:"wasm",setupFunc:setup$m,kernelFunc:prelu};function setup$l(e){wasmProd=e.wasm.cwrap(tfjsCore.Prod,null,["number","number","number","number"])}function prod(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.axis,i=n.keepDims,s=a.x,u=t.dataIdMap.get(s.dataId).id,o=u,p=s,d=permuteAxesAndTranspose(s,r,t),l=d.transposed,c=d.axes,m=d.originalAxes,f=d.inputWasTransposed,h=c;if(f){var g=t.dataIdMap.get(l.dataId).id;g!==u&&(p=l,o=g,h=tfjsCore.backend_util.getInnerMostAxes(h.length,p.shape.length))}tfjsCore.backend_util.assertAxesAreInnerMostDims("prod",h,p.shape.length);var b=__read(tfjsCore.backend_util.computeOutAndReduceShapes(p.shape,h),2),y=b[0],_=b[1],C=tfjsCore.util.sizeFromShape(_),w=t.makeOutput(y,p.dtype);if(0!==tfjsCore.util.sizeFromShape(p.shape)){var v=t.dataIdMap.get(w.dataId).id;wasmProd(o,C,CppDType[w.dtype],v)}if(f&&t.disposeData(l.dataId),i){var k=tfjsCore.backend_util.expandShapeToKeepDim(w.shape,m);w.shape=k}return w}var wasmResizeBilinear,prodConfig={kernelName:tfjsCore.Prod,backendName:"wasm",setupFunc:setup$l,kernelFunc:prod},range=function(e){var t=e.backend,a=e.attrs,n=a.start,r=a.stop,i=a.step,s=a.dtype,u=rangeImpl(n,r,i,s),o=t.makeOutput([u.length],s);return t.typedArrayFromHeap(o).set(u),o},rangeConfig={kernelName:tfjsCore.Range,backendName:"wasm",kernelFunc:range},realDivConfig=createBinaryKernelConfig(tfjsCore.RealDiv),reciprocalConfig=createUnaryKernelConfig(tfjsCore.Reciprocal),reluConfig=createUnaryKernelConfig(tfjsCore.Relu),relu6Config=createUnaryKernelConfig(tfjsCore.Relu6);function setup$k(e){wasmResizeBilinear=e.wasm.cwrap(tfjsCore.ResizeBilinear,null,["number","number","number","number","number","number","number","number","number","number"])}function resizeBilinear(e){var t,a=e.backend,n=e.inputs,r=e.attrs,i=n.images,s=r.alignCorners,u=r.halfPixelCenters,o=__read(r.size,2),p=o[0],d=o[1],l=__read(i.shape,4),c=l[0],m=l[1],f=l[2],h=l[3],g=[c,p,d,h],b=a.dataIdMap.get(i.dataId);"float32"!==b.dtype&&(t=cast({backend:a,inputs:{x:i},attrs:{dtype:"float32"}}),b=a.dataIdMap.get(t.dataId));var y=b.id,_=a.makeOutput(g,"float32");if(0===tfjsCore.util.sizeFromShape(i.shape))return _;var C=a.dataIdMap.get(_.dataId).id;return wasmResizeBilinear(y,c,m,f,h,p,d,s?1:0,u?1:0,C),null!=t&&a.disposeData(t.dataId),_}var wasmResizeBilinearGrad,resizeBilinearConfig={kernelName:tfjsCore.ResizeBilinear,backendName:"wasm",setupFunc:setup$k,kernelFunc:resizeBilinear};function setup$j(e){wasmResizeBilinearGrad=e.wasm.cwrap(tfjsCore.ResizeBilinearGrad,null,["number","number","number","array","array","boolean"])}function resizeBilinearGrad(e){var t,a=e.inputs,n=e.backend,r=e.attrs,i=a.images,s=a.dy,u=r.alignCorners,o=n.makeOutput(i.shape,"float32"),p=n.dataIdMap.get(i.dataId);return"float32"!==p.dtype&&(t=cast({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),p=n.dataIdMap.get(t.dataId)),wasmResizeBilinearGrad(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(s.shape).buffer),u),null!=t&&n.disposeData(t.dataId),o}var wasmResizeNearestNeighbor,resizeBilinearGradConfig={kernelName:tfjsCore.ResizeBilinearGrad,backendName:"wasm",setupFunc:setup$j,kernelFunc:resizeBilinearGrad};function setup$i(e){wasmResizeNearestNeighbor=e.wasm.cwrap(tfjsCore.ResizeNearestNeighbor,null,["number","number","number","number","number","number","number","number","number","number"])}function resizeNearestNeighbor(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.images,i=n.alignCorners,s=n.halfPixelCenters,u=__read(n.size,2),o=u[0],p=u[1],d=__read(r.shape,4),l=d[0],c=d[1],m=d[2],f=d[3],h=[l,o,p,f],g=t.makeOutput(h,"float32");if(0===tfjsCore.util.sizeFromShape(r.shape))return g;var b,y=t.dataIdMap.get(r.dataId);"float32"!==y.dtype&&(b=cast({backend:t,inputs:{x:r},attrs:{dtype:"float32"}}),y=t.dataIdMap.get(b.dataId));var _=y.id,C=t.dataIdMap.get(g.dataId).id;return wasmResizeNearestNeighbor(_,l,c,m,f,o,p,i?1:0,s?1:0,C),null!=b&&t.disposeData(b.dataId),g}var wasmResizeNearestNeighborGrad,resizeNearestNeighborConfig={kernelName:tfjsCore.ResizeNearestNeighbor,backendName:"wasm",setupFunc:setup$i,kernelFunc:resizeNearestNeighbor};function setup$h(e){wasmResizeNearestNeighborGrad=e.wasm.cwrap(tfjsCore.ResizeNearestNeighborGrad,null,["number","number","number","array","array","boolean"])}function resizeNearestNeighborGrad(e){var t,a=e.inputs,n=e.backend,r=e.attrs,i=a.images,s=a.dy,u=r.alignCorners,o=n.makeOutput(i.shape,"float32"),p=n.dataIdMap.get(i.dataId);return"float32"!==p.dtype&&(t=cast({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),p=n.dataIdMap.get(t.dataId)),wasmResizeNearestNeighborGrad(n.dataIdMap.get(i.dataId).id,n.dataIdMap.get(s.dataId).id,n.dataIdMap.get(o.dataId).id,new Uint8Array(new Int32Array(i.shape).buffer),new Uint8Array(new Int32Array(s.shape).buffer),u),null!=t&&n.disposeData(t.dataId),o}var wasmReverse,resizeNearestNeighborGradConfig={kernelName:tfjsCore.ResizeNearestNeighborGrad,backendName:"wasm",setupFunc:setup$h,kernelFunc:resizeNearestNeighborGrad};function setup$g(e){wasmReverse=e.wasm.cwrap(tfjsCore.Reverse,null,["number","array","number","array","number","number"])}function reverse(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.dims,s=tfjsCore.util.parseAxisParam(i,r.shape);if(0===r.shape.length)return identity({inputs:{x:r},backend:a});var u=a.makeOutput(r.shape,r.dtype),o=a.dataIdMap.get(r.dataId).id,p=a.dataIdMap.get(u.dataId).id,d=new Uint8Array(new Int32Array(s).buffer),l=new Uint8Array(new Int32Array(r.shape).buffer);wasmReverse(o,d,s.length,l,r.shape.length,p);var c=reshape({inputs:{x:u},attrs:{shape:r.shape},backend:a});return a.disposeData(u.dataId),c}var wasmRotate,reverseConfig={kernelName:tfjsCore.Reverse,backendName:"wasm",kernelFunc:reverse,setupFunc:setup$g};function setup$f(e){wasmRotate=e.wasm.cwrap(tfjsCore.RotateWithOffset,null,["number","number","number","number","number","number","number","number","array","number","number"])}function rotateWithOffset(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.image,i=n.radians,s=n.fillValue,u=n.center,o=a.makeOutput(r.shape,r.dtype),p=a.dataIdMap.get(r.dataId).id,d=a.dataIdMap.get(o.dataId).id,l=__read(r.shape,4),c=l[0],m=l[1],f=l[2],h=l[3],g=__read(tfjsCore.backend_util.getImageCenter(u,m,f),2),b=g[0],y=g[1],_="number"==typeof s?[s,s,s,0===s?0:255]:__spreadArray(__spreadArray([],__read(s),!1),[255],!1),C=new Uint8Array(new Int32Array(_).buffer);return wasmRotate(p,c,m,f,h,i,b,y,C,_.length,d),o}var wasmScatterNd,rotateWithOffsetConfig={kernelName:tfjsCore.RotateWithOffset,backendName:"wasm",kernelFunc:rotateWithOffset,setupFunc:setup$f},roundConfig=createUnaryKernelConfig(tfjsCore.Round),rsqrtConfig=createUnaryKernelConfig(tfjsCore.Rsqrt);function setup$e(e){wasmScatterNd=e.wasm.cwrap(tfjsCore.ScatterNd,null,["number","number","number","number","number","number","array","number","number"])}function scatterNd(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.indices,i=a.updates,s=n.shape,u=t.makeOutput(s,i.dtype);if(0===tfjsCore.util.sizeFromShape(s))return u;var o=tfjsCore.scatter_util.calculateShapes(i,r,s),p=o.sliceRank,d=o.numUpdates,l=o.sliceSize,c=o.strides,m=o.outputSize,f=t.dataIdMap.get(r.dataId).id,h=t.dataIdMap.get(i.dataId).id,g=new Uint8Array(new Int32Array(c).buffer),b=t.dataIdMap.get(u.dataId).id;return wasmScatterNd(f,h,CppDType[i.dtype],p,d,l,g,m,b),u}var wasmSearchSorted,scatterNdConfig={kernelName:tfjsCore.ScatterNd,backendName:"wasm",setupFunc:setup$e,kernelFunc:scatterNd};function setup$d(e){wasmSearchSorted=e.wasm.cwrap(tfjsCore.SearchSorted,null,["number","number","number","number","number","number","bool","number"])}function searchSorted(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.sortedSequence,i=t.values,s=n.side;if(r.dtype!==i.dtype)throw new Error("SearchSorted error: sorted_sequence must have the same dtype as values. Got ".concat(r.dtype," and ").concat(i.dtype));var u=a.makeOutput(i.shape,"int32");function o(e){return a.dataIdMap.get(e.dataId).id}return wasmSearchSorted(o(r),o(i),r.shape[0],r.shape[1],i.shape[1],CppDType[r.dtype],"left"===s,o(u)),u}var wasmSelect,searchSortedConfig={kernelName:tfjsCore.SearchSorted,backendName:"wasm",setupFunc:setup$d,kernelFunc:searchSorted};function setup$c(e){wasmSelect=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}function select(e){var t=e.inputs,a=e.backend,n=t.condition,r=t.t,i=t.e,s=a.dataIdMap.get(n.dataId).id,u=a.dataIdMap.get(r.dataId).id,o=a.dataIdMap.get(i.dataId).id,p=a.makeOutput(r.shape,r.dtype),d=a.dataIdMap.get(p.dataId).id,l=n.shape.length,c=r.shape.length,m=0===l||l>1||1===c?1:tfjsCore.util.sizeFromShape(r.shape.slice(1));return wasmSelect(s,u,o,m,d),p}var wasmFunc,selectConfig={kernelName:tfjsCore.Select,backendName:"wasm",kernelFunc:select,setupFunc:setup$c},seluConfig=createUnaryKernelConfig(tfjsCore.Selu);function setup$b(e){wasmFunc=e.wasm.cwrap(tfjsCore.Sigmoid,null,["number","number"])}function sigmoid(e){var t=e.backend,a=e.inputs.x,n=t.dataIdMap.get(a.dataId).id,r=t.makeOutput(a.shape,a.dtype),i=t.dataIdMap.get(r.dataId).id;return 0===tfjsCore.util.sizeFromShape(r.shape)||wasmFunc(n,i),r}var sigmoidConfig={kernelName:"Sigmoid",backendName:"wasm",setupFunc:setup$b,kernelFunc:sigmoid},signConfig=createUnaryKernelConfig(tfjsCore.Sign),sinConfig=createUnaryKernelConfig(tfjsCore.Sin),sinhConfig=createUnaryKernelConfig(tfjsCore.Sinh),softplusConfig=createUnaryKernelConfig(tfjsCore.Softplus);function spaceToBatchND(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.blockShape,s=n.paddings,u=tfjsCore.util.sizeFromShape(i),o=[[0,0]];o.push.apply(o,__spreadArray([],__read(s),!1));for(var p=1+i.length;p<r.shape.length;++p)o.push([0,0]);var d=padV2Config.kernelFunc({inputs:{x:r},backend:a,attrs:{paddings:o,constantValue:0}}),l=tfjsCore.backend_util.getReshaped(d.shape,i,u,!1),c=tfjsCore.backend_util.getPermuted(l.length,i.length,!1),m=tfjsCore.backend_util.getReshapedPermuted(d.shape,i,u,!1),f=reshape({inputs:{x:d},backend:a,attrs:{shape:l}}),h=transpose({inputs:{x:f},backend:a,attrs:{perm:c}}),g=reshape({inputs:{x:h},backend:a,attrs:{shape:m}});return a.disposeData(d.dataId),a.disposeData(f.dataId),a.disposeData(h.dataId),g}var wasmSparseFillEmptyRows,spaceToBatchNDConfig={kernelName:tfjsCore.SpaceToBatchND,backendName:"wasm",kernelFunc:spaceToBatchND};function setup$a(e){wasmSparseFillEmptyRows=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])}function sparseFillEmptyRows(e){var t,a=e.backend,n=e.inputs,r=n.indices,i=n.values,s=n.denseShape,u=n.defaultValue,o=r.shape[0],p=r.shape[1],d=a.readSync(s.dataId)[0],l=[o+d,p],c=a.dataIdMap.get(r.dataId).id,m=a.dataIdMap.get(i.dataId).id,f=a.dataIdMap.get(u.dataId).id,h=a.makeOutput(l,r.dtype),g=a.dataIdMap.get(h.dataId).id,b=a.makeOutput(l.slice(0,1),i.dtype),y=a.dataIdMap.get(b.dataId).id,_=a.makeOutput([d],"bool"),C=a.dataIdMap.get(_.dataId).id,w=a.makeOutput([o],r.dtype),v=a.dataIdMap.get(w.dataId).id,k=a.makeOutput([4],"int32"),I=a.dataIdMap.get(k.dataId).id,S=wasmSparseFillEmptyRows(c,m,CppDType[i.dtype],o,d,p,f,g,y,C,v,I),M=a.readSync(k.dataId);switch(M[0]){case 1:t=tfjsCore.backend_util.getSparseFillEmptyRowsIndicesDenseShapeMismatch(M[1]);break;case 2:t=tfjsCore.backend_util.getSparseFillEmptyRowsNegativeIndexErrorMessage(M[1],M[2]);break;case 3:t=tfjsCore.backend_util.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(M[1],M[2],M[3]);break;default:t=""}if(a.disposeData(k.dataId),t)throw a.disposeData(h.dataId),a.disposeData(b.dataId),a.disposeData(_.dataId),a.disposeData(w.dataId),new Error(t);var A=h,D=b;return S!==l[0]&&(A=slice({inputs:{x:h},attrs:{begin:0,size:[S,p]},backend:a}),D=slice({inputs:{x:b},attrs:{begin:0,size:S},backend:a}),a.disposeData(h.dataId),a.disposeData(b.dataId)),[A,D,_,w]}var wasmSparseReshape,sparseFillEmptyRowsConfig={kernelName:tfjsCore.SparseFillEmptyRows,backendName:"wasm",setupFunc:setup$a,kernelFunc:sparseFillEmptyRows};function setup$9(e){wasmSparseReshape=e.wasm.cwrap(tfjsCore.SparseReshape,null,["number","number","number","number","number","number","number"])}function sparseReshape(e){var t=e.backend,a=e.inputs,n=a.inputIndices,r=a.inputShape,i=a.newShape;if(2!==n.shape.length)throw new Error("Input indices should be a matrix but received shape\n        ".concat(n.shape));if(1!==r.shape.length)throw new Error("Input shape should be a vector but received shape\n        ".concat(r.shape));if(1!==i.shape.length)throw new Error("Target shape should be a vector but received shape ".concat(i.shape));var s=t.dataIdMap.get(n.dataId).id,u=t.dataIdMap.get(r.dataId).id,o=t.dataIdMap.get(i.dataId).id,p=n.shape[0],d=tfjsCore.util.sizeFromShape(i.shape),l=t.makeOutput([p,d],n.dtype),c=t.dataIdMap.get(l.dataId).id,m=t.makeOutput([d],i.dtype),f=t.dataIdMap.get(m.dataId).id,h=t.makeOutput([3],"int32"),g=t.dataIdMap.get(h.dataId).id;wasmSparseReshape(s,u,o,p,c,f,g);var b,y=t.readSync(h.dataId);switch(y[0]){case 0:b=tfjsCore.backend_util.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(y[1],y[2]);break;case 1:b=tfjsCore.backend_util.getSparseReshapeNegativeOutputDimErrorMessage(y[1],y[2]);break;case 2:b=tfjsCore.backend_util.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:var _=Array.from(t.readSync(r.dataId)),C=Array.from(t.readSync(m.dataId));b=tfjsCore.backend_util.getSparseReshapeInputOutputMultipleErrorMessage(_,C);break;case 4:_=Array.from(t.readSync(r.dataId)),C=Array.from(t.readSync(m.dataId)),b=tfjsCore.backend_util.getSparseReshapeInputOutputMismatchErrorMessage(_,C);break;default:b=""}if(t.disposeData(h.dataId),b)throw t.disposeData(l.dataId),t.disposeData(m.dataId),new Error(b);return[l,m]}var wasmSparseSegmentReduction,sparseReshapeConfig={kernelName:tfjsCore.SparseReshape,backendName:"wasm",setupFunc:setup$9,kernelFunc:sparseReshape};function setup$8(e){wasmSparseSegmentReduction=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function sparseSegmentReduction(e,t){var a=e.backend,n=e.inputs,r=n.data,i=n.indices,s=n.segmentIds,u=i.shape[0],o=a.readSync(s.dataId,u-1,u)[0],p=u>0?o+1:0;if(p<0)throw new Error(tfjsCore.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());var d=r.shape.slice();d[0]=p;var l=a.dataIdMap.get(r.dataId).id,c=a.dataIdMap.get(i.dataId).id,m=a.dataIdMap.get(s.dataId).id,f=a.makeOutput(d,r.dtype),h=a.dataIdMap.get(f.dataId).id,g=a.makeOutput([4],"int32"),b=a.dataIdMap.get(g.dataId).id;wasmSparseSegmentReduction(l,CppDType[r.dtype],r.shape[0],c,m,h,b,t,0);var y,_=a.readSync(g.dataId);switch(_[0]){case 0:y=tfjsCore.backend_util.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:y=tfjsCore.backend_util.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:y=tfjsCore.backend_util.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(_[1],_[2]);break;case 3:y=tfjsCore.backend_util.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_[1],_[2],_[3]);break;default:y=""}if(a.disposeData(g.dataId),y)throw a.disposeData(f.dataId),new Error(y);return f}function sparseSegmentMean(e){return sparseSegmentReduction(e,!0)}var sparseSegmentMeanConfig={kernelName:tfjsCore.SparseSegmentMean,backendName:"wasm",setupFunc:setup$8,kernelFunc:sparseSegmentMean};function sparseSegmentSum(e){return sparseSegmentReduction(e,!1)}var wasmSparseToDense,sparseSegmentSumConfig={kernelName:tfjsCore.SparseSegmentSum,backendName:"wasm",setupFunc:setup$8,kernelFunc:sparseSegmentSum};function setup$7(e){wasmSparseToDense=e.wasm.cwrap(tfjsCore.SparseToDense,null,["number","number","number","number","number","number","number","number","array","number","number"])}function sparseToDense(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.sparseIndices,i=a.sparseValues,s=a.defaultValue,u=n.outputShape,o=t.makeOutput(u,s.dtype);if(0===tfjsCore.util.sizeFromShape(u))return o;var p=tfjsCore.backend_util.calculateShapes(i,r,u),d=p.sliceRank,l=p.numUpdates,c=p.sliceSize,m=p.strides,f=p.outputSize,h=t.dataIdMap.get(r.dataId).id,g=t.dataIdMap.get(i.dataId).id,b=t.dataIdMap.get(s.dataId).id,y=new Uint8Array(new Int32Array(m).buffer),_=t.dataIdMap.get(o.dataId).id;return wasmSparseToDense(h,g,i.shape.length,b,CppDType[s.dtype],d,l,c,y,f,_),o}var sparseToDenseConfig={kernelName:tfjsCore.SparseToDense,backendName:"wasm",setupFunc:setup$7,kernelFunc:sparseToDense};function splitV(e){var t=e.inputs,a=e.attrs,n=e.backend,r=t.x,i=a.numOrSizeSplits,s=a.axis,u=tfjsCore.util.parseAxisParam(s,r.shape)[0],o=tfjsCore.backend_util.prepareSplitSize(r,i,u),p=new Array(r.shape.length).fill(0),d=r.shape.slice();return o.map((function(e){var t=__spreadArray([],__read(d),!1);t[u]=e;var a=slice({inputs:{x:r},attrs:{begin:p,size:t},backend:n});return p[u]+=e,a}))}var wasmStep,splitVConfig={kernelName:tfjsCore.SplitV,backendName:"wasm",kernelFunc:splitV},sqrtConfig=createUnaryKernelConfig(tfjsCore.Sqrt),squareConfig=createUnaryKernelConfig(tfjsCore.Square),squaredDifferenceConfig=createBinaryKernelConfig(tfjsCore.SquaredDifference);function setup$6(e){wasmStep=e.wasm.cwrap(tfjsCore.Step,null,["number","number","number","number"])}function step(e){var t=e.backend,a=e.inputs,n=e.attrs.alpha,r=a.x,i=t.dataIdMap.get(r.dataId).id,s=t.makeOutput(r.shape,r.dtype),u=t.dataIdMap.get(s.dataId).id;return wasmStep(i,n,CppDType[r.dtype],u),s}var wasmStridedSlice,stepConfig={kernelName:tfjsCore.Step,backendName:"wasm",setupFunc:setup$6,kernelFunc:step};function setup$5(e){wasmStridedSlice=e.wasm.cwrap(tfjsCore.StridedSlice,null,["number","array","number","array","array","array","array","array","number","number"])}function stridedSlice(e){var t,a=e.backend,n=e.inputs,r=e.attrs,i=n.x,s=r.begin,u=r.end,o=r.strides,p=r.beginMask,d=r.endMask,l=r.ellipsisMask,c=r.newAxisMask,m=r.shrinkAxisMask,f=tfjsCore.slice_util.sliceInfo(i.shape,s,u,o,p,d,l,c,m),h=f.finalShapeSparse,g=f.finalShape,b=f.isIdentity,y=f.sliceDim0,_=f.isSimpleSlice,C=f.begin,w=f.end,v=f.strides;if(b)t=reshape({inputs:{x:i},backend:a,attrs:{shape:g}});else if(y||_){tfjsCore.util.assert(i.shape.length>=1,(function(){return"Input must have rank at least 1, got: ".concat(i.shape.length)}));var k=tfjsCore.slice_util.computeOutShape(C,w,v),I=slice({inputs:{x:i},backend:a,attrs:{begin:C,size:k}});t=reshape({inputs:{x:I},backend:a,attrs:{shape:g}}),a.disposeData(I.dataId)}else{var S=a.makeOutput(h,"float32"),M=a.dataIdMap.get(i.dataId).id,A=new Uint8Array(new Int32Array(tfjsCore.util.computeStrides(i.shape)).buffer),D=new Uint8Array(new Int32Array(C).buffer),j=new Uint8Array(new Int32Array(w).buffer),x=new Uint8Array(new Int32Array(v).buffer),F=new Uint8Array(new Int32Array(h).buffer),N=new Uint8Array(new Int32Array(tfjsCore.util.computeStrides(h)).buffer),R=a.dataIdMap.get(S.dataId).id;wasmStridedSlice(M,A,i.shape.length,D,j,x,F,N,h.length,R),t=reshape({inputs:{x:S},backend:a,attrs:{shape:g}}),a.disposeData(S.dataId)}return t}var stridedSliceConfig={kernelName:tfjsCore.StridedSlice,backendName:"wasm",setupFunc:setup$5,kernelFunc:stridedSlice};function stringNGrams(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.data,i=a.dataSplits,s=n.separator,u=n.nGramWidths,o=n.leftPad,p=n.rightPad,d=n.padWidth,l=n.preserveShortSequences,c=__read(stringNGramsImpl(t.readSync(r.dataId),t.readSync(i.dataId),s,u,o,p,d,l),2),m=c[0],f=c[1],h=t.makeOutput([m.length],"string");t.dataIdMap.get(h.dataId).stringBytes=m;var g=t.makeOutput(i.shape,"int32");return t.typedArrayFromHeap(g).set(f),[h,g]}var stringNGramsConfig={kernelName:tfjsCore.StringNGrams,backendName:"wasm",kernelFunc:stringNGrams};function stringSplit(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.input,i=a.delimiter,s=n.skipEmpty,u=__read(stringSplitImpl(t.readSync(r.dataId),t.readSync(i.dataId)[0],s),3),o=u[0],p=u[1],d=u[2],l=p.length,c=t.makeOutput([l,2],"int32");t.typedArrayFromHeap(c).set(o);var m=t.makeOutput([l],"string");t.dataIdMap.get(m.dataId).stringBytes=p;var f=t.makeOutput([2],"int32");return t.typedArrayFromHeap(f).set(d),[c,m,f]}var stringSplitConfig={kernelName:tfjsCore.StringSplit,backendName:"wasm",kernelFunc:stringSplit};function stringToHashBucketFast(e){var t=e.backend,a=e.inputs,n=e.attrs,r=a.input,i=n.numBuckets,s=stringToHashBucketFastImpl(t.readSync(r.dataId),i),u=t.makeOutput(r.shape,"int32");return t.typedArrayFromHeap(u).set(s),u}var wasmSum,stringToHashBucketFastConfig={kernelName:tfjsCore.StringToHashBucketFast,backendName:"wasm",kernelFunc:stringToHashBucketFast},subConfig=createBinaryKernelConfig(tfjsCore.Sub);function setup$4(e){wasmSum=e.wasm.cwrap(tfjsCore.Sum,null,["number","number","number","number"])}function sum(e){var t=e.backend,a=e.inputs,n=e.attrs,r=n.axis,i=n.keepDims,s=a.x,u=t.dataIdMap.get(s.dataId).id,o=u,p=s,d=permuteAxesAndTranspose(s,r,t),l=d.transposed,c=d.axes,m=d.originalAxes,f=d.inputWasTransposed,h=c;if(f){var g=t.dataIdMap.get(l.dataId).id;g!==u&&(p=l,o=g,h=tfjsCore.backend_util.getInnerMostAxes(h.length,p.shape.length))}tfjsCore.backend_util.assertAxesAreInnerMostDims("sum",h,p.shape.length);var b=__read(tfjsCore.backend_util.computeOutAndReduceShapes(p.shape,h),2),y=b[0],_=b[1],C=tfjsCore.util.sizeFromShape(_),w=t.makeOutput(y,p.dtype);if(0!==tfjsCore.util.sizeFromShape(p.shape)){var v=t.dataIdMap.get(w.dataId).id;wasmSum(o,C,CppDType[w.dtype],v)}if(f&&t.disposeData(l.dataId),i){var k=tfjsCore.backend_util.expandShapeToKeepDim(w.shape,m);w.shape=k}return w}var wasmTensorScatterUpdate,sumConfig={kernelName:tfjsCore.Sum,backendName:"wasm",setupFunc:setup$4,kernelFunc:sum},tanConfig=createUnaryKernelConfig(tfjsCore.Tan),tanhConfig=createUnaryKernelConfig(tfjsCore.Tanh);function setup$3(e){wasmTensorScatterUpdate=e.wasm.cwrap(tfjsCore.TensorScatterUpdate,null,["number","number","number","number","number","number","array","number","number","number"])}function tensorScatterUpdate(e){var t=e.backend,a=e.inputs;e.attrs;var n=a.tensor,r=a.indices,i=a.updates,s=t.makeOutput(n.shape,n.dtype);if(0===tfjsCore.util.sizeFromShape(n.shape))return s;var u=tfjsCore.scatter_util.calculateShapes(i,r,n.shape),o=u.sliceRank,p=u.numUpdates,d=u.sliceSize,l=u.strides,c=u.outputSize,m=t.dataIdMap.get(r.dataId).id,f=t.dataIdMap.get(i.dataId).id,h=t.dataIdMap.get(n.dataId).id,g=new Uint8Array(new Int32Array(l).buffer),b=t.dataIdMap.get(s.dataId).id;return wasmTensorScatterUpdate(m,f,CppDType[i.dtype],o,p,d,g,c,b,h),s}var wasmTile,tensorScatterUpdateConfig={kernelName:tfjsCore.TensorScatterUpdate,backendName:"wasm",setupFunc:setup$3,kernelFunc:tensorScatterUpdate};function setup$2(e){wasmTile=e.wasm.cwrap(tfjsCore.Tile,null,["number","array","number","array","number","number"])}function tile(e){for(var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=a.dataIdMap.get(r.dataId).id,s=n.reps,u=new Array(r.shape.length),o=0;o<u.length;o++)u[o]=r.shape[o]*s[o];var p=new Uint8Array(new Int32Array(r.shape).buffer),d=new Uint8Array(new Int32Array(u).buffer),l=a.makeOutput(u,r.dtype),c=a.dataIdMap.get(l.dataId).id;return wasmTile(i,p,r.shape.length,d,u.length,CppDType[l.dtype],c),l}var wasmTopK,tileConfig={kernelName:tfjsCore.Tile,backendName:"wasm",setupFunc:setup$2,kernelFunc:tile};function setup$1(e){wasmTopK=e.wasm.cwrap(tfjsCore.TopK,null,["number","array","number","number","number","bool","number","number"])}var wasmTransform,topk=function(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.x,i=n.k,s=n.sorted,u=a.dataIdMap.get(r.dataId).id,o=new Uint8Array(new Int32Array(r.shape).buffer),p=r.shape.slice();p[p.length-1]=i;var d=a.makeOutput(p,r.dtype),l=a.dataIdMap.get(d.dataId).id,c=a.makeOutput(p,"int32"),m=a.dataIdMap.get(c.dataId).id;return wasmTopK(u,o,r.shape.length,CppDType[r.dtype],i,s,l,m),[d,c]},topKConfig={kernelName:tfjsCore.TopK,backendName:"wasm",setupFunc:setup$1,kernelFunc:topk};function setup(e){wasmTransform=e.wasm.cwrap(tfjsCore.Transform,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])}function transform(e){var t,a=e.backend,n=e.inputs,r=e.attrs,i=n.image,s=n.transforms,u=r.interpolation,o=r.fillMode,p=r.fillValue,d=r.outputShape,l=__read(i.shape,4),c=l[0],m=l[1],f=l[2],h=l[3],g=__read(null!=d?d:[m,f],2),b=g[0],y=g[1],_=[c,b,y,h],C=new Uint8Array(new Int32Array(tfjsCore.util.computeStrides(i.shape)).buffer),w=new Uint8Array(new Int32Array(tfjsCore.util.computeStrides(_)).buffer),v=a.makeOutput(_,i.dtype),k=a.dataIdMap.get(v.dataId).id,I=a.dataIdMap.get(i.dataId).id,S=a.dataIdMap.get(s.dataId).id,M="nearest"===u?1:2;switch(o){case"constant":default:t=1;break;case"reflect":t=2;break;case"wrap":t=3;break;case"nearest":t=4}return wasmTransform(I,S,s.shape[0]>1,c,b,y,h,f,m,C,i.shape.length-1,w,_.length-1,M,t,p,k),v}var transformConfig={kernelName:tfjsCore.Transform,backendName:"wasm",setupFunc:setup,kernelFunc:transform};function unique(e){var t=e.inputs,a=e.attrs,n=e.backend,r=a.axis,i=t.x,s=uniqueImpl(n.readSync(i.dataId),r,i.shape,i.dtype),u=s.outputValues,o=s.outputShape,p=s.indices;return[n.makeOutput(o,i.dtype,void 0,u),n.makeOutput([p.length],"int32",void 0,p)]}var uniqueConfig={kernelName:tfjsCore.Unique,backendName:"wasm",kernelFunc:unique};function unpack(e){var t=e.inputs,a=e.backend,n=e.attrs,r=t.value,i=n.axis;i<0&&(i+=r.shape.length);for(var s=r.shape[i],u=r.shape.length,o=new Array(u-1),p=0,d=0;d<u;d++)d!==i&&(o[p++]=r.shape[d]);var l=new Array(s),c=new Array(u).fill(0),m=r.shape.slice();for(m[i]=1,d=0;d<l.length;d++)c[i]=d,l[d]=slice({inputs:{x:r},attrs:{begin:c,size:m},backend:a});return l.map((function(e){return{dataId:e.dataId,dtype:e.dtype,shape:o}}))}var unpackConfig={kernelName:tfjsCore.Unpack,backendName:"wasm",kernelFunc:unpack};function zerosLike(e){var t=e.inputs.x,a=e.backend,n=a.makeOutput(t.shape,t.dtype);return a.typedArrayFromHeap(n).fill(0),n}var e_1,_a,zerosLikeConfig={kernelName:tfjsCore.ZerosLike,backendName:"wasm",kernelFunc:zerosLike},kernelConfigs=[_fusedMatMulConfig,absConfig,acosConfig,acoshConfig,addConfig,addNConfig,allConfig,anyConfig,argMaxConfig,argMinConfig,asinConfig,asinhConfig,atanConfig,atan2Config,atanhConfig,avgPoolConfig,avgPoolGradConfig,avgPool3DConfig,avgPool3DGradConfig,batchMatMulConfig,batchToSpaceNDConfig,bincountConfig,bitwiseAndConfig,broadcastArgsConfig,castConfig,ceilConfig,clipByValueConfig,concatConfig,conv2DConfig,conv2DBackpropInputConfig,conv3DConfig,conv3DBackpropFilterV2Config,conv3DBackpropInputV2Config,cosConfig,coshConfig,cropAndResizeConfig,cumprodConfig,cumsumConfig,denseBincountConfig,depthToSpaceConfig,depthwiseConv2dNativeConfig,diagConfig,dilation2DConfig,dilation2DBackpropFilterConfig,dilation2DBackpropInputConfig,eluConfig,eluGradConfig,equalConfig,erfConfig,expConfig,expandDimsConfig,expm1Config,fillConfig,flipLeftRightConfig,floorConfig,floorDivConfig,fusedBatchNormConfig,fusedConv2DConfig,fusedDepthwiseConv2DConfig,gatherNdConfig,gatherV2Config,greaterConfig,greaterEqualConfig,identityConfig,isFiniteConfig,isInfConfig,isNaNConfig,leakyReluConfig,lessConfig,lessEqualConfig,linSpaceConfig,log1pConfig,logConfig,logicalAndConfig,logicalNotConfig,logicalOrConfig,logicalXorConfig,lrnConfig,lrnGradConfig,maxConfig,maximumConfig,maxPoolConfig,maxPool3DConfig,maxPool3DGradConfig,maxPoolGradConfig,maxPoolWithArgmaxConfig,meanConfig,minConfig,minimumConfig,mirrorPadConfig,multinomialConfig,modConfig,multiplyConfig,negConfig,nonMaxSuppressionV3Config,nonMaxSuppressionV4Config,nonMaxSuppressionV5Config,notEqualConfig,oneHotConfig,onesLikeConfig,packConfig,padV2Config,powConfig,preluConfig,prodConfig,rangeConfig,realDivConfig,reciprocalConfig,reluConfig,relu6Config,reshapeConfig,resizeBilinearConfig,resizeBilinearGradConfig,resizeNearestNeighborConfig,resizeNearestNeighborGradConfig,reverseConfig,rotateWithOffsetConfig,roundConfig,rsqrtConfig,scatterNdConfig,searchSortedConfig,selectConfig,seluConfig,sigmoidConfig,signConfig,sinConfig,sinhConfig,sliceConfig,softmaxConfig,softplusConfig,spaceToBatchNDConfig,sparseFillEmptyRowsConfig,sparseReshapeConfig,sparseSegmentMeanConfig,sparseSegmentSumConfig,sparseToDenseConfig,splitVConfig,sqrtConfig,squareConfig,squaredDifferenceConfig,stepConfig,stridedSliceConfig,stringNGramsConfig,stringSplitConfig,stringToHashBucketFastConfig,subConfig,sumConfig,tanConfig,tanhConfig,tensorScatterUpdateConfig,tileConfig,topKConfig,transformConfig,transposeConfig,uniqueConfig,unpackConfig,zerosLikeConfig];try{for(var kernelConfigs_1=__values(kernelConfigs),kernelConfigs_1_1=kernelConfigs_1.next();!kernelConfigs_1_1.done;kernelConfigs_1_1=kernelConfigs_1.next()){var kernelConfig=kernelConfigs_1_1.value;tfjsCore.registerKernel(kernelConfig)}}catch(e){e_1={error:e}}finally{try{kernelConfigs_1_1&&!kernelConfigs_1_1.done&&(_a=kernelConfigs_1.return)&&_a.call(kernelConfigs_1)}finally{if(e_1)throw e_1.error}}var ENV=tfjsCore.env();ENV.registerFlag("WASM_HAS_SIMD_SUPPORT",(function(){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(e){try{return[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))]}catch(e){return[2,!1]}return[2]}))}))})),ENV.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",(function(){return __awaiter(void 0,void 0,void 0,(function(){return __generator(this,(function(e){if(ENV.get("IS_NODE"))return[2,!1];try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))]}catch(e){return[2,!1]}return[2]}))}))}));var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tfjsBackendWasmThreadedSimd$1={exports:{}};!function(e){var t,a=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(t=t||__filename),function(e){function a(){return x.buffer!=P&&H(x.buffer),T}function n(){return x.buffer!=P&&H(x.buffer),B}function r(){return x.buffer!=P&&H(x.buffer),E}function i(){return x.buffer!=P&&H(x.buffer),W}function s(){return x.buffer!=P&&H(x.buffer),O}var u,o,p,d=void 0!==(e=e||{})?e:{};d.ready=new Promise((function(e,t){u=e,o=t})),"undefined"!=typeof process&&process.listeners&&(p={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var l,c,m,f=Object.assign({},d),h=function(e,t){throw t},g="object"==typeof window,b="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,_=d.ENVIRONMENT_IS_PTHREAD||!1,C="";function w(e){return d.locateFile?d.locateFile(e,C):C+e}if(y){var v=require$$0,k=require$$1;C=b?k.dirname(C)+"/":__dirname+"/",l=function(e,t){return e=ae(e)?new URL(e):k.normalize(e),v.readFileSync(e,t?void 0:"utf8")},m=function(e){var t=l(e,!0);return t.buffer||(t=new Uint8Array(t)),t},c=function(e,t,a){e=ae(e)?new URL(e):k.normalize(e),v.readFile(e,(function(e,n){e?a(e):t(n.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ie))throw e})),process.on("unhandledRejection",(function(e){throw e})),h=function(e,t){if(X())throw process.exitCode=e,t;var a;(a=t)instanceof ie||j("exiting due to exception: "+a),process.exit(e)},d.inspect=function(){return"[Emscripten Module object]"};var I=void 0;try{I=require("worker_threads")}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}commonjsGlobal.Worker=I.Worker}else(g||b)&&(b?C=self.location.href:"undefined"!=typeof document&&document.currentScript&&(C=document.currentScript.src),void 0!==t&&t&&(C=t),C=0!==C.indexOf("blob:")?C.substr(0,C.replace(/[?#].*/,"").lastIndexOf("/")+1):"",y||(l=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},b&&(m=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),c=function(e,t,a){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):a()},n.onerror=a,n.send(null)}));y&&"undefined"==typeof performance&&(commonjsGlobal.performance=require$$3.performance);var S=console.log.bind(console),M=console.warn.bind(console);y&&(S=function(e){return v.writeSync(1,e+"\n")},M=function(e){return v.writeSync(2,e+"\n")});var A,D=d.print||S,j=d.printErr||M;Object.assign(d,f),f=null,d.arguments&&d.arguments,d.thisProgram&&d.thisProgram,d.quit&&(h=d.quit),d.wasmBinary&&(A=d.wasmBinary);var x,F,N=d.noExitRuntime||!0;"object"!=typeof WebAssembly&&Z("no native wasm support detected");var R,P,T,B,E,W,O,z=!1,$="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function G(e,t,a){for(var n=(t>>>=0)+a,r=t;e[r]&&!(r>=n);)++r;if(r-t>16&&e.buffer&&$)return $.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,r):e.subarray(t,r));for(var i="";t<r;){var s=e[t++];if(128&s){var u=63&e[t++];if(192!=(224&s)){var o=63&e[t++];if((s=224==(240&s)?(15&s)<<12|u<<6|o:(7&s)<<18|u<<12|o<<6|63&e[t++])<65536)i+=String.fromCharCode(s);else{var p=s-65536;i+=String.fromCharCode(55296|p>>10,56320|1023&p)}}else i+=String.fromCharCode((31&s)<<6|u)}else i+=String.fromCharCode(s)}return i}function H(e){P=e,d.HEAP8=T=new Int8Array(e),d.HEAP16=new Int16Array(e),d.HEAP32=E=new Int32Array(e),d.HEAPU8=B=new Uint8Array(e),d.HEAPU16=new Uint16Array(e),d.HEAPU32=W=new Uint32Array(e),d.HEAPF32=new Float32Array(e),d.HEAPF64=O=new Float64Array(e)}_&&(P=d.buffer);var L,U=d.INITIAL_MEMORY||16777216;if(_)x=d.wasmMemory,P=d.buffer;else if(d.wasmMemory)x=d.wasmMemory;else if(!((x=new WebAssembly.Memory({initial:U/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw j("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&j("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");x&&(P=x.buffer),U=P.byteLength,H(P);var V=[],q=[],K=[];function X(){return N}function Q(){_||le(q)}var J=0,Y=null;function Z(e){d.onAbort&&d.onAbort(e),j(e="Aborted("+e+")"),z=!0,R=1,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw o(t),t}var ee;function te(e){return e.startsWith("data:application/octet-stream;base64,")}function ae(e){return e.startsWith("file://")}function ne(e){try{if(e==ee&&A)return new Uint8Array(A);if(m)return m(e);throw"both async and sync fetching of the wasm failed"}catch(e){Z(e)}}te(ee="tfjs-backend-wasm-threaded-simd.wasm")||(ee=w(ee));var re={};function ie(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function se(e){var t=de.pthreads[e];t||Z(undefined),de.returnWorkerToPool(t)}function ue(e){var t=de.getNewWorker();if(!t)return 6;de.runningWorkers.push(t),de.pthreads[e.pthread_ptr]=t,t.pthread_ptr=e.pthread_ptr;var a={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return t.runPthread=function(){y&&t.ref(),t.postMessage(a,e.transferList),delete t.runPthread},t.loaded&&t.runPthread(),0}function oe(e){if(_)return _e(1,1,e);R=e,X()||(de.terminateAllThreads(),d.onExit&&d.onExit(e),z=!0),h(e,new ie(e))}var pe=function(e,t){if(R=e,!t&&_)throw ce(e),"unwind";oe(e)},de={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){_?de.initWorker():de.initMainThread()},initMainThread:function(){for(var e=8;e--;)de.allocateUnusedWorker()},initWorker:function(){N=!1},setExitStatus:function(e){R=e},terminateAllThreads:function(){var e,t,a,n;try{for(var r=__values(Object.values(de.pthreads)),i=r.next();!i.done;i=r.next()){var s=i.value;de.returnWorkerToPool(s)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}try{for(var u=__values(de.unusedWorkers),o=u.next();!o.done;o=u.next())(s=o.value).terminate()}catch(e){a={error:e}}finally{try{o&&!o.done&&(n=u.return)&&n.call(u)}finally{if(a)throw a.error}}de.unusedWorkers=[]},returnWorkerToPool:function(e){var t=e.pthread_ptr;delete de.pthreads[t],de.unusedWorkers.push(e),de.runningWorkers.splice(de.runningWorkers.indexOf(e),1),e.pthread_ptr=0,y&&e.unref(),We(t)},receiveObjectTransfer:function(e){},threadInitTLS:function(){de.tlsInitFunctions.forEach((function(e){return e()}))},loadWasmModuleToWorker:function(e,a){var n,r;e.onmessage=function(t){var n,r=t.data,i=r.cmd;if(e.pthread_ptr&&(de.currentProxiedOperationCallerThread=e.pthread_ptr),r.targetThread&&r.targetThread!=Fe()){var s=de.pthreads[r.targetThread];return s?s.postMessage(r,r.transferList):j('Internal error! Worker sent a message "'+i+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(de.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===i?be(r.queue):"spawnThread"===i?ue(r):"cleanupThread"===i?se(r.thread):"killThread"===i?function(e){var t=de.pthreads[e];delete de.pthreads[e],t.terminate(),We(e),de.runningWorkers.splice(de.runningWorkers.indexOf(t),1),t.pthread_ptr=0}(r.thread):"cancelThread"===i?(n=r.thread,de.pthreads[n].postMessage({cmd:"cancel"})):"loaded"===i?(e.loaded=!0,y&&e.unref(),a&&a(e),e.runPthread&&e.runPthread()):"print"===i?D("Thread "+r.threadId+": "+r.text):"printErr"===i?j("Thread "+r.threadId+": "+r.text):"alert"===i?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===i?d[r.handler].apply(d,__spreadArray([],__read(r.args),!1)):i&&j("worker sent an unknown command "+i),de.currentProxiedOperationCallerThread=void 0},e.onerror=function(e){throw j("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},y&&(e.on("message",(function(t){e.onmessage({data:t})})),e.on("error",(function(t){e.onerror(t)})),e.on("detachedExit",(function(){})));var i=[];try{for(var s=__values(["onExit","onAbort","print","printErr"]),u=s.next();!u.done;u=s.next()){var o=u.value;d.hasOwnProperty(o)&&i.push(o)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}e.postMessage({cmd:"load",handlers:i,urlOrBlob:d.mainScriptUrlOrBlob||t,wasmMemory:x,wasmModule:F})},allocateUnusedWorker:function(){var e,t=w("tfjs-backend-wasm-threaded-simd.worker.js");e=new Worker(t),de.unusedWorkers.push(e)},getNewWorker:function(){return 0==de.unusedWorkers.length&&(de.allocateUnusedWorker(),de.loadWasmModuleToWorker(de.unusedWorkers[0])),de.unusedWorkers.pop()}};function le(e){for(;e.length>0;)e.shift()(d)}function ce(e){if(_)return _e(2,0,e);try{pe(e)}catch(e){!function(e){if(e instanceof ie||"unwind"==e)return R;h(1,e)}(e)}}d.PThread=de,d.establishStackSpace=function(){var e=Fe(),t=r()[e+52>>>2],a=r()[e+56>>>2];ze(t,t-a),Ge(t)};var me,fe=[];function he(e,t,a,n){return _?_e(3,1,e,t,a,n):ge(e,t,a,n)}function ge(e,t,a,n){if("undefined"==typeof SharedArrayBuffer)return j("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var r=[];if(_&&0===r.length)return he(e,t,a,n);var i={startRoutine:a,pthread_ptr:e,arg:n,transferList:r};return _?(i.cmd="spawnThread",postMessage(i,r),0):ue(i)}function be(e){Atomics.store(r(),e>>2,1),Fe()&&Ee(e),Atomics.compareExchange(r(),e>>2,1,0)}function ye(e){ye.shown||(ye.shown={}),ye.shown[e]||(ye.shown[e]=1,y&&(e="warning: "+e),j(e))}function _e(e,t){var a,n,r,i=arguments.length-2,u=arguments;return a=function(){for(var a=i,n=He(8*a),r=n>>3,o=0;o<i;o++){var p=u[2+o];s()[r+o>>>0]=p}return Re(e,a,n,t)},n=$e(),r=a(),Ge(n),r}d.invokeEntryPoint=function(e,t){var a,n,r=((n=fe[a=e])||(a>=fe.length&&(fe.length=a+1),fe[a]=n=L.get(a)),n)(t);X()?de.setExitStatus(r):Oe(r)},d.executeNotifiedProxyingQueue=be,me=y?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:function(){return performance.timeOrigin+performance.now()};var Ce=[];function we(e){try{return x.grow(e-P.byteLength+65535>>>16),H(x.buffer),1}catch(e){}}function ve(e){return _?_e(4,1,e):52}function ke(e,t,a,n,r){return _?_e(5,1,e,t,a,n,r):70}var Ie=[null,[],[]];function Se(e,t){var a=Ie[e];0===t||10===t?((1===e?D:j)(G(a,0)),a.length=0):a.push(t)}function Me(e,t,a,r){if(_)return _e(6,1,e,t,a,r);for(var s=0,u=0;u<a;u++){var o=i()[t>>>2],p=i()[t+4>>>2];t+=8;for(var d=0;d<p;d++)Se(e,n()[o+d>>>0]);s+=p}return i()[r>>>2]=s,0}function Ae(e){return d["_"+e]}function De(e,t,r,i,s){var u={string:function(e){var t=0;if(null!=e&&0!==e){var a=1+(e.length<<2);!function(e,t,a){!function(e,t,a,n){if(!(n>0))return 0;for(var r=(a>>>=0)+n-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(a>=r)break;t[a++>>>0]=s}else if(s<=2047){if(a+1>=r)break;t[a++>>>0]=192|s>>6,t[a++>>>0]=128|63&s}else if(s<=65535){if(a+2>=r)break;t[a++>>>0]=224|s>>12,t[a++>>>0]=128|s>>6&63,t[a++>>>0]=128|63&s}else{if(a+3>=r)break;t[a++>>>0]=240|s>>18,t[a++>>>0]=128|s>>12&63,t[a++>>>0]=128|s>>6&63,t[a++>>>0]=128|63&s}}t[a>>>0]=0}(e,n(),t,a)}(e,t=He(a),a)}return t},array:function(e){var t=He(e.length);return function(e,t){a().set(e,t>>>0)}(e,t),t}};var o=Ae(e),p=[],d=0;if(i)for(var l=0;l<i.length;l++){var c=u[r[l]];c?(0===d&&(d=$e()),p[l]=c(i[l])):p[l]=i[l]}var m=o.apply(null,p);return function(e){return 0!==d&&Ge(d),function(e){return"string"===t?(a=e,(a>>>=0)?G(n(),a,void 0):""):"boolean"===t?Boolean(e):e;var a}(e)}(m)}de.init();var je=[null,oe,ce,he,ve,ke,Me],xe={__emscripten_init_main_thread_js:function(e){Ne(e,!b,1,!g),de.threadInitTLS()},__emscripten_thread_cleanup:function(e){_?postMessage({cmd:"cleanupThread",thread:e}):se(e)},__pthread_create_js:ge,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return!0},_emscripten_notify_task_queue:function(e,t,a,n){if(e==t)setTimeout((function(){return be(n)}));else if(_)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:n});else{var r=de.pthreads[e];if(!r)return;r.postMessage({cmd:"processProxyingQueue",queue:n})}return 1},_emscripten_set_offscreencanvas_size:function(e,t,a){return-1},abort:function(){Z("")},emscripten_check_blocking_allowed:function(){y||b||ye("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 4294901760},emscripten_get_now:me,emscripten_memcpy_big:function(e,t,a){n().copyWithin(e>>>0,t>>>0,t+a>>>0)},emscripten_num_logical_cores:function(){return y?require$$4.cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,t,a){Ce.length=t;for(var n=a>>3,r=0;r<t;r++)Ce[r]=s()[n+r>>>0];return(e<0?re[-e-1]:je[e]).apply(null,Ce)},emscripten_resize_heap:function(e){var t=n().length;if((e>>>=0)<=t)return!1;var a=4294901760;if(e>a)return!1;for(var r,i=1;i<=4;i*=2){var s=t*(1+.2/i);if(s=Math.min(s,e+100663296),we(Math.min(a,(r=Math.max(e,s))+(65536-r%65536)%65536)))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:pe,fd_close:ve,fd_seek:ke,fd_write:Me,memory:x||d.wasmMemory};!function(){var e={env:xe,wasi_snapshot_preview1:xe};function t(e,t){var a,n,r=e.exports;if(d.asm=r,a=d.asm._emscripten_tls_init,de.tlsInitFunctions.push(a),L=d.asm.__indirect_function_table,n=d.asm.__wasm_call_ctors,q.unshift(n),F=t,!_){var i=de.unusedWorkers.length;de.unusedWorkers.forEach((function(e){de.loadWasmModuleToWorker(e,(function(){--i||function(){if(J--,d.monitorRunDependencies&&d.monitorRunDependencies(J),0==J&&Y){var e=Y;Y=null,e()}}()}))}))}}function a(e){t(e.instance,e.module)}function n(t){return function(){if(!A&&(g||b)){if("function"==typeof fetch&&!ae(ee))return fetch(ee,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ee+"'";return e.arrayBuffer()})).catch((function(){return ne(ee)}));if(c)return new Promise((function(e,t){c(ee,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return ne(ee)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){j("failed to asynchronously prepare wasm: "+e),Z(e)}))}if(_||(J++,d.monitorRunDependencies&&d.monitorRunDependencies(J)),d.instantiateWasm)try{return d.instantiateWasm(e,t)}catch(e){j("Module.instantiateWasm callback failed with error: "+e),o(e)}(A||"function"!=typeof WebAssembly.instantiateStreaming||te(ee)||ae(ee)||y||"function"!=typeof fetch?n(a):fetch(ee,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(a,(function(e){return j("wasm streaming compile failed: "+e),j("falling back to ArrayBuffer instantiation"),n(a)}))}))).catch(o)}(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.__wasm_call_ctors).apply(null,arguments)},d._init=function(){return(d._init=d.asm.init).apply(null,arguments)},d._init_with_threads_count=function(){return(d._init_with_threads_count=d.asm.init_with_threads_count).apply(null,arguments)},d._get_threads_count=function(){return(d._get_threads_count=d.asm.get_threads_count).apply(null,arguments)},d._register_tensor=function(){return(d._register_tensor=d.asm.register_tensor).apply(null,arguments)},d._dispose_data=function(){return(d._dispose_data=d.asm.dispose_data).apply(null,arguments)},d._dispose=function(){return(d._dispose=d.asm.dispose).apply(null,arguments)},d._Abs=function(){return(d._Abs=d.asm.Abs).apply(null,arguments)},d._Acos=function(){return(d._Acos=d.asm.Acos).apply(null,arguments)},d._Acosh=function(){return(d._Acosh=d.asm.Acosh).apply(null,arguments)},d._Add=function(){return(d._Add=d.asm.Add).apply(null,arguments)},d._AddN=function(){return(d._AddN=d.asm.AddN).apply(null,arguments)},d._All=function(){return(d._All=d.asm.All).apply(null,arguments)},d._Any=function(){return(d._Any=d.asm.Any).apply(null,arguments)},d._ArgMax=function(){return(d._ArgMax=d.asm.ArgMax).apply(null,arguments)},d._ArgMin=function(){return(d._ArgMin=d.asm.ArgMin).apply(null,arguments)},d._Asin=function(){return(d._Asin=d.asm.Asin).apply(null,arguments)},d._Asinh=function(){return(d._Asinh=d.asm.Asinh).apply(null,arguments)},d._Atan=function(){return(d._Atan=d.asm.Atan).apply(null,arguments)},d._Atan2=function(){return(d._Atan2=d.asm.Atan2).apply(null,arguments)},d._Atanh=function(){return(d._Atanh=d.asm.Atanh).apply(null,arguments)},d._AvgPool=function(){return(d._AvgPool=d.asm.AvgPool).apply(null,arguments)},d._AvgPool3D=function(){return(d._AvgPool3D=d.asm.AvgPool3D).apply(null,arguments)},d._AvgPool3DGrad=function(){return(d._AvgPool3DGrad=d.asm.AvgPool3DGrad).apply(null,arguments)},d._AvgPoolGrad=function(){return(d._AvgPoolGrad=d.asm.AvgPoolGrad).apply(null,arguments)},d._BatchMatMul=function(){return(d._BatchMatMul=d.asm.BatchMatMul).apply(null,arguments)},d._Bincount=function(){return(d._Bincount=d.asm.Bincount).apply(null,arguments)},d._BitwiseAnd=function(){return(d._BitwiseAnd=d.asm.BitwiseAnd).apply(null,arguments)},d._Ceil=function(){return(d._Ceil=d.asm.Ceil).apply(null,arguments)},d._ClipByValue=function(){return(d._ClipByValue=d.asm.ClipByValue).apply(null,arguments)},d._Conv2D=function(){return(d._Conv2D=d.asm.Conv2D).apply(null,arguments)},d._Conv2DBackpropInput=function(){return(d._Conv2DBackpropInput=d.asm.Conv2DBackpropInput).apply(null,arguments)},d._Conv3D=function(){return(d._Conv3D=d.asm.Conv3D).apply(null,arguments)},d._Conv3DBackpropFilterV2=function(){return(d._Conv3DBackpropFilterV2=d.asm.Conv3DBackpropFilterV2).apply(null,arguments)},d._Conv3DBackpropInputV2=function(){return(d._Conv3DBackpropInputV2=d.asm.Conv3DBackpropInputV2).apply(null,arguments)},d._Cos=function(){return(d._Cos=d.asm.Cos).apply(null,arguments)},d._Cosh=function(){return(d._Cosh=d.asm.Cosh).apply(null,arguments)},d._CropAndResize=function(){return(d._CropAndResize=d.asm.CropAndResize).apply(null,arguments)},d._Cumprod=function(){return(d._Cumprod=d.asm.Cumprod).apply(null,arguments)},d._Cumsum=function(){return(d._Cumsum=d.asm.Cumsum).apply(null,arguments)},d._DenseBincount=function(){return(d._DenseBincount=d.asm.DenseBincount).apply(null,arguments)},d._DepthToSpace=function(){return(d._DepthToSpace=d.asm.DepthToSpace).apply(null,arguments)},d._DepthwiseConv2dNative=function(){return(d._DepthwiseConv2dNative=d.asm.DepthwiseConv2dNative).apply(null,arguments)},d._Diag=function(){return(d._Diag=d.asm.Diag).apply(null,arguments)},d._Dilation2D=function(){return(d._Dilation2D=d.asm.Dilation2D).apply(null,arguments)},d._Dilation2DBackpropFilter=function(){return(d._Dilation2DBackpropFilter=d.asm.Dilation2DBackpropFilter).apply(null,arguments)},d._Dilation2DBackpropInput=function(){return(d._Dilation2DBackpropInput=d.asm.Dilation2DBackpropInput).apply(null,arguments)},d._Elu=function(){return(d._Elu=d.asm.Elu).apply(null,arguments)},d._EluGrad=function(){return(d._EluGrad=d.asm.EluGrad).apply(null,arguments)},d._Equal=function(){return(d._Equal=d.asm.Equal).apply(null,arguments)},d._Erf=function(){return(d._Erf=d.asm.Erf).apply(null,arguments)},d._Exp=function(){return(d._Exp=d.asm.Exp).apply(null,arguments)},d._Expm1=function(){return(d._Expm1=d.asm.Expm1).apply(null,arguments)},d._FlipLeftRight=function(){return(d._FlipLeftRight=d.asm.FlipLeftRight).apply(null,arguments)},d._Floor=function(){return(d._Floor=d.asm.Floor).apply(null,arguments)},d._FloorDiv=function(){return(d._FloorDiv=d.asm.FloorDiv).apply(null,arguments)},d._FusedBatchNorm=function(){return(d._FusedBatchNorm=d.asm.FusedBatchNorm).apply(null,arguments)},d._FusedConv2D=function(){return(d._FusedConv2D=d.asm.FusedConv2D).apply(null,arguments)},d._FusedDepthwiseConv2D=function(){return(d._FusedDepthwiseConv2D=d.asm.FusedDepthwiseConv2D).apply(null,arguments)},d._Gather=function(){return(d._Gather=d.asm.Gather).apply(null,arguments)},d._GatherNd=function(){return(d._GatherNd=d.asm.GatherNd).apply(null,arguments)},d._Greater=function(){return(d._Greater=d.asm.Greater).apply(null,arguments)},d._GreaterEqual=function(){return(d._GreaterEqual=d.asm.GreaterEqual).apply(null,arguments)},d._IsFinite=function(){return(d._IsFinite=d.asm.IsFinite).apply(null,arguments)},d._IsInf=function(){return(d._IsInf=d.asm.IsInf).apply(null,arguments)},d._IsNan=function(){return(d._IsNan=d.asm.IsNan).apply(null,arguments)},d._LRN=function(){return(d._LRN=d.asm.LRN).apply(null,arguments)},d._LRNGrad=function(){return(d._LRNGrad=d.asm.LRNGrad).apply(null,arguments)},d._LeakyRelu=function(){return(d._LeakyRelu=d.asm.LeakyRelu).apply(null,arguments)},d._Less=function(){return(d._Less=d.asm.Less).apply(null,arguments)},d._LessEqual=function(){return(d._LessEqual=d.asm.LessEqual).apply(null,arguments)},d._LinSpace=function(){return(d._LinSpace=d.asm.LinSpace).apply(null,arguments)},d._Log=function(){return(d._Log=d.asm.Log).apply(null,arguments)},d._Log1p=function(){return(d._Log1p=d.asm.Log1p).apply(null,arguments)},d._LogicalAnd=function(){return(d._LogicalAnd=d.asm.LogicalAnd).apply(null,arguments)},d._LogicalNot=function(){return(d._LogicalNot=d.asm.LogicalNot).apply(null,arguments)},d._LogicalOr=function(){return(d._LogicalOr=d.asm.LogicalOr).apply(null,arguments)},d._LogicalXor=function(){return(d._LogicalXor=d.asm.LogicalXor).apply(null,arguments)},d._Max=function(){return(d._Max=d.asm.Max).apply(null,arguments)},d._MaxPool=function(){return(d._MaxPool=d.asm.MaxPool).apply(null,arguments)},d._MaxPool3D=function(){return(d._MaxPool3D=d.asm.MaxPool3D).apply(null,arguments)},d._MaxPool3DGrad=function(){return(d._MaxPool3DGrad=d.asm.MaxPool3DGrad).apply(null,arguments)},d._MaxPoolGrad=function(){return(d._MaxPoolGrad=d.asm.MaxPoolGrad).apply(null,arguments)},d._MaxPoolWithArgmax=function(){return(d._MaxPoolWithArgmax=d.asm.MaxPoolWithArgmax).apply(null,arguments)},d._Maximum=function(){return(d._Maximum=d.asm.Maximum).apply(null,arguments)},d._Mean=function(){return(d._Mean=d.asm.Mean).apply(null,arguments)},d._Min=function(){return(d._Min=d.asm.Min).apply(null,arguments)},d._Minimum=function(){return(d._Minimum=d.asm.Minimum).apply(null,arguments)},d._MirrorPad=function(){return(d._MirrorPad=d.asm.MirrorPad).apply(null,arguments)},d._Mod=function(){return(d._Mod=d.asm.Mod).apply(null,arguments)},d._Multinomial=function(){return(d._Multinomial=d.asm.Multinomial).apply(null,arguments)},d._Multiply=function(){return(d._Multiply=d.asm.Multiply).apply(null,arguments)},d._Neg=function(){return(d._Neg=d.asm.Neg).apply(null,arguments)},d._NonMaxSuppressionV3=function(){return(d._NonMaxSuppressionV3=d.asm.NonMaxSuppressionV3).apply(null,arguments)},d._NonMaxSuppressionV4=function(){return(d._NonMaxSuppressionV4=d.asm.NonMaxSuppressionV4).apply(null,arguments)},d._NonMaxSuppressionV5=function(){return(d._NonMaxSuppressionV5=d.asm.NonMaxSuppressionV5).apply(null,arguments)},d._NotEqual=function(){return(d._NotEqual=d.asm.NotEqual).apply(null,arguments)},d._OneHot=function(){return(d._OneHot=d.asm.OneHot).apply(null,arguments)},d._PadV2=function(){return(d._PadV2=d.asm.PadV2).apply(null,arguments)},d._Pow=function(){return(d._Pow=d.asm.Pow).apply(null,arguments)},d._Prelu=function(){return(d._Prelu=d.asm.Prelu).apply(null,arguments)},d._Prod=function(){return(d._Prod=d.asm.Prod).apply(null,arguments)},d._RealDiv=function(){return(d._RealDiv=d.asm.RealDiv).apply(null,arguments)},d._Reciprocal=function(){return(d._Reciprocal=d.asm.Reciprocal).apply(null,arguments)},d._Relu=function(){return(d._Relu=d.asm.Relu).apply(null,arguments)},d._Relu6=function(){return(d._Relu6=d.asm.Relu6).apply(null,arguments)},d._ResizeBilinear=function(){return(d._ResizeBilinear=d.asm.ResizeBilinear).apply(null,arguments)},d._ResizeBilinearGrad=function(){return(d._ResizeBilinearGrad=d.asm.ResizeBilinearGrad).apply(null,arguments)},d._ResizeNearestNeighbor=function(){return(d._ResizeNearestNeighbor=d.asm.ResizeNearestNeighbor).apply(null,arguments)},d._ResizeNearestNeighborGrad=function(){return(d._ResizeNearestNeighborGrad=d.asm.ResizeNearestNeighborGrad).apply(null,arguments)},d._Reverse=function(){return(d._Reverse=d.asm.Reverse).apply(null,arguments)},d._RotateWithOffset=function(){return(d._RotateWithOffset=d.asm.RotateWithOffset).apply(null,arguments)},d._Round=function(){return(d._Round=d.asm.Round).apply(null,arguments)},d._Rsqrt=function(){return(d._Rsqrt=d.asm.Rsqrt).apply(null,arguments)},d._ScatterNd=function(){return(d._ScatterNd=d.asm.ScatterNd).apply(null,arguments)},d._SearchSorted=function(){return(d._SearchSorted=d.asm.SearchSorted).apply(null,arguments)},d._SelectV2=function(){return(d._SelectV2=d.asm.SelectV2).apply(null,arguments)},d._Selu=function(){return(d._Selu=d.asm.Selu).apply(null,arguments)},d._Sigmoid=function(){return(d._Sigmoid=d.asm.Sigmoid).apply(null,arguments)},d._Sign=function(){return(d._Sign=d.asm.Sign).apply(null,arguments)},d._Sin=function(){return(d._Sin=d.asm.Sin).apply(null,arguments)},d._Sinh=function(){return(d._Sinh=d.asm.Sinh).apply(null,arguments)},d._Softmax=function(){return(d._Softmax=d.asm.Softmax).apply(null,arguments)},d._Softplus=function(){return(d._Softplus=d.asm.Softplus).apply(null,arguments)},d._SparseFillEmptyRows=function(){return(d._SparseFillEmptyRows=d.asm.SparseFillEmptyRows).apply(null,arguments)},d._SparseReshape=function(){return(d._SparseReshape=d.asm.SparseReshape).apply(null,arguments)},d._SparseSegmentReduction=function(){return(d._SparseSegmentReduction=d.asm.SparseSegmentReduction).apply(null,arguments)},d._SparseToDense=function(){return(d._SparseToDense=d.asm.SparseToDense).apply(null,arguments)},d._Sqrt=function(){return(d._Sqrt=d.asm.Sqrt).apply(null,arguments)},d._Square=function(){return(d._Square=d.asm.Square).apply(null,arguments)},d._SquaredDifference=function(){return(d._SquaredDifference=d.asm.SquaredDifference).apply(null,arguments)},d._Step=function(){return(d._Step=d.asm.Step).apply(null,arguments)},d._StridedSlice=function(){return(d._StridedSlice=d.asm.StridedSlice).apply(null,arguments)},d._Sub=function(){return(d._Sub=d.asm.Sub).apply(null,arguments)},d._Sum=function(){return(d._Sum=d.asm.Sum).apply(null,arguments)},d._Tan=function(){return(d._Tan=d.asm.Tan).apply(null,arguments)},d._Tanh=function(){return(d._Tanh=d.asm.Tanh).apply(null,arguments)},d._TensorScatterUpdate=function(){return(d._TensorScatterUpdate=d.asm.TensorScatterUpdate).apply(null,arguments)},d._Tile=function(){return(d._Tile=d.asm.Tile).apply(null,arguments)},d._TopK=function(){return(d._TopK=d.asm.TopK).apply(null,arguments)},d._Transform=function(){return(d._Transform=d.asm.Transform).apply(null,arguments)},d._Transpose=function(){return(d._Transpose=d.asm.Transpose).apply(null,arguments)},d.__FusedMatMul=function(){return(d.__FusedMatMul=d.asm._FusedMatMul).apply(null,arguments)},d._malloc=function(){return(d._malloc=d.asm.malloc).apply(null,arguments)},d._free=function(){return(d._free=d.asm.free).apply(null,arguments)},d.__emscripten_tls_init=function(){return(d.__emscripten_tls_init=d.asm._emscripten_tls_init).apply(null,arguments)};var Fe=d._pthread_self=function(){return(Fe=d._pthread_self=d.asm.pthread_self).apply(null,arguments)};d.___errno_location=function(){return(d.___errno_location=d.asm.__errno_location).apply(null,arguments)};var Ne=d.__emscripten_thread_init=function(){return(Ne=d.__emscripten_thread_init=d.asm._emscripten_thread_init).apply(null,arguments)};d.__emscripten_thread_crashed=function(){return(d.__emscripten_thread_crashed=d.asm._emscripten_thread_crashed).apply(null,arguments)},d._emscripten_main_thread_process_queued_calls=function(){return(d._emscripten_main_thread_process_queued_calls=d.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},d._emscripten_main_browser_thread_id=function(){return(d._emscripten_main_browser_thread_id=d.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var Re=d._emscripten_run_in_main_runtime_thread_js=function(){return(Re=d._emscripten_run_in_main_runtime_thread_js=d.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};d._emscripten_dispatch_to_thread_=function(){return(d._emscripten_dispatch_to_thread_=d.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var Pe,Te,Be,Ee=d.__emscripten_proxy_execute_task_queue=function(){return(Ee=d.__emscripten_proxy_execute_task_queue=d.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},We=d.__emscripten_thread_free_data=function(){return(We=d.__emscripten_thread_free_data=d.asm._emscripten_thread_free_data).apply(null,arguments)},Oe=d.__emscripten_thread_exit=function(){return(Oe=d.__emscripten_thread_exit=d.asm._emscripten_thread_exit).apply(null,arguments)},ze=d._emscripten_stack_set_limits=function(){return(ze=d._emscripten_stack_set_limits=d.asm.emscripten_stack_set_limits).apply(null,arguments)},$e=d.stackSave=function(){return($e=d.stackSave=d.asm.stackSave).apply(null,arguments)},Ge=d.stackRestore=function(){return(Ge=d.stackRestore=d.asm.stackRestore).apply(null,arguments)},He=d.stackAlloc=function(){return(He=d.stackAlloc=d.asm.stackAlloc).apply(null,arguments)};function Le(e){if(!(J>0)){if(_)return u(d),Q(),void startWorker(d);!function(){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)e=d.preRun.shift(),V.unshift(e);var e;le(V)}(),J>0||(d.setStatus?(d.setStatus("Running..."),setTimeout((function(){setTimeout((function(){d.setStatus("")}),1),t()}),1)):t())}function t(){Pe||(Pe=!0,d.calledRun=!0,z||(Q(),u(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),function(){if(!_){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;)e=d.postRun.shift(),K.unshift(e);var e;le(K)}}()))}}if(d.dynCall_iijjiiii=function(){return(d.dynCall_iijjiiii=d.asm.dynCall_iijjiiii).apply(null,arguments)},d.dynCall_jiji=function(){return(d.dynCall_jiji=d.asm.dynCall_jiji).apply(null,arguments)},d.keepRuntimeAlive=X,d.wasmMemory=x,d.cwrap=function(e,t,a,n){var r=(a=a||[]).every((function(e){return"number"===e||"boolean"===e}));return"string"!==t&&r&&!n?Ae(e):function(){return De(e,t,a,arguments)}},d.ExitStatus=ie,d.PThread=de,Y=function e(){Pe||Le(),Pe||(Y=e)},d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();if(Le(),p&&(Te={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!p.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!p.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)Be=WasmBackendModule;else{if(void 0===e)throw new Error("Could not find wasm module in post.js");Be=e}if(Te){var Ue=Be._dispose;Be._dispose=function(){Ue(),Te.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Te.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=a}(tfjsBackendWasmThreadedSimd$1);var tfjsBackendWasmThreadedSimdExports=tfjsBackendWasmThreadedSimd$1.exports,tfjsBackendWasmThreadedSimd=getDefaultExportFromCjs(tfjsBackendWasmThreadedSimdExports),wasmFactoryThreadedSimd_import=_mergeNamespaces({__proto__:null,default:tfjsBackendWasmThreadedSimd},[tfjsBackendWasmThreadedSimdExports]),wasmWorkerContents='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};',tfjsBackendWasm$1={exports:{}};!function(e){var t,a=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(t=t||__filename),function(e){var a,n,r,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(e,t){a=e,n=t})),"undefined"!=typeof process&&process.listeners&&(r={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var s,u,o,p=Object.assign({},i),d="object"==typeof window,l="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";if(c){var f=require$$0,h=require$$1;m=l?h.dirname(m)+"/":__dirname+"/",s=function(e,t){return e=E(e)?new URL(e):h.normalize(e),f.readFileSync(e,t?void 0:"utf8")},o=function(e){var t=s(e,!0);return t.buffer||(t=new Uint8Array(t)),t},u=function(e,t,a){e=E(e)?new URL(e):h.normalize(e),f.readFile(e,(function(e,n){e?a(e):t(n.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof O))throw e})),process.on("unhandledRejection",(function(e){throw e})),i.inspect=function(){return"[Emscripten Module object]"}}else(d||l)&&(l?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),t&&(m=t),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",s=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},l&&(o=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),u=function(e,t,a){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){200==n.status||0==n.status&&n.response?t(n.response):a()},n.onerror=a,n.send(null)});var g,b,y=i.print||console.log.bind(console),_=i.printErr||console.warn.bind(console);Object.assign(i,p),p=null,i.arguments&&i.arguments,i.thisProgram&&i.thisProgram,i.quit&&i.quit,i.wasmBinary&&(g=i.wasmBinary),i.noExitRuntime,"object"!=typeof WebAssembly&&R("no native wasm support detected");var C,w,v,k,I=!1,S="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function M(e,t,a){for(var n=(t>>>=0)+a,r=t;e[r]&&!(r>=n);)++r;if(r-t>16&&e.buffer&&S)return S.decode(e.subarray(t,r));for(var i="";t<r;){var s=e[t++];if(128&s){var u=63&e[t++];if(192!=(224&s)){var o=63&e[t++];if((s=224==(240&s)?(15&s)<<12|u<<6|o:(7&s)<<18|u<<12|o<<6|63&e[t++])<65536)i+=String.fromCharCode(s);else{var p=s-65536;i+=String.fromCharCode(55296|p>>10,56320|1023&p)}}else i+=String.fromCharCode((31&s)<<6|u)}else i+=String.fromCharCode(s)}return i}function A(e){C=e,i.HEAP8=w=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAP32=new Int32Array(e),i.HEAPU8=v=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAPU32=k=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=new Float64Array(e)}i.INITIAL_MEMORY;var D=[],j=[],x=[],F=0,N=null;function R(e){i.onAbort&&i.onAbort(e),_(e="Aborted("+e+")"),I=!0,e+=". Build with -sASSERTIONS for more info.";var t=new WebAssembly.RuntimeError(e);throw n(t),t}var P,T;function B(e){return e.startsWith("data:application/octet-stream;base64,")}function E(e){return e.startsWith("file://")}function W(e){try{if(e==P&&g)return new Uint8Array(g);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){R(e)}}function O(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function z(e){for(;e.length>0;)e.shift()(i)}function $(e){try{return b.grow(e-C.byteLength+65535>>>16),A(b.buffer),1}catch(e){}}B(P="tfjs-backend-wasm.wasm")||(T=P,P=i.locateFile?i.locateFile(T,m):m+T);var G=[null,[],[]];function H(e,t){var a=G[e];0===t||10===t?((1===e?y:_)(M(a,0)),a.length=0):a.push(t)}function L(e){return i["_"+e]}function U(e,t,a,n,r){var i={string:function(e){var t=0;if(null!=e&&0!==e){var a=1+(e.length<<2);!function(e,t,a){!function(e,t,a,n){if(!(n>0))return 0;for(var r=(a>>>=0)+n-1,i=0;i<e.length;++i){var s=e.charCodeAt(i);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),s<=127){if(a>=r)break;t[a++>>>0]=s}else if(s<=2047){if(a+1>=r)break;t[a++>>>0]=192|s>>6,t[a++>>>0]=128|63&s}else if(s<=65535){if(a+2>=r)break;t[a++>>>0]=224|s>>12,t[a++>>>0]=128|s>>6&63,t[a++>>>0]=128|63&s}else{if(a+3>=r)break;t[a++>>>0]=240|s>>18,t[a++>>>0]=128|s>>12&63,t[a++>>>0]=128|s>>6&63,t[a++>>>0]=128|63&s}}t[a>>>0]=0}(e,v,t,a)}(e,t=Y(a),a)}return t},array:function(e){var t=Y(e.length);return function(e,t){w.set(e,t>>>0)}(e,t),t}};var s=L(e),u=[],o=0;if(n)for(var p=0;p<n.length;p++){var d=i[a[p]];d?(0===o&&(o=Q()),u[p]=d(n[p])):u[p]=n[p]}var l=s.apply(null,u);return function(e){return 0!==o&&J(o),function(e){return"string"===t?(a=e,(a>>>=0)?M(v,a,void 0):""):"boolean"===t?Boolean(e):e;var a}(e)}(l)}var V={abort:function(){R("")},emscripten_get_heap_max:function(){return 4294901760},emscripten_memcpy_big:function(e,t,a){v.copyWithin(e>>>0,t>>>0,t+a>>>0)},emscripten_resize_heap:function(e){var t=v.length,a=4294901760;if((e>>>=0)>a)return!1;for(var n,r=1;r<=4;r*=2){var i=t*(1+.2/r);if(i=Math.min(i,e+100663296),$(Math.min(a,(n=Math.max(e,i))+(65536-n%65536)%65536)))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,t,a,n,r){return 70},fd_write:function(e,t,a,n){for(var r=0,i=0;i<a;i++){var s=k[t>>>2],u=k[t+4>>>2];t+=8;for(var o=0;o<u;o++)H(e,v[s+o>>>0]);r+=u}return k[n>>>2]=r,0}};!function(){var e={env:V,wasi_snapshot_preview1:V};function t(e,t){var a,n=e.exports;i.asm=n,A((b=i.asm.memory).buffer),i.asm.__indirect_function_table,a=i.asm.__wasm_call_ctors,j.unshift(a),function(){if(F--,i.monitorRunDependencies&&i.monitorRunDependencies(F),0==F&&N){var e=N;N=null,e()}}()}function a(e){t(e.instance)}function r(t){return function(){if(!g&&(d||l)){if("function"==typeof fetch&&!E(P))return fetch(P,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+P+"'";return e.arrayBuffer()})).catch((function(){return W(P)}));if(u)return new Promise((function(e,t){u(P,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return W(P)}))}().then((function(t){return WebAssembly.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){_("failed to asynchronously prepare wasm: "+e),R(e)}))}if(F++,i.monitorRunDependencies&&i.monitorRunDependencies(F),i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){_("Module.instantiateWasm callback failed with error: "+e),n(e)}(g||"function"!=typeof WebAssembly.instantiateStreaming||B(P)||E(P)||c||"function"!=typeof fetch?r(a):fetch(P,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,e).then(a,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),r(a)}))}))).catch(n)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.__wasm_call_ctors).apply(null,arguments)},i._init=function(){return(i._init=i.asm.init).apply(null,arguments)},i._init_with_threads_count=function(){return(i._init_with_threads_count=i.asm.init_with_threads_count).apply(null,arguments)},i._get_threads_count=function(){return(i._get_threads_count=i.asm.get_threads_count).apply(null,arguments)},i._register_tensor=function(){return(i._register_tensor=i.asm.register_tensor).apply(null,arguments)},i._dispose_data=function(){return(i._dispose_data=i.asm.dispose_data).apply(null,arguments)},i._dispose=function(){return(i._dispose=i.asm.dispose).apply(null,arguments)},i._Abs=function(){return(i._Abs=i.asm.Abs).apply(null,arguments)},i._Acos=function(){return(i._Acos=i.asm.Acos).apply(null,arguments)},i._Acosh=function(){return(i._Acosh=i.asm.Acosh).apply(null,arguments)},i._Add=function(){return(i._Add=i.asm.Add).apply(null,arguments)},i._AddN=function(){return(i._AddN=i.asm.AddN).apply(null,arguments)},i._All=function(){return(i._All=i.asm.All).apply(null,arguments)},i._Any=function(){return(i._Any=i.asm.Any).apply(null,arguments)},i._ArgMax=function(){return(i._ArgMax=i.asm.ArgMax).apply(null,arguments)},i._ArgMin=function(){return(i._ArgMin=i.asm.ArgMin).apply(null,arguments)},i._Asin=function(){return(i._Asin=i.asm.Asin).apply(null,arguments)},i._Asinh=function(){return(i._Asinh=i.asm.Asinh).apply(null,arguments)},i._Atan=function(){return(i._Atan=i.asm.Atan).apply(null,arguments)},i._Atan2=function(){return(i._Atan2=i.asm.Atan2).apply(null,arguments)},i._Atanh=function(){return(i._Atanh=i.asm.Atanh).apply(null,arguments)},i._AvgPool=function(){return(i._AvgPool=i.asm.AvgPool).apply(null,arguments)},i._AvgPool3D=function(){return(i._AvgPool3D=i.asm.AvgPool3D).apply(null,arguments)},i._AvgPool3DGrad=function(){return(i._AvgPool3DGrad=i.asm.AvgPool3DGrad).apply(null,arguments)},i._AvgPoolGrad=function(){return(i._AvgPoolGrad=i.asm.AvgPoolGrad).apply(null,arguments)},i._BatchMatMul=function(){return(i._BatchMatMul=i.asm.BatchMatMul).apply(null,arguments)},i._Bincount=function(){return(i._Bincount=i.asm.Bincount).apply(null,arguments)},i._BitwiseAnd=function(){return(i._BitwiseAnd=i.asm.BitwiseAnd).apply(null,arguments)},i._Ceil=function(){return(i._Ceil=i.asm.Ceil).apply(null,arguments)},i._ClipByValue=function(){return(i._ClipByValue=i.asm.ClipByValue).apply(null,arguments)},i._Conv2D=function(){return(i._Conv2D=i.asm.Conv2D).apply(null,arguments)},i._Conv2DBackpropInput=function(){return(i._Conv2DBackpropInput=i.asm.Conv2DBackpropInput).apply(null,arguments)},i._Conv3D=function(){return(i._Conv3D=i.asm.Conv3D).apply(null,arguments)},i._Conv3DBackpropFilterV2=function(){return(i._Conv3DBackpropFilterV2=i.asm.Conv3DBackpropFilterV2).apply(null,arguments)},i._Conv3DBackpropInputV2=function(){return(i._Conv3DBackpropInputV2=i.asm.Conv3DBackpropInputV2).apply(null,arguments)},i._Cos=function(){return(i._Cos=i.asm.Cos).apply(null,arguments)},i._Cosh=function(){return(i._Cosh=i.asm.Cosh).apply(null,arguments)},i._CropAndResize=function(){return(i._CropAndResize=i.asm.CropAndResize).apply(null,arguments)},i._Cumprod=function(){return(i._Cumprod=i.asm.Cumprod).apply(null,arguments)},i._Cumsum=function(){return(i._Cumsum=i.asm.Cumsum).apply(null,arguments)},i._DenseBincount=function(){return(i._DenseBincount=i.asm.DenseBincount).apply(null,arguments)},i._DepthToSpace=function(){return(i._DepthToSpace=i.asm.DepthToSpace).apply(null,arguments)},i._DepthwiseConv2dNative=function(){return(i._DepthwiseConv2dNative=i.asm.DepthwiseConv2dNative).apply(null,arguments)},i._Diag=function(){return(i._Diag=i.asm.Diag).apply(null,arguments)},i._Dilation2D=function(){return(i._Dilation2D=i.asm.Dilation2D).apply(null,arguments)},i._Dilation2DBackpropFilter=function(){return(i._Dilation2DBackpropFilter=i.asm.Dilation2DBackpropFilter).apply(null,arguments)},i._Dilation2DBackpropInput=function(){return(i._Dilation2DBackpropInput=i.asm.Dilation2DBackpropInput).apply(null,arguments)},i._Elu=function(){return(i._Elu=i.asm.Elu).apply(null,arguments)},i._EluGrad=function(){return(i._EluGrad=i.asm.EluGrad).apply(null,arguments)},i._Equal=function(){return(i._Equal=i.asm.Equal).apply(null,arguments)},i._Erf=function(){return(i._Erf=i.asm.Erf).apply(null,arguments)},i._Exp=function(){return(i._Exp=i.asm.Exp).apply(null,arguments)},i._Expm1=function(){return(i._Expm1=i.asm.Expm1).apply(null,arguments)},i._FlipLeftRight=function(){return(i._FlipLeftRight=i.asm.FlipLeftRight).apply(null,arguments)},i._Floor=function(){return(i._Floor=i.asm.Floor).apply(null,arguments)},i._FloorDiv=function(){return(i._FloorDiv=i.asm.FloorDiv).apply(null,arguments)},i._FusedBatchNorm=function(){return(i._FusedBatchNorm=i.asm.FusedBatchNorm).apply(null,arguments)},i._FusedConv2D=function(){return(i._FusedConv2D=i.asm.FusedConv2D).apply(null,arguments)},i._FusedDepthwiseConv2D=function(){return(i._FusedDepthwiseConv2D=i.asm.FusedDepthwiseConv2D).apply(null,arguments)},i._Gather=function(){return(i._Gather=i.asm.Gather).apply(null,arguments)},i._GatherNd=function(){return(i._GatherNd=i.asm.GatherNd).apply(null,arguments)},i._Greater=function(){return(i._Greater=i.asm.Greater).apply(null,arguments)},i._GreaterEqual=function(){return(i._GreaterEqual=i.asm.GreaterEqual).apply(null,arguments)},i._IsFinite=function(){return(i._IsFinite=i.asm.IsFinite).apply(null,arguments)},i._IsInf=function(){return(i._IsInf=i.asm.IsInf).apply(null,arguments)},i._IsNan=function(){return(i._IsNan=i.asm.IsNan).apply(null,arguments)},i._LRN=function(){return(i._LRN=i.asm.LRN).apply(null,arguments)},i._LRNGrad=function(){return(i._LRNGrad=i.asm.LRNGrad).apply(null,arguments)},i._LeakyRelu=function(){return(i._LeakyRelu=i.asm.LeakyRelu).apply(null,arguments)},i._Less=function(){return(i._Less=i.asm.Less).apply(null,arguments)},i._LessEqual=function(){return(i._LessEqual=i.asm.LessEqual).apply(null,arguments)},i._LinSpace=function(){return(i._LinSpace=i.asm.LinSpace).apply(null,arguments)},i._Log=function(){return(i._Log=i.asm.Log).apply(null,arguments)},i._Log1p=function(){return(i._Log1p=i.asm.Log1p).apply(null,arguments)},i._LogicalAnd=function(){return(i._LogicalAnd=i.asm.LogicalAnd).apply(null,arguments)},i._LogicalNot=function(){return(i._LogicalNot=i.asm.LogicalNot).apply(null,arguments)},i._LogicalOr=function(){return(i._LogicalOr=i.asm.LogicalOr).apply(null,arguments)},i._LogicalXor=function(){return(i._LogicalXor=i.asm.LogicalXor).apply(null,arguments)},i._Max=function(){return(i._Max=i.asm.Max).apply(null,arguments)},i._MaxPool=function(){return(i._MaxPool=i.asm.MaxPool).apply(null,arguments)},i._MaxPool3D=function(){return(i._MaxPool3D=i.asm.MaxPool3D).apply(null,arguments)},i._MaxPool3DGrad=function(){return(i._MaxPool3DGrad=i.asm.MaxPool3DGrad).apply(null,arguments)},i._MaxPoolGrad=function(){return(i._MaxPoolGrad=i.asm.MaxPoolGrad).apply(null,arguments)},i._MaxPoolWithArgmax=function(){return(i._MaxPoolWithArgmax=i.asm.MaxPoolWithArgmax).apply(null,arguments)},i._Maximum=function(){return(i._Maximum=i.asm.Maximum).apply(null,arguments)},i._Mean=function(){return(i._Mean=i.asm.Mean).apply(null,arguments)},i._Min=function(){return(i._Min=i.asm.Min).apply(null,arguments)},i._Minimum=function(){return(i._Minimum=i.asm.Minimum).apply(null,arguments)},i._MirrorPad=function(){return(i._MirrorPad=i.asm.MirrorPad).apply(null,arguments)},i._Mod=function(){return(i._Mod=i.asm.Mod).apply(null,arguments)},i._Multinomial=function(){return(i._Multinomial=i.asm.Multinomial).apply(null,arguments)},i._Multiply=function(){return(i._Multiply=i.asm.Multiply).apply(null,arguments)},i._Neg=function(){return(i._Neg=i.asm.Neg).apply(null,arguments)},i._NonMaxSuppressionV3=function(){return(i._NonMaxSuppressionV3=i.asm.NonMaxSuppressionV3).apply(null,arguments)},i._NonMaxSuppressionV4=function(){return(i._NonMaxSuppressionV4=i.asm.NonMaxSuppressionV4).apply(null,arguments)},i._NonMaxSuppressionV5=function(){return(i._NonMaxSuppressionV5=i.asm.NonMaxSuppressionV5).apply(null,arguments)},i._NotEqual=function(){return(i._NotEqual=i.asm.NotEqual).apply(null,arguments)},i._OneHot=function(){return(i._OneHot=i.asm.OneHot).apply(null,arguments)},i._PadV2=function(){return(i._PadV2=i.asm.PadV2).apply(null,arguments)},i._Pow=function(){return(i._Pow=i.asm.Pow).apply(null,arguments)},i._Prelu=function(){return(i._Prelu=i.asm.Prelu).apply(null,arguments)},i._Prod=function(){return(i._Prod=i.asm.Prod).apply(null,arguments)},i._RealDiv=function(){return(i._RealDiv=i.asm.RealDiv).apply(null,arguments)},i._Reciprocal=function(){return(i._Reciprocal=i.asm.Reciprocal).apply(null,arguments)},i._Relu=function(){return(i._Relu=i.asm.Relu).apply(null,arguments)},i._Relu6=function(){return(i._Relu6=i.asm.Relu6).apply(null,arguments)},i._ResizeBilinear=function(){return(i._ResizeBilinear=i.asm.ResizeBilinear).apply(null,arguments)},i._ResizeBilinearGrad=function(){return(i._ResizeBilinearGrad=i.asm.ResizeBilinearGrad).apply(null,arguments)},i._ResizeNearestNeighbor=function(){return(i._ResizeNearestNeighbor=i.asm.ResizeNearestNeighbor).apply(null,arguments)},i._ResizeNearestNeighborGrad=function(){return(i._ResizeNearestNeighborGrad=i.asm.ResizeNearestNeighborGrad).apply(null,arguments)},i._Reverse=function(){return(i._Reverse=i.asm.Reverse).apply(null,arguments)},i._RotateWithOffset=function(){return(i._RotateWithOffset=i.asm.RotateWithOffset).apply(null,arguments)},i._Round=function(){return(i._Round=i.asm.Round).apply(null,arguments)},i._Rsqrt=function(){return(i._Rsqrt=i.asm.Rsqrt).apply(null,arguments)},i._ScatterNd=function(){return(i._ScatterNd=i.asm.ScatterNd).apply(null,arguments)},i._SearchSorted=function(){return(i._SearchSorted=i.asm.SearchSorted).apply(null,arguments)},i._SelectV2=function(){return(i._SelectV2=i.asm.SelectV2).apply(null,arguments)},i._Selu=function(){return(i._Selu=i.asm.Selu).apply(null,arguments)},i._Sigmoid=function(){return(i._Sigmoid=i.asm.Sigmoid).apply(null,arguments)},i._Sign=function(){return(i._Sign=i.asm.Sign).apply(null,arguments)},i._Sin=function(){return(i._Sin=i.asm.Sin).apply(null,arguments)},i._Sinh=function(){return(i._Sinh=i.asm.Sinh).apply(null,arguments)},i._Softmax=function(){return(i._Softmax=i.asm.Softmax).apply(null,arguments)},i._Softplus=function(){return(i._Softplus=i.asm.Softplus).apply(null,arguments)},i._SparseFillEmptyRows=function(){return(i._SparseFillEmptyRows=i.asm.SparseFillEmptyRows).apply(null,arguments)},i._SparseReshape=function(){return(i._SparseReshape=i.asm.SparseReshape).apply(null,arguments)},i._SparseSegmentReduction=function(){return(i._SparseSegmentReduction=i.asm.SparseSegmentReduction).apply(null,arguments)},i._SparseToDense=function(){return(i._SparseToDense=i.asm.SparseToDense).apply(null,arguments)},i._Sqrt=function(){return(i._Sqrt=i.asm.Sqrt).apply(null,arguments)},i._Square=function(){return(i._Square=i.asm.Square).apply(null,arguments)},i._SquaredDifference=function(){return(i._SquaredDifference=i.asm.SquaredDifference).apply(null,arguments)},i._Step=function(){return(i._Step=i.asm.Step).apply(null,arguments)},i._StridedSlice=function(){return(i._StridedSlice=i.asm.StridedSlice).apply(null,arguments)},i._Sub=function(){return(i._Sub=i.asm.Sub).apply(null,arguments)},i._Sum=function(){return(i._Sum=i.asm.Sum).apply(null,arguments)},i._Tan=function(){return(i._Tan=i.asm.Tan).apply(null,arguments)},i._Tanh=function(){return(i._Tanh=i.asm.Tanh).apply(null,arguments)},i._TensorScatterUpdate=function(){return(i._TensorScatterUpdate=i.asm.TensorScatterUpdate).apply(null,arguments)},i._Tile=function(){return(i._Tile=i.asm.Tile).apply(null,arguments)},i._TopK=function(){return(i._TopK=i.asm.TopK).apply(null,arguments)},i._Transform=function(){return(i._Transform=i.asm.Transform).apply(null,arguments)},i._Transpose=function(){return(i._Transpose=i.asm.Transpose).apply(null,arguments)},i.__FusedMatMul=function(){return(i.__FusedMatMul=i.asm._FusedMatMul).apply(null,arguments)},i._malloc=function(){return(i._malloc=i.asm.malloc).apply(null,arguments)},i._free=function(){return(i._free=i.asm.free).apply(null,arguments)},i.___errno_location=function(){return(i.___errno_location=i.asm.__errno_location).apply(null,arguments)};var q,K,X,Q=i.stackSave=function(){return(Q=i.stackSave=i.asm.stackSave).apply(null,arguments)},J=i.stackRestore=function(){return(J=i.stackRestore=i.asm.stackRestore).apply(null,arguments)},Y=i.stackAlloc=function(){return(Y=i.stackAlloc=i.asm.stackAlloc).apply(null,arguments)};function Z(e){function t(){q||(q=!0,i.calledRun=!0,I||(z(j),a(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)e=i.postRun.shift(),x.unshift(e);var e;z(x)}()))}F>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)e=i.preRun.shift(),D.unshift(e);var e;z(D)}(),F>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),t()}),1)):t()))}if(i.dynCall_iijjiiii=function(){return(i.dynCall_iijjiiii=i.asm.dynCall_iijjiiii).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.dynCall_jiji).apply(null,arguments)},i.cwrap=function(e,t,a,n){var r=(a=a||[]).every((function(e){return"number"===e||"boolean"===e}));return"string"!==t&&r&&!n?L(e):function(){return U(e,t,a,arguments)}},N=function e(){q||Z(),q||(N=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();if(Z(),r&&(K={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!r.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!r.unhandledRejection.indexOf(e)>-1}))}),void 0!==e)X=e;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");X=WasmBackendModuleThreadedSimd}if(K){var ee=X._dispose;X._dispose=function(){ee(),K.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),K.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=a}(tfjsBackendWasm$1);var tfjsBackendWasmExports=tfjsBackendWasm$1.exports,tfjsBackendWasm=getDefaultExportFromCjs(tfjsBackendWasmExports),wasmFactory_import=_mergeNamespaces({__proto__:null,default:tfjsBackendWasm},[tfjsBackendWasmExports]),wasmFactoryThreadedSimd=tfjsBackendWasmThreadedSimd||wasmFactoryThreadedSimd_import,wasmFactory=tfjsBackendWasm||wasmFactory_import,BackendWasm=function(e){function t(t){var a=e.call(this)||this;return a.wasm=t,a.dataIdNextNumber=1,a.wasm.tfjs.initWithThreadsCount(threadsCount),actualThreadsCount=a.wasm.tfjs.getThreadsCount(),a.dataIdMap=new tfjsCore.DataStorage(a,tfjsCore.engine()),a}return __extends(t,e),t.prototype.write=function(e,t,a){var n={id:this.dataIdNextNumber++};return this.move(n,e,t,a,1),n},t.prototype.numDataIds=function(){return this.dataIdMap.numDataIds()},t.prototype.time=function(e){return __awaiter(this,void 0,void 0,(function(){var t;return __generator(this,(function(a){return t=tfjsCore.util.now(),e(),[2,{kernelMs:tfjsCore.util.now()-t}]}))}))},t.prototype.move=function(e,t,a,n,r){var i=this.dataIdNextNumber++;if("string"!==n){var s=tfjsCore.util.sizeFromShape(a),u=s*tfjsCore.util.bytesPerElement(n),o=this.wasm._malloc(u)>>>0;this.dataIdMap.set(e,{id:i,memoryOffset:o,shape:a,dtype:n,refCount:r}),this.wasm.tfjs.registerTensor(i,s,o),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,u),o)}else{var p=t;this.dataIdMap.set(e,{id:i,stringBytes:p,shape:a,dtype:n,memoryOffset:null,refCount:r})}},t.prototype.read=function(e){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){return[2,this.readSync(e)]}))}))},t.prototype.readSync=function(e,t,a){var n=this.dataIdMap.get(e),r=n.memoryOffset,i=n.dtype,s=n.shape,u=n.stringBytes;if("string"===i)return null!=t&&0!==t||!(null==a||a>=u.length)?u.slice(t,a):u;t=t||0,a=a||tfjsCore.util.sizeFromShape(s);var o=tfjsCore.util.bytesPerElement(i);return typedArrayFromBuffer(this.wasm.HEAPU8.slice(r+t*o,r+a*o).buffer,i)},t.prototype.disposeData=function(e,t){if(void 0===t&&(t=!1),this.dataIdMap.has(e)){var a=this.dataIdMap.get(e);if(a.refCount--,!t&&a.refCount>0)return!1;this.wasm._free(a.memoryOffset),this.wasm.tfjs.disposeData(a.id),this.dataIdMap.delete(e)}return!0},t.prototype.refCount=function(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0},t.prototype.incRef=function(e){var t=this.dataIdMap.get(e);null!=t&&t.refCount++},t.prototype.floatPrecision=function(){return 32},t.prototype.getMemoryOffset=function(e){return this.dataIdMap.get(e).memoryOffset},t.prototype.dispose=function(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null},t.prototype.memory=function(){return{unreliable:!1}},t.prototype.makeOutput=function(e,t,a,n){var r;if(null==a)r=this.write(null!=n?n:null,e,t);else{var i=this.dataIdNextNumber++;r={id:i},this.dataIdMap.set(r,{id:i,memoryOffset:a,shape:e,dtype:t,refCount:1});var s=tfjsCore.util.sizeFromShape(e);this.wasm.tfjs.registerTensor(i,s,a)}return{dataId:r,shape:e,dtype:t}},t.prototype.typedArrayFromHeap=function(e){var t=e.shape,a=e.dtype,n=e.dataId,r=this.wasm.HEAPU8.buffer,i=this.dataIdMap.get(n).memoryOffset,s=tfjsCore.util.sizeFromShape(t);switch(a){case"float32":return new Float32Array(r,i,s);case"int32":return new Int32Array(r,i,s);case"bool":return new Uint8Array(r,i,s);default:throw new Error("Unknown dtype ".concat(a))}},t}(tfjsCore.KernelBackend);function createInstantiateWasmFunc(e){return function(t,a){return tfjsCore.util.fetch(e,{credentials:"same-origin"}).then((function(n){n.ok||t.env.a("failed to load wasm binary file at '".concat(e,"'")),n.arrayBuffer().then((function(e){WebAssembly.instantiate(e,t).then((function(e){a(e.instance,e.module)}))}))})),{}}}function getPathToWasmBinary(e,t,a){if(null!=wasmPath)return wasmPath;var n="tfjs-backend-wasm.wasm";return e&&t?n="tfjs-backend-wasm-threaded-simd.wasm":e&&(n="tfjs-backend-wasm-simd.wasm"),null!=wasmFileMap&&null!=wasmFileMap[n]?wasmFileMap[n]:a+n}function init(){return __awaiter(this,void 0,void 0,(function(){var e,t,a;return __generator(this,(function(n){switch(n.label){case 0:return[4,Promise.all([tfjsCore.env().getAsync("WASM_HAS_SIMD_SUPPORT"),tfjsCore.env().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")])];case 1:return e=__read.apply(void 0,[n.sent(),2]),t=e[0],a=e[1],[2,new Promise((function(e,n){var r={locateFile:function(e,n){if(e.endsWith(".worker.js")){var r=wasmWorkerContents.replace(/\n/g,"\\n"),i=new Blob([r],{type:"application/javascript"});return URL.createObjectURL(i)}return e.endsWith(".wasm")?getPathToWasmBinary(t,a,null!=wasmPathPrefix?wasmPathPrefix:n):n+e}};customFetch&&(r.instantiateWasm=createInstantiateWasmFunc(getPathToWasmBinary(t,a,null!=wasmPathPrefix?wasmPathPrefix:"")));var i,s=!1;r.onAbort=function(){s||initAborted||(initAborted=!0,n({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},a&&t&&null==wasmPath?(r.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+wasmFactoryThreadedSimd.toString()],{type:"text/javascript"}),i=wasmFactoryThreadedSimd(r)):i=wasmFactory(r),i.then((function(t){s=!0,initAborted=!1,t.tfjs={init:t.cwrap("init",null,[]),initWithThreadsCount:t.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:t.cwrap("get_threads_count","number",[]),registerTensor:t.cwrap("register_tensor",null,["number","number","number"]),disposeData:t.cwrap("dispose_data",null,["number"]),dispose:t.cwrap("dispose",null,[])},e({wasm:t})})).catch(n)}))]}}))}))}function typedArrayFromBuffer(e,t){switch(t){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error("Unknown dtype ".concat(t))}}var wasmBinaryNames=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"],wasmPath=null,wasmPathPrefix=null,wasmFileMap={},initAborted=!1,customFetch=!1;function setWasmPath(e,t){if(void 0===t&&(t=!1),tfjsCore.deprecationWarn("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),initAborted)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");wasmPath=e,customFetch=t}function setWasmPaths(e,t){if(void 0===t&&(t=!1),initAborted)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)wasmPathPrefix=e;else{wasmFileMap=e;var a=wasmBinaryNames.filter((function(e){return null==wasmFileMap[e]}));if(a.length>0)throw new Error("There were no entries found for the following binaries: "+"".concat(a.join(","),". Please either call setWasmPaths with a ")+"map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.")}customFetch=t}var threadsCount=-1,actualThreadsCount=-1;function setThreadsCount(e){threadsCount=e}function getThreadsCount(){if(-1===actualThreadsCount)throw new Error("WASM backend not initialized.");return actualThreadsCount}var version="4.20.0",WASM_PRIORITY=2;tfjsCore.registerBackend("wasm",(function(){return __awaiter(void 0,void 0,void 0,(function(){var e;return __generator(this,(function(t){switch(t.label){case 0:return[4,init()];case 1:return e=t.sent().wasm,[2,new BackendWasm(e)]}}))}))}),WASM_PRIORITY),exports.BackendWasm=BackendWasm,exports.getThreadsCount=getThreadsCount,exports.setThreadsCount=setThreadsCount,exports.setWasmPath=setWasmPath,exports.setWasmPaths=setWasmPaths,exports.version_wasm=version;