/*! For license information please see tf-backend-wasm.fesm.min.js.LICENSE.txt */
import{_FusedMatMul as e,broadcast_util as t,util as n,Abs as a,Acos as r,Acosh as u,backend_util as s,Add as i,AddN as o,Identity as d,tensor as p,Transpose as l,All as c,Any as m,ArgMax as f,ArgMin as h,Asin as b,Asinh as y,Atan as _,Atan2 as g,Atanh as I,AvgPool as w,AvgPool3D as k,AvgPool3DGrad as M,AvgPoolGrad as S,Reshape as A,BatchMatMul as v,slice_util as x,buffer as F,TensorBuffer as N,Slice as D,BatchToSpaceND as R,Bincount as E,BitwiseAnd as W,BroadcastArgs as P,Cast as O,Ceil as C,ClipByValue as T,Concat as z,Conv2D as H,Conv2DBackpropInput as B,Conv3D as L,Conv3DBackpropFilterV2 as U,Conv3DBackpropInputV2 as j,Cos as G,Cosh as q,CropAndResize as V,Cumprod as $,Cumsum as K,DenseBincount as X,DepthToSpace as Q,DepthwiseConv2dNative as J,Diag as Z,Dilation2D as Y,Dilation2DBackpropFilter as ee,Dilation2DBackpropInput as te,Elu as ne,EluGrad as ae,Equal as re,Erf as ue,Exp as se,ExpandDims as ie,Expm1 as oe,Fill as de,FlipLeftRight as pe,Floor as le,FloorDiv as ce,FusedBatchNorm as me,FusedConv2D as fe,FusedDepthwiseConv2D as he,GatherNd as be,gather_util as ye,GatherV2 as _e,Greater as ge,GreaterEqual as Ie,IsFinite as we,IsInf as ke,IsNan as Me,LeakyRelu as Se,Less as Ae,LessEqual as ve,LinSpace as xe,Log as Fe,Log1p as Ne,LogicalAnd as De,LogicalNot as Re,LogicalOr as Ee,LogicalXor as We,LRN as Pe,LRNGrad as Oe,Max as Ce,Maximum as Te,MaxPool as ze,MaxPool3D as He,MaxPool3DGrad as Be,MaxPoolGrad as Le,MaxPoolWithArgmax as Ue,Mean as je,Min as Ge,Minimum as qe,MirrorPad as Ve,Softmax as $e,Multinomial as Ke,Mod as Xe,Multiply as Qe,Neg as Je,NonMaxSuppressionV3 as Ze,NonMaxSuppressionV4 as Ye,NonMaxSuppressionV5 as et,NotEqual as tt,OneHot as nt,OnesLike as at,Pack as rt,PadV2 as ut,Pow as st,Prelu as it,Prod as ot,Range as dt,RealDiv as pt,Reciprocal as lt,Relu as ct,Relu6 as mt,ResizeBilinear as ft,ResizeBilinearGrad as ht,ResizeNearestNeighbor as bt,ResizeNearestNeighborGrad as yt,Reverse as _t,RotateWithOffset as gt,Round as It,Rsqrt as wt,ScatterNd as kt,scatter_util as Mt,SearchSorted as St,Select as At,Selu as vt,Sigmoid as xt,Sign as Ft,Sin as Nt,Sinh as Dt,Softplus as Rt,SpaceToBatchND as Et,SparseFillEmptyRows as Wt,SparseReshape as Pt,SparseSegmentMean as Ot,SparseSegmentSum as Ct,SparseToDense as Tt,SplitV as zt,Sqrt as Ht,Square as Bt,SquaredDifference as Lt,Step as Ut,StridedSlice as jt,StringNGrams as Gt,StringSplit as qt,StringToHashBucketFast as Vt,Sub as $t,Sum as Kt,Tan as Xt,Tanh as Qt,TensorScatterUpdate as Jt,Tile as Zt,TopK as Yt,Transform as en,Unique as tn,Unpack as nn,ZerosLike as an,registerKernel as rn,env as un,KernelBackend as sn,DataStorage as on,engine as dn,deprecationWarn as pn,registerBackend as ln}from"@tensorflow/tfjs-core";import cn from"fs";import mn from"path";import fn from"perf_hooks";import hn from"os";function bn(e,n){return n.forEach((function(n){n&&"string"!=typeof n&&!Array.isArray(n)&&Object.keys(n).forEach((function(t){if("default"!==t&&!(t in e)){var a=Object.getOwnPropertyDescriptor(n,t);Object.defineProperty(e,t,a.get?a:{enumerable:!0,get:function(){return n[t]}})}}))})),e}var yn,_n;let gn;!function(e){e[e.float32=0]="float32",e[e.int32=1]="int32",e[e.bool=2]="bool",e[e.string=3]="string",e[e.complex64=4]="complex64"}(yn||(yn={})),function(e){e[e.linear=0]="linear",e[e.relu=1]="relu",e[e.relu6=2]="relu6",e[e.prelu=3]="prelu",e[e.leakyrelu=4]="leakyrelu",e[e.sigmoid=5]="sigmoid",e[e.elu=6]="elu"}(_n||(_n={}));const In={kernelName:e,backendName:"wasm",setupFunc:function(n){gn=n.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:a,attrs:r}=e,{a:s,b:u,bias:i,preluActivationWeights:o}=n;if("float32"!==s.dtype||"float32"!==u.dtype)throw new Error("_FusedMatMul for non non-float32 tensors not yet supported.");const{transposeA:d,transposeB:p,activation:l,leakyreluAlpha:c}=r,m=a.dataIdMap.get(s.dataId).id,f=a.dataIdMap.get(u.dataId).id;let h=0;if(null!=i){const e=a.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`_FusedMatMul only supports rank-1 bias but got rank ${e.shape.length}.`);h=e.id}const b=null==o?0:a.dataIdMap.get(o.dataId).id,y=_n[l];if(null==y)throw new Error(`${l} activation not yet supported for FusedConv2D in the wasm backend.`);const g=d?s.shape[2]:s.shape[1],_=p?u.shape[1]:u.shape[2],I=t.assertAndGetBroadcastShape(s.shape.slice(0,-2),u.shape.slice(0,-2)),w=a.makeOutput([...I,g,_],s.dtype),k=a.dataIdMap.get(w.dataId).id,M=new Uint8Array(new Int32Array(s.shape).buffer),S=new Uint8Array(new Int32Array(u.shape).buffer);return gn(m,M,s.shape.length,f,S,u.shape.length,d,p,y,h,b,c||0,k),w}};function wn(e,t){let a;return{kernelName:e,backendName:"wasm",setupFunc:function(n){a=n.wasm.cwrap(e,null,["number","number","number"])},kernelFunc:function(e){const{backend:r,inputs:{x:s}}=e,u=r.dataIdMap.get(s.dataId).id,i=r.makeOutput(s.shape,t||s.dtype),o=r.dataIdMap.get(i.dataId).id;return 0===n.sizeFromShape(i.shape)||a(u,yn[s.dtype],o),i}}}const kn=wn(a),Mn=wn(r),Sn=wn(u);function An(e,t,a){let r;return{kernelName:e,backendName:"wasm",setupFunc:function(n){r=n.wasm.cwrap(e,null,["number","array","number","number","array","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:u}=e,{a:i,b:o}=u,d=t.dataIdMap.get(i.dataId).id,p=t.dataIdMap.get(o.dataId).id,l=null!=a?a:i.dtype,c=s.assertAndGetBroadcastShape(i.shape,o.shape),m=t.makeOutput(c,l);if(0===n.sizeFromShape(c))return m;const f=new Uint8Array(new Int32Array(i.shape).buffer),h=new Uint8Array(new Int32Array(o.shape).buffer),b=t.dataIdMap.get(m.dataId).id;return r(d,f,i.shape.length,p,h,o.shape.length,yn[i.dtype],b),m}}}const vn=An(i);let xn;const Fn={kernelName:o,backendName:"wasm",setupFunc:function(e){xn=e.wasm.cwrap(o,null,["array","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:a}=e,r=a.makeOutput(t[0].shape,t[0].dtype);if(0===n.sizeFromShape(r.shape))return r;const s=t.map((e=>a.dataIdMap.get(e.dataId).id)),u=new Uint8Array(new Int32Array(s).buffer),i=a.dataIdMap.get(r.dataId).id;return xn(u,s.length,yn[r.dtype],i),r}};function Nn(e){const{inputs:{x:n},backend:t}=e;if("string"===n.dtype)return p(t.readSync(n.dataId),n.shape,n.dtype);const a=t.makeOutput(n.shape,n.dtype),r=t.typedArrayFromHeap(n);return t.typedArrayFromHeap(a).set(r),a}const Dn={kernelName:d,backendName:"wasm",kernelFunc:Nn};let Rn;function En(e){const{inputs:n,backend:t,attrs:a}=e,[r,s]=function(e,n){const t=[],a=[];for(let r=0;r<e.length;++r)1!==e[r]&&t.push(e[r]),1!==e[n[r]]&&a.push(n[r]);for(let e=0;e<a.length;++e){let n=-1;for(let t=0;t<a.length;++t)a[t]>=e&&(-1===n||a[n]>a[t])&&(n=t);a[n]=e}return[t,a]}(n.x.shape,a.perm);let u=!0;for(let e=0;e<s.length;e++)s[e]!==e&&(u=!1);const i=function(e,n){const t=new Array(e.length);for(let a=0;a<t.length;a++)t[a]=e[n[a]];return t}(n.x.shape,a.perm),o={dataId:n.x.dataId,shape:r,dtype:n.x.dtype};if(u){const e=Nn({inputs:n,backend:t});return e.shape=i,e}const d=t.makeOutput(i,o.dtype),p=t.dataIdMap.get(o.dataId).id,l=t.dataIdMap.get(d.dataId).id,c=new Uint8Array(new Int32Array(s).buffer),m=new Uint8Array(new Int32Array(o.shape).buffer);return Rn(p,m,o.shape.length,yn[o.dtype],l,c,s.length),d}const Wn={kernelName:l,backendName:"wasm",kernelFunc:En,setupFunc:function(e){Rn=e.wasm.cwrap(l,null,["number","array","number","number","number","array","number"])}};function Pn(e,t,a){const r=e.shape,u=e.shape.length,i=n.parseAxisParam(t,r);let o=i;const d=s.getAxesPermutation(o,u);let p=null,l=!1;if(null!=d){const n=new Array(u);for(let e=0;e<n.length;e++)n[e]=r[d[e]];o=s.getInnerMostAxes(o.length,u),p=En({inputs:{x:e},attrs:{perm:d},backend:a});const t=a.dataIdMap.get(e.dataId).id;a.dataIdMap.get(p.dataId).id!==t&&(l=!0)}return{transposed:p,originalAxes:i,axes:o,inputWasTransposed:l}}let On;const Cn={kernelName:c,backendName:"wasm",setupFunc:function(e){On=e.wasm.cwrap(c,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{axis:u,keepDims:i}=r,{x:o}=a;let d=t.dataIdMap.get(o.dataId).id,p=o;const{transposed:l,axes:c,originalAxes:m,inputWasTransposed:f}=Pn(o,u,t);f&&(p=l,d=t.dataIdMap.get(l.dataId).id);const h=p.shape.length;s.assertAxesAreInnerMostDims("all",c,h);const[b,y]=s.computeOutAndReduceShapes(p.shape,c),g=n.sizeFromShape(y),_=t.makeOutput(b,o.dtype);if(0!==n.sizeFromShape(p.shape)){const e=t.dataIdMap.get(_.dataId).id;On(d,g,e)}if(f&&t.disposeData(l.dataId),i){const e=s.expandShapeToKeepDim(_.shape,m);_.shape=e}return _}};let Tn;const zn={kernelName:m,backendName:"wasm",setupFunc:function(e){Tn=e.wasm.cwrap(m,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{axis:u,keepDims:i}=r,{x:o}=a;let d=t.dataIdMap.get(o.dataId).id,p=o;const{transposed:l,axes:c,originalAxes:m,inputWasTransposed:f}=Pn(o,u,t);f&&(p=l,d=t.dataIdMap.get(l.dataId).id);const h=p.shape.length;s.assertAxesAreInnerMostDims("any",c,h);const[b,y]=s.computeOutAndReduceShapes(p.shape,c),g=n.sizeFromShape(y),_=t.makeOutput(b,o.dtype);if(0!==n.sizeFromShape(p.shape)){const e=t.dataIdMap.get(_.dataId).id;Tn(d,g,e)}if(f&&t.disposeData(l.dataId),i){const e=s.expandShapeToKeepDim(_.shape,m);_.shape=e}return _}};function Hn(e){let t;return{kernelName:e,backendName:"wasm",setupFunc:function(n){t=n.wasm.cwrap(e,null,["number","number","number","number","number"])},kernelFunc:function(e){const{backend:a,inputs:r,attrs:s}=e,{axis:u}=s,{x:i}=r,o=a.dataIdMap.get(i.dataId).id;let d=o,p=i;const{transposed:l,axes:c,inputWasTransposed:m}=Pn(i,u,a);if(m){const e=a.dataIdMap.get(l.dataId).id;e!==o&&(p=l,d=e)}const f=p.shape.slice(0,-1),h=a.makeOutput(f,"int32"),b=a.dataIdMap.get(h.dataId).id,y=n.sizeFromShape(h.shape),g=p.shape[c[0]];return t(d,yn[p.dtype],y,g,b),m&&a.disposeData(l.dataId),h}}}const Bn=Hn(f),Ln=Hn(h),Un=wn(b),jn=wn(y),Gn=wn(_),qn=An(g),Vn=wn(I);let $n;const Kn={kernelName:w,backendName:"wasm",setupFunc:function(e){$n=e.wasm.cwrap(w,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,r=n.x,u=a.dataIdMap.get(r.dataId).id,{filterSize:i,strides:o,pad:d,dimRoundingMode:p}=t,l=s.computePool2DInfo(r.shape,i,o,1,d,p),c=l.filterHeight,m=l.filterWidth,f=l.padInfo.top,h=l.padInfo.right,b=l.padInfo.bottom,y=l.padInfo.left,g=l.strideHeight,_=l.strideWidth,I=l.inChannels;if("channelsLast"!==l.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${l.dataFormat}'. Please use 'channelsLast'.`);if(1!==l.dilationWidth||1!==l.dilationHeight)throw new Error(`was backend only supports average pooling with dilation = [1, 1], got [${l.dilationHeight}, ${l.dilationWidth}].`);const w=a.makeOutput(l.outShape,"float32"),k=a.dataIdMap.get(w.dataId).id;return $n(u,r.shape[0],r.shape[1],r.shape[2],c,m,f,h,b,y,g,_,I,k),w}};let Xn;const Qn={kernelName:k,backendName:"wasm",setupFunc:function(e){Xn=e.wasm.cwrap("AvgPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r}=n,{filterSize:u,strides:i,pad:o,dimRoundingMode:d,dataFormat:p}=a,l=s.computePool3DInfo(r.shape,u,i,1,o,d,p),c=t.makeOutput(l.outShape,r.dtype);return Xn(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(c.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),c}};let Jn;const Zn={kernelName:M,backendName:"wasm",setupFunc:function(e){Jn=e.wasm.cwrap("AvgPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{dy:r,input:u}=n,{filterSize:i,strides:o,pad:d,dimRoundingMode:p}=a,l=s.computePool3DInfo(u.shape,i,o,1,d,p),c=t.makeOutput(u.shape,u.dtype);return Jn(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(c.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left,l.filterDepth,l.filterHeight,l.filterWidth),c}};let Yn;const ea={kernelName:S,backendName:"wasm",setupFunc:function(e){Yn=e.wasm.cwrap("AvgPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{dy:r,input:u}=n,{filterSize:i,strides:o,pad:d}=a,p=s.computePool2DInfo(u.shape,i,o,1,d),l=t.makeOutput(u.shape,u.dtype);return Yn(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(l.dataId).id,p.batchSize,p.inChannels,p.inHeight,p.inWidth,p.outHeight,p.outWidth,p.strideHeight,p.strideWidth,p.dilationHeight,p.dilationWidth,p.effectiveFilterHeight,p.effectiveFilterWidth,p.padInfo.top,p.padInfo.left,p.filterHeight,p.filterWidth),l}};function ta(e){const{inputs:t,attrs:a}=e,{x:r}=t,{shape:s}=a,u=n.sizeFromShape(r.shape),i=n.inferFromImplicitShape(s,u);return n.assert(u===n.sizeFromShape(i),(()=>`new shape: ${i}, old shape: ${r.shape}. New shape and old shape must have the same number of elements.`)),e.backend.incRef(r.dataId),{dataId:r.dataId,shape:i,dtype:r.dtype}}const na={kernelName:A,backendName:"wasm",kernelFunc:ta};let aa;const ra={kernelName:v,backendName:"wasm",setupFunc:function(e){aa=e.wasm.cwrap(v,null,["number","array","number","number","array","number","number","number","number"])},kernelFunc:function(e){const{inputs:a,backend:r,attrs:s}=e,{a:u,b:i}=a,{transposeA:o,transposeB:d}=s;if("float32"!==u.dtype||"float32"!==i.dtype)throw new Error("BatchMatMul for non non-float32 tensors not yet supported.");const p=u.shape.length,l=i.shape.length,c=o?u.shape[p-2]:u.shape[p-1],m=d?i.shape[l-1]:i.shape[l-2],f=o?u.shape[p-1]:u.shape[p-2],h=d?i.shape[l-2]:i.shape[l-1],b=u.shape.slice(0,-2),y=i.shape.slice(0,-2),g=n.sizeFromShape(b),_=n.sizeFromShape(y),I=t.assertAndGetBroadcastShape(u.shape.slice(0,-2),i.shape.slice(0,-2)).concat([f,h]);n.assert(c===m,(()=>`Error in matMul: inner shapes (${c}) and (${m}) of Tensors with shapes ${u.shape} and ${i.shape} and transposeA=${o} and transposeB=${d} must match.`));const w=d?[_,h,m]:[_,m,h],k=ta({inputs:{x:u},backend:r,attrs:{shape:o?[g,c,f]:[g,f,c]}}),M=ta({inputs:{x:i},backend:r,attrs:{shape:w}}),S=r.dataIdMap.get(k.dataId).id,A=r.dataIdMap.get(M.dataId).id,v=o?k.shape[2]:k.shape[1],x=d?M.shape[1]:M.shape[2],F=Math.max(g,_),N=r.makeOutput([F,v,x],k.dtype),D=r.dataIdMap.get(N.dataId).id,R=new Uint8Array(new Int32Array(k.shape).buffer),E=new Uint8Array(new Int32Array(M.shape).buffer);return aa(S,R,k.shape.length,A,E,M.shape.length,o,d,D),r.disposeData(k.dataId),r.disposeData(M.dataId),N.shape=I,N}};function ua(e,t,a,r,u){const i=x.isSliceContinous(r,t,a),o=n.sizeFromShape(a),d=n.computeStrides(r);if(i){const n=x.computeFlatOffset(t,d);return"string"===u?e.slice(n,n+o):e.subarray(n,n+o)}const p="string"===u?s.fromUint8ToStringArray(e):e,l=F(r,u,p),c=F(a,u);for(let e=0;e<c.size;++e){const n=c.indexToLoc(e),a=n.map(((e,n)=>e+t[n]));c.set(l.get(...a),...n)}return"string"===u?s.fromStringArrayToUint8(c.values):c.values}s.RowPartitionType;class sa{constructor(e,t,a,r,s,u){this.separator=n.encodeString(e),this.nGramWidths=t,this.leftPad=n.encodeString(a),this.rightPad=n.encodeString(r),this.padWidth=s,this.preserveShort=u}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const t=this.getPadWidth(n);return Math.max(0,e+2*t-n+1)}createNGrams(e,n,t,a,r,s){for(let u=0;u<r;++u){const i=this.getPadWidth(s),o=Math.max(0,i-u),d=Math.max(0,i-(r-(u+1))),p=s-(o+d),l=n+(o>0?0:u-i);let c=0;c+=o*this.leftPad.length;for(let n=0;n<p;++n)c+=e[l+n].length;c+=d*this.rightPad.length,c+=(o+d+p-1)*this.separator.length,t[a+u]=new Uint8Array(c);const m=t[a+u];let f=0;const h=e=>e.forEach((e=>m[f++]=e));for(let e=0;e<o;++e)h(this.leftPad),h(this.separator);for(let n=0;n<p-1;++n)h(e[l+n]),h(this.separator);if(p>0){h(e[l+p-1]);for(let e=0;e<d;++e)h(this.separator),h(this.rightPad)}else{for(let e=0;e<d-1;++e)h(this.rightPad),h(this.separator);h(this.rightPad)}}}compute(e,t){const a=e.length,r=t.length;if(r>0){let e=t[0];if(0!==e)throw new Error(`First split value must be 0, got ${e}`);for(let n=1;n<r;++n){let r=t[n]>=e;if(r=r&&t[n]<=a,!r)throw new Error(`Invalid split value ${t[n]}, must be in [${e}, ${a}]`);e=t[n]}if(e!==a)throw new Error(`Last split value must be data size. Expected ${a}, got ${e}`)}const s=r-1,u=n.getArrayFromDType("int32",r);if(0===a||0===r){const e=new Array(a);for(let e=0;e<=s;++e)u[e]=0;return[e,u]}u[0]=0;for(let e=1;e<=s;++e){const n=t[e]-t[e-1];let a=0;this.nGramWidths.forEach((e=>{a+=this.getNumNGrams(n,e)})),this.preserveShort&&n>0&&0===a&&(a=1),u[e]=u[e-1]+a}const i=new Array(u[s]);for(let n=0;n<s;++n){const a=t[n];let r=u[n];if(this.nGramWidths.forEach((s=>{const u=t[n+1]-t[n],o=this.getNumNGrams(u,s);this.createNGrams(e,a,i,r,o,s),r+=o})),this.preserveShort&&r===u[n]){const s=t[n+1]-t[n];if(0===s)continue;const u=s+2*this.padWidth,o=1;this.createNGrams(e,a,i,r,o,u)}}return[i,u]}}function ia(e,n,t,a){if(!e.length)return;if(0===n.length){for(let n=0;n<e.length;++n)a.push(e.subarray(n,n+1));return}if(1===n.length){const r=n[0];let s=e.indexOf(r);for(;-1!==s;){const n=e.subarray(0,s);t&&0===n.length||a.push(n),s=(e=e.subarray(s+1)).indexOf(r)}return void(t&&0===e.length||a.push(e))}let r=0;for(let s=0;s<e.length+1;s++)if(s===e.length||-1!==n.indexOf(e[s])){const n=e.subarray(r,s);t&&0===n.length||a.push(n),r=s+1}}function oa(e){const{inputs:{x:t},attrs:{begin:a,size:r},backend:s}=e,[u,i]=x.parseSliceParams(t,a,r),o=x.isSliceContinous(t.shape,u,i),d=s.readSync(t.dataId),p=s.makeOutput(i,t.dtype),l=n.computeStrides(t.shape),c=s.dataIdMap.get(p.dataId);if(o){const e=x.computeFlatOffset(u,l);return"string"===t.dtype?c.stringBytes=d.slice(e,e+n.sizeFromShape(i)):s.typedArrayFromHeap(p).set(d.subarray(e,e+n.sizeFromShape(i))),p}if("string"===t.dtype){const e=ua(d,u,i,t.shape,t.dtype);return c.stringBytes=e,p}const m=s.typedArrayFromHeap(p),f=t.shape.length;if(2===f)!function(e,n,t,a,r){let s=0;const u=a[0],i=a[1],o=u+r[0];for(let a=u;a<o;a++){const u=a*n+i;t.set(e.subarray(u,u+r[1]),s),s+=r[1]}}(d,l[0],m,u,i);else if(3===f)!function(e,n,t,a,r,s){let u=0;const i=r[0],o=r[1],d=r[2],p=i+s[0],l=o+s[1];for(let r=i;r<p;r++)for(let i=o;i<l;i++){const o=r*n+i*t+d;a.set(e.subarray(o,o+s[2]),u),u+=s[2]}}(d,l[0],l[1],m,u,i);else if(4===f)!function(e,n,t,a,r,s,u){let i=0;const o=s[0],d=s[1],p=s[2],l=o+u[0],c=d+u[1],m=p+u[2],f=s[3];for(let s=o;s<l;s++)for(let o=d;o<c;o++)for(let d=p;d<m;d++){const p=s*n+o*t+d*a+f;r.set(e.subarray(p,p+u[3]),i),i+=u[3]}}(d,l[0],l[1],l[2],m,u,i);else{const e=ua(d,u,i,t.shape,t.dtype);m.set(e)}return p}const da={kernelName:D,backendName:"wasm",kernelFunc:oa},pa={kernelName:R,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r}=n,{blockShape:u,crops:i}=a,o=u.reduce(((e,n)=>e*n)),d=s.getReshaped(r.shape,u,o),p=s.getPermuted(d.length,u.length),l=s.getReshapedPermuted(r.shape,u,o),c=s.getSliceBeginCoords(i,u.length),m=s.getSliceSize(l,i,u.length),f=ta({inputs:{x:r},backend:t,attrs:{shape:d}}),h=En({inputs:{x:f},backend:t,attrs:{perm:p}}),b=ta({inputs:{x:h},backend:t,attrs:{shape:l}}),y=oa({inputs:{x:b},backend:t,attrs:{begin:c,size:m}});return t.disposeData(f.dataId),t.disposeData(h.dataId),t.disposeData(b.dataId),y}};let la;const ca={kernelName:E,backendName:"wasm",setupFunc:function(e){la=e.wasm.cwrap(E,null,["number","number","boolean","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{x:r,weights:s}=t,{size:u}=a,i=0!==s.shape.reduce(((e,n)=>e*n),1),o=1===r.shape.length?[u]:[r.shape[0],u],d=n.makeOutput(o,s.dtype);function p(e){return n.dataIdMap.get(e.dataId).id}return la(p(r),u,i,p(s),yn[s.dtype],p(d)),d}},ma=An(W),fa={kernelName:P,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t}=e,{s0:a,s1:r}=n,u=t.typedArrayFromHeap(a),i=t.typedArrayFromHeap(r),o=s.assertAndGetBroadcastShape(Array.from(u),Array.from(i));return t.makeOutput([o.length],"int32",void 0,new Int32Array(o))}};function ha(e){const{inputs:{x:n},attrs:{dtype:t},backend:a}=e,r=a.makeOutput(n.shape,t),s=a.typedArrayFromHeap(n);return a.typedArrayFromHeap(r).set(s),r}const ba={kernelName:O,backendName:"wasm",kernelFunc:ha},ya=wn(C);let _a;const ga={kernelName:T,backendName:"wasm",setupFunc:function(e){_a=e.wasm.cwrap(T,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r}=n,{clipValueMin:s,clipValueMax:u}=a,i=t.dataIdMap.get(r.dataId).id,o=t.makeOutput(r.shape,r.dtype),d=t.dataIdMap.get(o.dataId).id;return _a(i,s,u,d),o}};function Ia(e){const{inputs:t,backend:a}=e,r=n.parseAxisParam(e.attrs.axis,t[0].shape)[0],u=t.map((e=>e.shape));s.assertParamsConsistent(u,r);let i=s.computeOutShape(t.map((e=>e.shape)),r);const o=t.filter((e=>n.sizeFromShape(e.shape)>0));if(1===o.length)return Nn({inputs:{x:o[0]},backend:a});const d=a.makeOutput(i,t[0].dtype);if(0===n.sizeFromShape(i))return d;if("string"===o[0].dtype){const e=o.map((e=>{const t=n.sizeFromShape(e.shape.slice(r));return ta({inputs:{x:e},backend:a,attrs:{shape:[-1,t]}})})),u=e.map((e=>({vals:a.readSync(e.dataId),shape:e.shape})));i=s.computeOutShape(e.map((e=>e.shape)),1);const p=1===e[0].shape[0],l=function(e,t,a,r){const u=n.getArrayFromDType(a,n.sizeFromShape(t));if(r&&"string"!==a){let t=0;e.forEach((e=>{const a=n.sizeFromShape(e.shape);u.set(e.vals,t),t+=a}))}else{let n=0;e.forEach((e=>{const r="string"===a?s.fromUint8ToStringArray(e.vals):e.vals;let i=0;for(let a=0;a<e.shape[0];++a){const s=a*t[1]+n;for(let n=0;n<e.shape[1];++n)u[s+n]=r[i++]}n+=e.shape[1]}))}return u}(u,i,t[0].dtype,p),c=s.computeOutShape(o.map((e=>e.shape)),r);return d.shape=c,a.dataIdMap.get(d.dataId).stringBytes=s.fromStringArrayToUint8(l),e.forEach((e=>a.disposeData(e.dataId))),d}const p=n.sizeFromShape(o[0].shape.slice(0,r));let l=0;const c=o.map((e=>{const t=n.sizeFromShape(e.shape.slice(r));return l+=t,t})),m=o.map((e=>a.typedArrayFromHeap(e))),f=a.typedArrayFromHeap(d);for(let e=0;e<p;e++){let n=e*l;for(let t=0;t<m.length;t++){const a=c[t],r=e*a,s=m[t].subarray(r,r+a);f.set(s,n),n+=a}}return d}const wa={kernelName:z,backendName:"wasm",kernelFunc:Ia};let ka;const Ma={kernelName:H,backendName:"wasm",setupFunc:function(e){ka=e.wasm.cwrap(H,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,{x:r,filter:u}=n,i=a.dataIdMap.get(r.dataId).id,o=a.dataIdMap.get(u.dataId).id,{strides:d,dilations:p,pad:l,dimRoundingMode:c,dataFormat:m}=t,f=s.convertConv2DDataFormat(m),h=s.computeConv2DInfo(r.shape,u.shape,d,p,l,c,!1,f),b=h.filterHeight,y=h.filterWidth,g=h.padInfo.top,_=h.padInfo.right,I=h.padInfo.bottom,w=h.padInfo.left,k=h.dilationHeight,M=h.dilationWidth,S=h.strideHeight,A=h.strideWidth,v=h.inChannels,x=h.outChannels,F="SAME"===h.padInfo.type?1:0;if("channelsLast"!==h.dataFormat)throw new Error(`wasm backend Conv2D does not support dataFormat:'${h.dataFormat}'. Please use 'channelsLast'.`);const N=a.makeOutput(h.outShape,"float32"),D=a.dataIdMap.get(N.dataId).id;return ka(i,r.shape[0],r.shape[1],r.shape[2],o,b,y,g,_,I,w,F,k,M,S,A,v,x,D),N}};let Sa;const Aa={kernelName:B,backendName:"wasm",setupFunc:function(e){Sa=e.wasm.cwrap(B,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{dy:u,filter:i}=a,{strides:o,pad:d,dataFormat:p,dimRoundingMode:l,inputShape:c}=r,m=s.convertConv2DDataFormat(p),f=s.computeConv2DInfo(c,i.shape,o,1,d,l,!1,m),{batchSize:h,filterHeight:b,filterWidth:y,inChannels:g,inHeight:_,inWidth:I,outChannels:w,outHeight:k,outWidth:M,strideHeight:S,strideWidth:A}=f,v=b-1-f.padInfo.top,x=y-1-f.padInfo.left,F="channelsLast"===f.dataFormat,N=n.computeStrides(f.inShape),D=n.computeStrides(u.shape),[R,E,P]=n.computeStrides(i.shape),W=N[0],O=F?N[1]:N[2],C=F?N[2]:1,T=F?1:N[1],z=D[0],H=F?D[1]:D[2],B=F?D[2]:1,L=F?1:D[1],U=t.makeOutput(f.inShape,"float32"),G=t.dataIdMap.get(U.dataId).id,j=t.dataIdMap.get(u.dataId).id,q=t.dataIdMap.get(i.dataId).id;return Sa(j,q,h,b,y,_,I,g,k,M,w,S,A,v,x,R,E,P,W,O,C,T,z,H,B,L,G),U}};let va;const xa={kernelName:L,backendName:"wasm",setupFunc:function(e){va=e.wasm.cwrap(L,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r,filter:u}=n,{strides:i,pad:o,dilations:d}=a;if("float32"!==r.dtype)throw new Error(`Tensor x must have dtype float32, got ${r.dtype}`);if("float32"!==u.dtype)throw new Error(`Tensor filter must have dtype float32, got ${u.dtype}`);const p=s.computeConv3DInfo(r.shape,u.shape,i,d,o),l=t.makeOutput(p.outShape,r.dtype);return va(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(l.dataId).id,p.batchSize,p.inDepth,p.inHeight,p.inWidth,p.inChannels,p.outDepth,p.outHeight,p.outWidth,p.outChannels,p.strideDepth,p.strideHeight,p.strideWidth,p.dilationDepth,p.dilationHeight,p.dilationWidth,p.filterDepth,p.filterHeight,p.filterWidth,p.padInfo.front,p.padInfo.top,p.padInfo.left),l}};let Fa;const Na={kernelName:U,backendName:"wasm",setupFunc:function(e){Fa=e.wasm.cwrap(U,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r,dy:u}=n,{strides:i,pad:o,filterShape:d}=a;if("float32"!==r.dtype)throw new Error(`Tensor dy must have dtype float32, got ${r.dtype}`);if("float32"!==u.dtype)throw new Error(`Tensor filter must have dtype float32, got ${u.dtype}`);const p=s.computeConv3DInfo(r.shape,d,i,1,o),l=t.makeOutput(p.filterShape,u.dtype);return Fa(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(l.dataId).id,p.batchSize,p.inDepth,p.inHeight,p.inWidth,p.inChannels,p.outDepth,p.outHeight,p.outWidth,p.outChannels,p.strideDepth,p.strideHeight,p.strideWidth,p.dilationDepth,p.dilationHeight,p.dilationWidth,p.filterDepth,p.filterHeight,p.filterWidth,p.padInfo.front,p.padInfo.top,p.padInfo.left),l}};let Da;const Ra={kernelName:j,backendName:"wasm",setupFunc:function(e){Da=e.wasm.cwrap(j,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{dy:r,filter:u}=n,{pad:i,strides:o,inputShape:d}=a;if("float32"!==r.dtype)throw new Error(`Tensor dy must have dtype float32, got ${r.dtype}`);if("float32"!==u.dtype)throw new Error(`Tensor filter must have dtype float32, got ${u.dtype}`);const p=s.computeConv3DInfo(d,u.shape,o,1,i),l=t.makeOutput(p.inShape,r.dtype);return Da(t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(l.dataId).id,p.batchSize,p.inDepth,p.inHeight,p.inWidth,p.inChannels,p.outDepth,p.outHeight,p.outWidth,p.outChannels,p.strideDepth,p.strideHeight,p.strideWidth,p.dilationDepth,p.dilationHeight,p.dilationWidth,p.filterDepth,p.filterHeight,p.filterWidth,p.padInfo.front,p.padInfo.top,p.padInfo.left),l}},Ea=wn(G),Wa=wn(q);var Pa;let Oa;!function(e){e[e.bilinear=0]="bilinear",e[e.nearest=1]="nearest"}(Pa||(Pa={}));const Ca={kernelName:V,backendName:"wasm",setupFunc:function(e){Oa=e.wasm.cwrap(V,null,["number","number","number","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{method:r,extrapolationValue:s,cropSize:u}=a,{image:i,boxes:o,boxInd:d}=t,p=o.shape[0],[l,c]=u,m=[p,l,c,i.shape[3]];let f,h=n.dataIdMap.get(i.dataId);"float32"!==i.dtype&&(f=ha({backend:n,inputs:{x:i},attrs:{dtype:"float32"}}),h=n.dataIdMap.get(f.dataId));const b=h.id,y=n.dataIdMap.get(o.dataId).id,g=n.dataIdMap.get(d.dataId).id,_=n.makeOutput(m,"float32"),I=n.dataIdMap.get(_.dataId).id,w=new Uint8Array(new Int32Array(i.shape).buffer);return Oa(b,y,g,p,w,l,c,Pa[r],s,I),null!=f&&n.disposeData(f.dataId),_}};let Ta;const za={kernelName:$,backendName:"wasm",setupFunc:function(e){Ta=e.wasm.cwrap($,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:a,attrs:r}=e,{x:u}=t,{axis:i,exclusive:o,reverse:d}=r,p=u.shape.length;n.assert("float32"===u.dtype||"int32"===u.dtype,(()=>`cumprod does not support ${u.dtype} tensors in the WASM backend`));const l=s.getAxesPermutation([i],p);let c=u;null!==l&&(c=En({inputs:{x:u},attrs:{perm:l},backend:a}));const m=s.getInnerMostAxes(1,p)[0];s.assertAxesAreInnerMostDims("cumprod",[m],p);const f=a.makeOutput(c.shape,c.dtype),h=c.shape[m],b=a.dataIdMap.get(c.dataId).id,y=a.dataIdMap.get(f.dataId).id;Ta(b,o?1:0,d?1:0,h,y,yn[u.dtype]);let g=f;return null!==l&&(g=En({inputs:{x:f},attrs:{perm:s.getUndoAxesPermutation(l)},backend:a}),a.disposeData(c.dataId),a.disposeData(f.dataId)),g}};let Ha;const Ba={kernelName:K,backendName:"wasm",setupFunc:function(e){Ha=e.wasm.cwrap(K,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:a,attrs:r}=e,{x:u}=t,{axis:i,exclusive:o,reverse:d}=r,p=u.shape.length;n.assert("float32"===u.dtype||"int32"===u.dtype,(()=>`cumsum does not support ${u.dtype} tensors in the WASM backend`));const l=s.getAxesPermutation([i],p);let c=u;null!==l&&(c=En({inputs:{x:u},attrs:{perm:l},backend:a}));const m=s.getInnerMostAxes(1,p)[0];s.assertAxesAreInnerMostDims("cumsum",[m],p);const f=a.makeOutput(c.shape,c.dtype),h=c.shape[m],b=a.dataIdMap.get(c.dataId).id,y=a.dataIdMap.get(f.dataId).id;Ha(b,o?1:0,d?1:0,h,y,yn[u.dtype]);let g=f;return null!==l&&(g=En({inputs:{x:f},attrs:{perm:s.getUndoAxesPermutation(l)},backend:a}),a.disposeData(c.dataId),a.disposeData(f.dataId)),g}};let La;const Ua={kernelName:X,backendName:"wasm",setupFunc:function(e){La=e.wasm.cwrap("DenseBincount",null,["number","array","number","number","boolean","number","number","boolean","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{x:r,weights:s}=t,{size:u,binaryOutput:i}=a,o=0!==s.shape.reduce(((e,n)=>e*n),1),d=1===r.shape.length?[u]:[r.shape[0],u],p=n.makeOutput(d,s.dtype);function l(e){return n.dataIdMap.get(e.dataId).id}return La(l(r),new Uint8Array(new Int32Array(r.shape).buffer),r.shape.length,u,o,l(s),yn[s.dtype],i,l(p)),p}};let ja;const Ga={kernelName:Q,backendName:"wasm",setupFunc:function(e){ja=e.wasm.cwrap(Q,null,["number","number","number","array","number","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{x:s}=a,{blockSize:u,dataFormat:i}=r,o=s.shape[0],d=("NHWC"===i?s.shape[1]:s.shape[2])*u,p=("NHWC"===i?s.shape[2]:s.shape[3])*u,l=("NHWC"===i?s.shape[3]:s.shape[1])/(u*u),c="NHWC"===i?[o,d,p,l]:[o,l,d,p],m=t.makeOutput(c,"float32"),f=t.dataIdMap.get(s.dataId).id,h=new Uint8Array(new Int32Array(n.computeStrides(s.shape)).buffer),b=new Uint8Array(new Int32Array(c).buffer),y=new Uint8Array(new Int32Array(n.computeStrides(c)).buffer),g=t.dataIdMap.get(m.dataId).id;return ja(f,u,"NHWC"===i?1:0,h,s.shape.length-1,b,y,c.length,g),m}};let qa;const Va={kernelName:J,backendName:"wasm",setupFunc:function(e){qa=e.wasm.cwrap(J,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,{x:r,filter:u}=n,i=a.dataIdMap.get(r.dataId).id,o=a.dataIdMap.get(u.dataId).id,{strides:d,dilations:p,pad:l,dimRoundingMode:c}=t,m=null==p?[1,1]:p,f=s.computeConv2DInfo(r.shape,u.shape,d,m,l,c,!0),h=f.filterHeight,b=f.filterWidth,y=f.padInfo.top,g=f.padInfo.right,_=f.padInfo.bottom,I=f.padInfo.left,w=f.dilationHeight,k=f.dilationWidth,M=f.strideHeight,S=f.strideWidth,A=f.inChannels,v=f.outChannels,x="SAME"===f.padInfo.type?1:0;if("channelsLast"!==f.dataFormat)throw new Error(`wasm backend DepthwiseConv2dNative does not support dataFormat:'${f.dataFormat}'. Please use 'channelsLast'.`);const F=a.makeOutput(f.outShape,"float32"),N=a.dataIdMap.get(F.dataId).id;return qa(i,r.shape[0],r.shape[1],r.shape[2],o,h,b,y,g,_,I,x,w,k,M,S,A,v,N),F}};let $a;const Ka={kernelName:Z,backendName:"wasm",setupFunc:function(e){$a=e.wasm.cwrap("Diag",null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:a}=e,{x:r}=t,s=n.sizeFromShape(r.shape),u=a.makeOutput([...r.shape,...r.shape],r.dtype);return $a(a.dataIdMap.get(r.dataId).id,yn[r.dtype],s,a.dataIdMap.get(u.dataId).id),u}};let Xa;const Qa={kernelName:Y,backendName:"wasm",setupFunc:function(e){Xa=e.wasm.cwrap(Y,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r,filter:u}=n,{strides:i,pad:o,dilations:d}=a;if(r.dtype!==u.dtype)throw new Error(`Dilation2D error: x must have the same dtype as filter. Got ${r.dtype} and ${u.dtype}`);const p=s.computeDilation2DInfo(r.shape,u.shape,i,o,"NHWC",d),l=t.makeOutput(p.outShape,r.dtype);return Xa(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(l.dataId).id,yn[r.dtype],p.batchSize,p.inChannels,p.inHeight,p.inWidth,p.outHeight,p.outWidth,p.strideHeight,p.strideWidth,p.dilationHeight,p.dilationWidth,p.filterHeight,p.filterWidth,p.padInfo.top,p.padInfo.left),l}};let Ja;const Za={kernelName:ee,backendName:"wasm",setupFunc:function(e){Ja=e.wasm.cwrap(ee,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r,filter:u,dy:i}=n,{strides:o,pad:d,dilations:p}=a;if(r.dtype!==u.dtype||r.dtype!==i.dtype)throw new Error(`Dilation2DBackpropFilter error: x must have the same dtype as filter and dy. Got ${r.dtype}, ${u.dtype}, and ${i.dtype}`);const l=s.computeDilation2DInfo(r.shape,u.shape,o,d,"NHWC",p),c=t.makeOutput(u.shape,u.dtype);return Ja(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(c.dataId).id,yn[r.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),c}};let Ya;const er={kernelName:te,backendName:"wasm",setupFunc:function(e){Ya=e.wasm.cwrap(te,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r,filter:u,dy:i}=n,{strides:o,pad:d,dilations:p}=a;if(r.dtype!==u.dtype||r.dtype!==i.dtype)throw new Error(`Dilation2DBackpropInput error: x must have the same dtype as filter and dy. Got ${r.dtype}, ${u.dtype}, and ${i.dtype}`);const l=s.computeDilation2DInfo(r.shape,u.shape,o,d,"NHWC",p),c=t.makeOutput(r.shape,r.dtype);return Ya(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(i.dataId).id,t.dataIdMap.get(c.dataId).id,yn[r.dtype],l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.filterHeight,l.filterWidth,l.padInfo.top,l.padInfo.left),c}},tr=wn(ne);let nr;const ar={kernelName:ae,backendName:"wasm",setupFunc:function(e){nr=e.wasm.cwrap(ae,null,["number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t}=e,{dy:a,y:r}=n,s=t.makeOutput(r.shape,"float32"),u=e=>t.dataIdMap.get(e.dataId).id;return nr(u(r),u(a),u(s)),s}},rr=An(re,0,"bool"),ur=wn(ue),sr=wn(se,"float32");function ir(e){const{inputs:t,attrs:a,backend:r}=e,{input:s}=t,{dim:u}=a,i=s.shape.length,o=s.shape.slice();let d=u;return u<0&&(n.assert(-(i+1)<=u,(()=>`Axis must be in the interval [${-(i+1)}, ${i}]`)),d=i+u+1),o.splice(d,0,1),ta({inputs:{x:s},backend:r,attrs:{shape:o}})}const or={kernelName:ie,backendName:"wasm",kernelFunc:ir},dr=wn(oe,"float32");function pr(e){const{attrs:{shape:t,value:a},backend:r}=e;let{attrs:{dtype:s}}=e;s=s||n.inferDtype(a);const u=r.makeOutput(t,s);return r.typedArrayFromHeap(u).fill(a),u}const lr={kernelName:de,backendName:"wasm",kernelFunc:pr};let cr;const mr={kernelName:pe,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t}=e,{image:a}=n,r=t.makeOutput(a.shape,a.dtype),s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(r.dataId).id,[i,o,d,p]=a.shape;return cr(s,i,o,d,p,u),r},setupFunc:function(e){cr=e.wasm.cwrap(pe,null,["number","number","number","number","number","number"])}},fr=wn(le),hr=An(ce);let br;const yr={kernelName:me,backendName:"wasm",setupFunc:function(e){br=e.wasm.cwrap(me,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{varianceEpsilon:s}=r,{x:u,mean:i,variance:o,offset:d,scale:p}=a,l=t.dataIdMap.get(u.dataId).id,c=t.dataIdMap.get(i.dataId).id,m=t.dataIdMap.get(o.dataId).id,f=null!=d?t.dataIdMap.get(d.dataId).id:0,h=null!=p?t.dataIdMap.get(p.dataId).id:0,b=t.makeOutput(u.shape,u.dtype);if(0===n.sizeFromShape(u.shape))return b;const y=t.dataIdMap.get(b.dataId).id;return br(l,c,m,f,h,s,y),b}};let _r;const gr={kernelName:fe,backendName:"wasm",setupFunc:function(e){_r=e.wasm.cwrap(fe,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,{x:r,filter:u,bias:i,preluActivationWeights:o}=n,{strides:d,pad:p,dilations:l,dataFormat:c,dimRoundingMode:m,activation:f,leakyreluAlpha:h}=t,b=s.computeConv2DInfo(r.shape,u.shape,d,l,p,m),y=_n[f];if(null==y)throw new Error(`${f} activation not yet supported for FusedConv2D in the wasm backend.`);const g=a.dataIdMap.get(r.dataId).id,_=a.dataIdMap.get(u.dataId).id,I=b.outChannels;let w=0;if(null!=i){const e=a.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`FusedConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==I)throw new Error(`FusedConv2D bias shape (${e.shape}) does not match the number of output channels (${I})`);w=e.id}const k=b.filterHeight,M=b.filterWidth,S=b.padInfo.top,A=b.padInfo.right,v=b.padInfo.bottom,x=b.padInfo.left,F=b.dilationHeight,N=b.dilationWidth,D=b.strideHeight,R=b.strideWidth,E=b.inChannels,P="SAME"===b.padInfo.type?1:0,W=b.batchSize,O=b.inHeight,C=b.inWidth;if("NHWC"!==c)throw new Error(`wasm backend FusedConv2D does not support dataFormat:'${c}'. Please use 'NHWC'.`);const T=a.makeOutput(b.outShape,"float32"),z=a.dataIdMap.get(T.dataId).id,H=null==o?0:a.dataIdMap.get(o.dataId).id;return _r(g,W,O,C,_,k,M,w,S,A,v,x,P,F,N,D,R,E,I,y,H,h||0,z),T}};let Ir;const wr={kernelName:he,backendName:"wasm",setupFunc:function(e){Ir=e.wasm.cwrap(he,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,attrs:t,backend:a}=e,{x:r,filter:u,bias:i,preluActivationWeights:o}=n,{strides:d,pad:p,dilations:l,dataFormat:c,dimRoundingMode:m,activation:f,leakyreluAlpha:h}=t,b=s.computeConv2DInfo(r.shape,u.shape,d,l,p,m,!0),y=_n[f];if(null==y)throw new Error(`${f} activation not yet supported for FusedDepthwiseConv2D in the wasm backend.`);const g=a.dataIdMap.get(r.dataId).id,_=a.dataIdMap.get(u.dataId).id,I=b.outChannels;let w=0;if(null!=i){const e=a.dataIdMap.get(i.dataId);if(1!==e.shape.length)throw new Error(`FusedDepthwiseConv2D only supports rank-1 bias but got rank ${e.shape.length}.`);if(e.shape[0]!==I)throw new Error(`FusedDepthwiseConv2D bias shape (${e.shape}) does not match the number of output channels (${I})`);w=e.id}const k=b.filterHeight,M=b.filterWidth,S=b.padInfo.top,A=b.padInfo.right,v=b.padInfo.bottom,x=b.padInfo.left,F=b.dilationHeight,N=b.dilationWidth,D=b.strideHeight,R=b.strideWidth,E=b.inChannels,P="SAME"===b.padInfo.type?1:0,W=b.batchSize,O=b.inHeight,C=b.inWidth;if("NHWC"!==c)throw new Error(`wasm backend FusedDepthwiseConv2D does not support dataFormat:'${c}'. Please use 'NHWC'.`);const T=a.makeOutput(b.outShape,"float32"),z=a.dataIdMap.get(T.dataId).id,H=null==o?0:a.dataIdMap.get(o.dataId).id;return Ir(g,W,O,C,_,k,M,w,S,A,v,x,P,F,N,D,R,E,I,y,H,h||0,z),T}};let kr;const Mr={kernelName:be,backendName:"wasm",setupFunc:function(e){kr=e.wasm.cwrap(be,null,["number","number","number","number","number","number","array","number"])},kernelFunc:function(e){const{backend:n,inputs:t}=e,{params:a,indices:r}=t,[s,u,i,o]=ye.prepareAndValidate(a,r),d=n.makeOutput(s,a.dtype);if(0===u)return d;const p=r.shape,l=p[p.length-1],c=n.dataIdMap.get(a.dataId).id,m=n.dataIdMap.get(r.dataId).id,f=new Uint8Array(new Int32Array(o).buffer),h=n.dataIdMap.get(d.dataId).id;return kr(c,yn[a.dtype],m,u,l,i,f,h),d}};let Sr;const Ar={kernelName:_e,backendName:"wasm",setupFunc:function(e){Sr=e.wasm.cwrap("Gather",null,["number","number","array","number","number","number","array","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{x:u,indices:i}=a,{axis:o,batchDims:d}=r,p=n.parseAxisParam(o,u.shape)[0],l=t.readSync(i.dataId),c=u.shape[p];for(let e=0;e<l.length;++e){const t=l[e];n.assert(t<=c-1&&t>=0,(()=>`GatherV2: the index value ${t} is not in [0, ${c-1}]`))}const m=s.segment_util.collectGatherOpShapeInfo(u,i,p,d),f=ta({inputs:{x:u},attrs:{shape:[m.batchSize,m.outerSize,m.dimSize,m.sliceSize]},backend:t}),h=n.sizeFromShape(i.shape),b=ta({inputs:{x:i},attrs:{shape:[m.batchSize,h/m.batchSize]},backend:t}),y=[m.batchSize,m.outerSize,h/m.batchSize,m.sliceSize],g=t.makeOutput(y,u.dtype);if(0===n.sizeFromShape(u.shape))return g;const _=f.shape.length-1,I=t.dataIdMap.get(f.dataId).id,w=t.dataIdMap.get(b.dataId).id,k=t.dataIdMap.get(g.dataId).id,M=new Uint8Array(new Int32Array(n.computeStrides(f.shape)).buffer),S=new Uint8Array(new Int32Array(n.computeStrides(y)).buffer);return Sr(I,yn[u.dtype],M,_,w,m.batchSize,S,k),t.disposeData(f.dataId),t.disposeData(b.dataId),g.shape=m.outputShape,g}},vr=An(ge,0,"bool"),xr=An(Ie,0,"bool"),Fr=wn(we,"bool"),Nr=wn(ke,"bool"),Dr=wn(Me,"bool");let Rr;const Er={kernelName:Se,backendName:"wasm",setupFunc:function(e){Rr=e.wasm.cwrap(Se,null,["number","number","number","number"])},kernelFunc:function(e){const{inputs:{x:t},attrs:{alpha:a},backend:r}=e,s=r.dataIdMap.get(t.dataId).id,u=r.makeOutput(t.shape,"float32");if(0!==n.sizeFromShape(t.shape)){const e=r.dataIdMap.get(u.dataId).id;Rr(s,yn[t.dtype],a,e)}return u}},Wr=An(Ae,0,"bool"),Pr=An(ve,0,"bool");let Or;const Cr={kernelName:xe,backendName:"wasm",setupFunc:function(e){Or=e.wasm.cwrap(xe,null,["number","number","number","number"])},kernelFunc:function(e){const{attrs:n,backend:t}=e,{start:a,stop:r,num:s}=n,u=Math.floor(s),i=t.makeOutput([u],"float32");return Or(t.dataIdMap.get(i.dataId).id,a,r,u),i}},Tr=wn(Fe),zr=wn(Ne),Hr=An(De,0,"bool"),Br=wn(Re),Lr=An(Ee,0,"bool"),Ur=An(We,0,"bool");let jr;const Gr={kernelName:Pe,backendName:"wasm",setupFunc:function(e){jr=e.wasm.cwrap(Pe,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r}=n,{depthRadius:s,bias:u,alpha:i,beta:o}=a;if("float32"!==r.dtype)throw new Error("LRN error: x must have dtype float32");const d=t.makeOutput(r.shape,r.dtype);return jr(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(d.dataId).id,r.shape[3],s,u,i,o),d}};let qr;const Vr={kernelName:Oe,backendName:"wasm",setupFunc:function(e){qr=e.wasm.cwrap(Oe,null,["number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r,y:s,dy:u}=n,{depthRadius:i,bias:o,alpha:d,beta:p}=a;if("float32"!==r.dtype||"float32"!==s.dtype||"float32"!==u.dtype)throw new Error("LRNGrad error: x, y, and dy must have dtype float32");const l=t.makeOutput(r.shape,r.dtype);return qr(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(s.dataId).id,t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(l.dataId).id,u.shape[3],i,o,d,p),l}};let $r;const Kr={kernelName:Ce,backendName:"wasm",setupFunc:function(e){$r=e.wasm.cwrap(Ce,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{reductionIndices:u,keepDims:i}=r,{x:o}=a;let d=t.dataIdMap.get(o.dataId).id,p=o;const{transposed:l,axes:c,originalAxes:m,inputWasTransposed:f}=Pn(o,u,t);f&&(p=l,d=t.dataIdMap.get(l.dataId).id);const h=p.shape.length;s.assertAxesAreInnerMostDims("max",c,h);const[b,y]=s.computeOutAndReduceShapes(p.shape,c),g=n.sizeFromShape(y),_=t.makeOutput(b,o.dtype);if(0!==n.sizeFromShape(p.shape)){const e=t.dataIdMap.get(_.dataId).id;$r(d,yn[o.dtype],g,e)}if(f&&t.disposeData(l.dataId),i){const e=s.expandShapeToKeepDim(_.shape,m);_.shape=e}return _}},Xr=An(Te);let Qr;const Jr={kernelName:ze,backendName:"wasm",setupFunc:function(e){Qr=e.wasm.cwrap(ze,null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,attrs:a,backend:r}=e,u=t.x,i=r.dataIdMap.get(u.dataId).id;n.assert("float32"===u.dtype,(()=>`Error in MaxPool: only float32 input is supported. Got ${u.dtype}.`));const{filterSize:o,strides:d,pad:p,dimRoundingMode:l}=a,c=s.computePool2DInfo(u.shape,o,d,1,p,l),m=c.filterHeight,f=c.filterWidth,h=c.padInfo.top,b=c.padInfo.right,y=c.padInfo.bottom,g=c.padInfo.left,_=c.dilationHeight,I=c.dilationWidth,w=c.strideHeight,k=c.strideWidth,M=c.inChannels,S=c.outChannels;if("channelsLast"!==c.dataFormat)throw new Error(`wasm backend does not support dataFormat:'${c.dataFormat}'. Please use 'channelsLast'.`);const A=r.makeOutput(c.outShape,"float32"),v=r.dataIdMap.get(A.dataId).id;return Qr(i,u.shape[0],u.shape[1],u.shape[2],m,f,h,b,y,g,_,I,w,k,M,S,v),A}};let Zr;const Yr={kernelName:He,backendName:"wasm",setupFunc:function(e){Zr=e.wasm.cwrap("MaxPool3D",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r}=n,{filterSize:u,strides:i,pad:o,dimRoundingMode:d,dataFormat:p}=a,l=s.computePool3DInfo(r.shape,u,i,1,o,d,p),c=t.makeOutput(l.outShape,r.dtype);return Zr(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(c.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),c}};let eu;const tu={kernelName:Be,backendName:"wasm",setupFunc:function(e){eu=e.wasm.cwrap("MaxPool3DGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{dy:r,input:u}=n,{filterSize:i,strides:o,pad:d,dimRoundingMode:p}=a,l=s.computePool3DInfo(u.shape,i,o,1,d,p),c=t.makeOutput(u.shape,u.dtype);return eu(t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(c.dataId).id,l.batchSize,l.inChannels,l.inDepth,l.inHeight,l.inWidth,l.outDepth,l.outHeight,l.outWidth,l.strideDepth,l.strideHeight,l.strideWidth,l.dilationDepth,l.dilationHeight,l.dilationWidth,l.effectiveFilterDepth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.front,l.padInfo.top,l.padInfo.left),c}};let nu;const au={kernelName:Le,backendName:"wasm",setupFunc:function(e){nu=e.wasm.cwrap("MaxPoolGrad",null,["number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{dy:r,input:u}=n,{filterSize:i,strides:o,pad:d,dimRoundingMode:p}=a,l=s.computePool2DInfo(u.shape,i,o,1,d,p),c=t.makeOutput(u.shape,u.dtype);return nu(t.dataIdMap.get(u.dataId).id,t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(c.dataId).id,l.batchSize,l.inChannels,l.inHeight,l.inWidth,l.outHeight,l.outWidth,l.strideHeight,l.strideWidth,l.dilationHeight,l.dilationWidth,l.effectiveFilterHeight,l.effectiveFilterWidth,l.padInfo.top,l.padInfo.left),c}};let ru;const uu={kernelName:Ue,backendName:"wasm",setupFunc:function(e){ru=e.wasm.cwrap("MaxPoolWithArgmax",null,["number","number","number","number","boolean","number","number","number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:t,backend:a,attrs:r}=e,{x:u}=t,{filterSize:i,strides:o,pad:d,includeBatchInIndex:p}=r;n.assert(4===u.shape.length,(()=>`Error in maxPool: input must be rank 4 but got rank ${u.shape.length}.`));const l=[1,1];n.assert(s.eitherStridesOrDilationsAreOne(o,l),(()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${l}'`));const c=s.computePool2DInfo(u.shape,i,o,[1,1],d),m=a.makeOutput(c.outShape,u.dtype),f=a.makeOutput(c.outShape,"int32");return ru(a.dataIdMap.get(u.dataId).id,a.dataIdMap.get(m.dataId).id,a.dataIdMap.get(f.dataId).id,yn[u.dtype],p,c.batchSize,c.inChannels,c.inHeight,c.inWidth,c.outHeight,c.outWidth,c.strideHeight,c.strideWidth,c.dilationHeight,c.dilationWidth,c.effectiveFilterHeight,c.effectiveFilterWidth,c.padInfo.top,c.padInfo.left),[m,f]}};let su;const iu={kernelName:je,backendName:"wasm",setupFunc:function(e){su=e.wasm.cwrap(je,null,["number, number, number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{axis:u,keepDims:i}=r,{x:o}=a,d=t.dataIdMap.get(o.dataId).id;let p=d,l=o;const{transposed:c,axes:m,originalAxes:f,inputWasTransposed:h}=Pn(o,u,t);let b=m;if(h){const e=t.dataIdMap.get(c.dataId).id;e!==d&&(l=c,p=e,b=s.getInnerMostAxes(b.length,l.shape.length))}s.assertAxesAreInnerMostDims("mean",b,l.shape.length);const[y,g]=s.computeOutAndReduceShapes(l.shape,b),_=n.sizeFromShape(g);let I=l;"float32"!==l.dtype&&(I=ha({backend:t,inputs:{x:l},attrs:{dtype:"float32"}}),p=t.dataIdMap.get(I.dataId).id);const w=t.makeOutput(y,"float32");if(0!==n.sizeFromShape(l.shape)){const e=t.dataIdMap.get(w.dataId).id;su(p,_,e)}if(h&&t.disposeData(c.dataId),i){const e=s.expandShapeToKeepDim(w.shape,f);w.shape=e}return"float32"!==l.dtype&&t.disposeData(I.dataId),w}};let ou;const du={kernelName:Ge,backendName:"wasm",setupFunc:function(e){ou=e.wasm.cwrap(Ge,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{axis:u,keepDims:i}=r,{x:o}=a,d=t.dataIdMap.get(o.dataId).id;let p=d,l=o;const{transposed:c,axes:m,originalAxes:f,inputWasTransposed:h}=Pn(o,u,t);if(h){const e=t.dataIdMap.get(c.dataId).id;e!==d&&(l=c,p=e)}const b=l.shape.length;s.assertAxesAreInnerMostDims("min",m,b);const[y,g]=s.computeOutAndReduceShapes(l.shape,m),_=n.sizeFromShape(g),I=t.makeOutput(y,l.dtype);if(0!==n.sizeFromShape(l.shape)){const e=t.dataIdMap.get(I.dataId).id;ou(p,yn[o.dtype],_,e)}if(h&&t.disposeData(c.dataId),i){const e=s.expandShapeToKeepDim(I.shape,f);I.shape=e}return I}},pu=An(qe);var lu;let cu;!function(e){e[e.reflect=0]="reflect",e[e.symmetric=1]="symmetric"}(lu||(lu={}));const mu={kernelName:Ve,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:t,attrs:{paddings:a,mode:r}}=e,s=a.map(((e,t)=>e[0]+n.shape[t]+e[1])),u=t.dataIdMap.get(n.dataId).id,i=t.makeOutput(s,n.dtype),o=t.dataIdMap.get(i.dataId).id,d=new Uint8Array(new Int32Array(n.shape).buffer),p=a.map((e=>e[0])),l=a.map((e=>e[1])),c=new Uint8Array(new Int32Array(p).buffer),m=new Uint8Array(new Int32Array(l).buffer);return cu(u,d,n.shape.length,yn[n.dtype],c,m,lu[r],o),i},setupFunc:function(e){cu=e.wasm.cwrap(Ve,null,["number","array","number","number","array","array","number","number"])}};let fu;function hu(e){const{backend:t,inputs:{logits:a},attrs:{dim:r}}=e,s=t.dataIdMap.get(a.dataId).id,u=t.makeOutput(a.shape,a.dtype),i=t.dataIdMap.get(u.dataId).id,o=a.shape[r],d=n.sizeFromShape(a.shape)/o;return 0===n.sizeFromShape(u.shape)||fu(s,i,o,d),u}const bu={kernelName:$e,backendName:"wasm",setupFunc:function(e){fu=e.wasm.cwrap($e,null,["number","number","number","number"])},kernelFunc:hu};let yu;const _u={kernelName:Ke,backendName:"wasm",setupFunc:function(e){yu=e.wasm.cwrap(Ke,null,["number","number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{logits:r}=n,{numSamples:s,seed:u,normalized:i}=a;if("float32"!==r.dtype)throw new Error(`Tensor logits must have dtype float32, got ${r.dtype}`);const o=i?r:hu({inputs:{logits:r},backend:t,attrs:{dim:r.shape.length-1}}),[d,p]=o.shape,l=t.makeOutput([d,s],"int32");return yu(t.dataIdMap.get(o.dataId).id,d,p,s,u,t.dataIdMap.get(l.dataId).id),i||t.disposeData(o.dataId),l}},gu=An(Xe),Iu=An(Qe),wu=wn(Je);function ku(e,n){const t=new Int32Array(e.wasm.HEAPU8.buffer,n,4),a=t[0],r=t[1],s=t[2],u=t[3];return e.wasm._free(n),{pSelectedIndices:a,selectedSize:r,pSelectedScores:s,pValidOutputs:u}}let Mu;const Su={kernelName:Ze,backendName:"wasm",setupFunc:function(e){Mu=e.wasm.cwrap(Ze,"number",["number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:u}=a,{boxes:i,scores:o}=t,d=n.dataIdMap.get(i.dataId).id,p=n.dataIdMap.get(o.dataId).id,l=Mu(d,p,s,r,u),{pSelectedIndices:c,selectedSize:m,pSelectedScores:f,pValidOutputs:h}=ku(n,l);return n.wasm._free(f),n.wasm._free(h),n.makeOutput([m],"int32",c)}};let Au;const vu={kernelName:Ye,backendName:"wasm",setupFunc:function(e){Au=e.wasm.cwrap(Ye,"number",["number","number","number","number","number","bool"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:u,padToMaxOutputSize:i}=a,{boxes:o,scores:d}=t,p=n.dataIdMap.get(o.dataId).id,l=n.dataIdMap.get(d.dataId).id,c=Au(p,l,s,r,u,i),{pSelectedIndices:m,selectedSize:f,pSelectedScores:h,pValidOutputs:b}=ku(n,c);return n.wasm._free(h),[n.makeOutput([f],"int32",m),n.makeOutput([],"int32",b)]}};let xu;const Fu={kernelName:et,backendName:"wasm",setupFunc:function(e){xu=e.wasm.cwrap(et,"number",["number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{iouThreshold:r,maxOutputSize:s,scoreThreshold:u,softNmsSigma:i}=a,{boxes:o,scores:d}=t,p=n.dataIdMap.get(o.dataId).id,l=n.dataIdMap.get(d.dataId).id,c=xu(p,l,s,r,u,i),{pSelectedIndices:m,selectedSize:f,pSelectedScores:h,pValidOutputs:b}=ku(n,c);return n.wasm._free(b),[n.makeOutput([f],"int32",m),n.makeOutput([f],"float32",h)]}},Nu=An(tt,0,"bool");let Du;const Ru={kernelName:nt,backendName:"wasm",setupFunc:function(e){Du=e.wasm.cwrap(nt,null,["number","number","number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{indices:r}=n,{dtype:s,depth:u,onValue:i,offValue:o}=a,d=t.makeOutput([...r.shape,u],s),p=t.dataIdMap.get(d.dataId).id,l=t.dataIdMap.get(r.dataId).id;return Du(l,u,i,o,p),d}},Eu={kernelName:at,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:t}=e,a=t.makeOutput(n.shape,n.dtype);return t.typedArrayFromHeap(a).fill(1),a}},Wu={kernelName:rt,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:a,attrs:r}=e,{axis:s}=r;if(1===t.length)return ir({inputs:{input:t[0]},backend:a,attrs:{dim:s}});const u=t[0].shape,i=t[0].dtype;t.forEach((e=>{n.assertShapesMatch(u,e.shape,"All tensors passed to stack must have matching shapes"),n.assert(i===e.dtype,(()=>"All tensors passed to stack must have matching dtypes"))}));const o=[],d=Ia({inputs:t.map((e=>{const n=ir({inputs:{input:e},backend:a,attrs:{dim:s}});return o.push(n),n})),backend:a,attrs:{axis:s}});return o.forEach((e=>a.disposeData(e.dataId))),d}};let Pu;const Ou={kernelName:ut,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:t},backend:a,attrs:{paddings:r,constantValue:s}}=e,u=r.map(((e,n)=>e[0]+t.shape[n]+e[1]));if(0===n.sizeFromShape(t.shape))return pr({backend:a,attrs:{shape:u,value:s,dtype:t.dtype}});const i=a.dataIdMap.get(t.dataId).id,o=a.makeOutput(u,t.dtype),d=a.dataIdMap.get(o.dataId).id,p=new Uint8Array(new Int32Array(t.shape).buffer),l=r.map((e=>e[0])),c=r.map((e=>e[1])),m=new Uint8Array(new Int32Array(l).buffer),f=new Uint8Array(new Int32Array(c).buffer);return Pu(i,p,t.shape.length,yn[t.dtype],m,f,s,d),o},setupFunc:function(e){Pu=e.wasm.cwrap(ut,null,["number","array","number","number","array","array","number","number"])}},Cu=An(st);let Tu;const zu={kernelName:it,backendName:"wasm",setupFunc:function(e){Tu=e.wasm.cwrap(it,null,["number","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t}=e,{x:a,alpha:r}=n,s=t.dataIdMap.get(a.dataId).id,u=t.dataIdMap.get(r.dataId).id;let i=s;const o=a;let d=o;"float32"!==o.dtype&&(d=ha({backend:t,inputs:{x:a},attrs:{dtype:"float32"}}),i=t.dataIdMap.get(d.dataId).id);const p=t.makeOutput(a.shape,"float32"),l=t.dataIdMap.get(p.dataId).id;return Tu(i,u,l),"float32"!==o.dtype&&t.disposeData(d.dataId),p}};let Hu;const Bu={kernelName:ot,backendName:"wasm",setupFunc:function(e){Hu=e.wasm.cwrap(ot,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{axis:u,keepDims:i}=r,{x:o}=a,d=t.dataIdMap.get(o.dataId).id;let p=d,l=o;const{transposed:c,axes:m,originalAxes:f,inputWasTransposed:h}=Pn(o,u,t);let b=m;if(h){const e=t.dataIdMap.get(c.dataId).id;e!==d&&(l=c,p=e,b=s.getInnerMostAxes(b.length,l.shape.length))}s.assertAxesAreInnerMostDims("prod",b,l.shape.length);const[y,g]=s.computeOutAndReduceShapes(l.shape,b),_=n.sizeFromShape(g),I=t.makeOutput(y,l.dtype);if(0!==n.sizeFromShape(l.shape)){const e=t.dataIdMap.get(I.dataId).id;Hu(p,_,yn[I.dtype],e)}if(h&&t.disposeData(c.dataId),i){const e=s.expandShapeToKeepDim(I.shape,f);I.shape=e}return I}},Lu={kernelName:dt,backendName:"wasm",kernelFunc:e=>{const{backend:t,attrs:a}=e,{start:r,stop:s,step:u,dtype:i}=a,o=function(e,t,a,r){if(e===t||e<t&&a<0||t<e&&a>1)return n.makeZerosTypedArray(0,r);const s=Math.abs(Math.ceil((t-e)/a)),u=n.makeZerosTypedArray(s,r);t<e&&1===a&&(a=-1),u[0]=e;for(let e=1;e<u.length;e++)u[e]=u[e-1]+a;return u}(r,s,u,i),d=t.makeOutput([o.length],i);return t.typedArrayFromHeap(d).set(o),d}},Uu=An(pt),ju=wn(lt),Gu=wn(ct),qu=wn(mt);let Vu;const $u={kernelName:ft,backendName:"wasm",setupFunc:function(e){Vu=e.wasm.cwrap(ft,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{images:s}=a,{alignCorners:u,halfPixelCenters:i,size:o}=r,[d,p]=o,[l,c,m,f]=s.shape,h=[l,d,p,f];let b,y=t.dataIdMap.get(s.dataId);"float32"!==y.dtype&&(b=ha({backend:t,inputs:{x:s},attrs:{dtype:"float32"}}),y=t.dataIdMap.get(b.dataId));const g=y.id,_=t.makeOutput(h,"float32");if(0===n.sizeFromShape(s.shape))return _;const I=t.dataIdMap.get(_.dataId).id;return Vu(g,l,c,m,f,d,p,u?1:0,i?1:0,I),null!=b&&t.disposeData(b.dataId),_}};let Ku;const Xu={kernelName:ht,backendName:"wasm",setupFunc:function(e){Ku=e.wasm.cwrap(ht,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{images:r,dy:s}=n,{alignCorners:u}=a,i=t.makeOutput(r.shape,"float32");let o,d=t.dataIdMap.get(r.dataId);return"float32"!==d.dtype&&(o=ha({backend:t,inputs:{x:r},attrs:{dtype:"float32"}}),d=t.dataIdMap.get(o.dataId)),Ku(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(s.dataId).id,t.dataIdMap.get(i.dataId).id,new Uint8Array(new Int32Array(r.shape).buffer),new Uint8Array(new Int32Array(s.shape).buffer),u),null!=o&&t.disposeData(o.dataId),i}};let Qu;const Ju={kernelName:bt,backendName:"wasm",setupFunc:function(e){Qu=e.wasm.cwrap(bt,null,["number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{images:s}=a,{alignCorners:u,halfPixelCenters:i,size:o}=r,[d,p]=o,[l,c,m,f]=s.shape,h=[l,d,p,f],b=t.makeOutput(h,"float32");if(0===n.sizeFromShape(s.shape))return b;let y,g=t.dataIdMap.get(s.dataId);"float32"!==g.dtype&&(y=ha({backend:t,inputs:{x:s},attrs:{dtype:"float32"}}),g=t.dataIdMap.get(y.dataId));const _=g.id,I=t.dataIdMap.get(b.dataId).id;return Qu(_,l,c,m,f,d,p,u?1:0,i?1:0,I),null!=y&&t.disposeData(y.dataId),b}};let Zu;const Yu={kernelName:yt,backendName:"wasm",setupFunc:function(e){Zu=e.wasm.cwrap(yt,null,["number","number","number","array","array","boolean"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{images:r,dy:s}=n,{alignCorners:u}=a,i=t.makeOutput(r.shape,"float32");let o,d=t.dataIdMap.get(r.dataId);return"float32"!==d.dtype&&(o=ha({backend:t,inputs:{x:r},attrs:{dtype:"float32"}}),d=t.dataIdMap.get(o.dataId)),Zu(t.dataIdMap.get(r.dataId).id,t.dataIdMap.get(s.dataId).id,t.dataIdMap.get(i.dataId).id,new Uint8Array(new Int32Array(r.shape).buffer),new Uint8Array(new Int32Array(s.shape).buffer),u),null!=o&&t.disposeData(o.dataId),i}};let es;const ts={kernelName:_t,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:a,attrs:r}=e,{x:s}=t,{dims:u}=r,i=n.parseAxisParam(u,s.shape);if(0===s.shape.length)return Nn({inputs:{x:s},backend:a});const o=a.makeOutput(s.shape,s.dtype),d=a.dataIdMap.get(s.dataId).id,p=a.dataIdMap.get(o.dataId).id,l=new Uint8Array(new Int32Array(i).buffer),c=new Uint8Array(new Int32Array(s.shape).buffer);es(d,l,i.length,c,s.shape.length,p);const m=ta({inputs:{x:o},attrs:{shape:s.shape},backend:a});return a.disposeData(o.dataId),m},setupFunc:function(e){es=e.wasm.cwrap(_t,null,["number","array","number","array","number","number"])}};let ns;const as={kernelName:gt,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{image:r}=n,{radians:u,fillValue:i,center:o}=a,d=t.makeOutput(r.shape,r.dtype),p=t.dataIdMap.get(r.dataId).id,l=t.dataIdMap.get(d.dataId).id,[c,m,f,h]=r.shape,[b,y]=s.getImageCenter(o,m,f),g="number"==typeof i?[i,i,i,0===i?0:255]:[...i,255],_=new Uint8Array(new Int32Array(g).buffer);return ns(p,c,m,f,h,u,b,y,_,g.length,l),d},setupFunc:function(e){ns=e.wasm.cwrap(gt,null,["number","number","number","number","number","number","number","number","array","number","number"])}},rs=wn(It),us=wn(wt);let ss;const is={kernelName:kt,backendName:"wasm",setupFunc:function(e){ss=e.wasm.cwrap(kt,null,["number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{indices:s,updates:u}=a,{shape:i}=r,o=t.makeOutput(i,u.dtype);if(0===n.sizeFromShape(i))return o;const{sliceRank:d,numUpdates:p,sliceSize:l,strides:c,outputSize:m}=Mt.calculateShapes(u,s,i),f=t.dataIdMap.get(s.dataId).id,h=t.dataIdMap.get(u.dataId).id,b=new Uint8Array(new Int32Array(c).buffer),y=t.dataIdMap.get(o.dataId).id;return ss(f,h,yn[u.dtype],d,p,l,b,m,y),o}};let os;const ds={kernelName:St,backendName:"wasm",setupFunc:function(e){os=e.wasm.cwrap(St,null,["number","number","number","number","number","number","bool","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{sortedSequence:r,values:s}=n,{side:u}=a;if(r.dtype!==s.dtype)throw new Error(`SearchSorted error: sorted_sequence must have the same dtype as values. Got ${r.dtype} and ${s.dtype}`);const i=t.makeOutput(s.shape,"int32");function o(e){return t.dataIdMap.get(e.dataId).id}return os(o(r),o(s),r.shape[0],r.shape[1],s.shape[1],yn[r.dtype],"left"===u,o(i)),i}};let ps;const ls={kernelName:At,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:a}=e,{condition:r,t:s,e:u}=t,i=a.dataIdMap.get(r.dataId).id,o=a.dataIdMap.get(s.dataId).id,d=a.dataIdMap.get(u.dataId).id,p=a.makeOutput(s.shape,s.dtype),l=a.dataIdMap.get(p.dataId).id,c=r.shape.length,m=s.shape.length,f=0===c||c>1||1===m?1:n.sizeFromShape(s.shape.slice(1));return ps(i,o,d,f,l),p},setupFunc:function(e){ps=e.wasm.cwrap("SelectV2",null,["number","number","number","number","number"])}},cs=wn(vt);let ms;const fs={kernelName:"Sigmoid",backendName:"wasm",setupFunc:function(e){ms=e.wasm.cwrap(xt,null,["number","number"])},kernelFunc:function(e){const{backend:t,inputs:{x:a}}=e,r=t.dataIdMap.get(a.dataId).id,s=t.makeOutput(a.shape,a.dtype),u=t.dataIdMap.get(s.dataId).id;return 0===n.sizeFromShape(s.shape)||ms(r,u),s}},hs=wn(Ft),bs=wn(Nt),ys=wn(Dt),_s=wn(Rt),gs={kernelName:Et,backendName:"wasm",kernelFunc:function(e){const{inputs:t,backend:a,attrs:r}=e,{x:u}=t,{blockShape:i,paddings:o}=r,d=n.sizeFromShape(i),p=[[0,0]];p.push(...o);for(let e=1+i.length;e<u.shape.length;++e)p.push([0,0]);const l=Ou.kernelFunc({inputs:{x:u},backend:a,attrs:{paddings:p,constantValue:0}}),c=s.getReshaped(l.shape,i,d,!1),m=s.getPermuted(c.length,i.length,!1),f=s.getReshapedPermuted(l.shape,i,d,!1),h=ta({inputs:{x:l},backend:a,attrs:{shape:c}}),b=En({inputs:{x:h},backend:a,attrs:{perm:m}}),y=ta({inputs:{x:b},backend:a,attrs:{shape:f}});return a.disposeData(l.dataId),a.disposeData(h.dataId),a.disposeData(b.dataId),y}};let Is;const ws={kernelName:Wt,backendName:"wasm",setupFunc:function(e){Is=e.wasm.cwrap("SparseFillEmptyRows","number",["number","number","number","number","number","number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t}=e,{indices:a,values:r,denseShape:u,defaultValue:i}=t,o=a.shape[0],d=a.shape[1],p=n.readSync(u.dataId)[0],l=[o+p,d],c=n.dataIdMap.get(a.dataId).id,m=n.dataIdMap.get(r.dataId).id,f=n.dataIdMap.get(i.dataId).id,h=n.makeOutput(l,a.dtype),b=n.dataIdMap.get(h.dataId).id,y=n.makeOutput(l.slice(0,1),r.dtype),g=n.dataIdMap.get(y.dataId).id,_=n.makeOutput([p],"bool"),I=n.dataIdMap.get(_.dataId).id,w=n.makeOutput([o],a.dtype),k=n.dataIdMap.get(w.dataId).id,M=n.makeOutput([4],"int32"),S=n.dataIdMap.get(M.dataId).id,A=Is(c,m,yn[r.dtype],o,p,d,f,b,g,I,k,S),v=n.readSync(M.dataId);let x;switch(v[0]){case 1:x=s.getSparseFillEmptyRowsIndicesDenseShapeMismatch(v[1]);break;case 2:x=s.getSparseFillEmptyRowsNegativeIndexErrorMessage(v[1],v[2]);break;case 3:x=s.getSparseFillEmptyRowsOutOfRangeIndexErrorMessage(v[1],v[2],v[3]);break;default:x=""}if(n.disposeData(M.dataId),x)throw n.disposeData(h.dataId),n.disposeData(y.dataId),n.disposeData(_.dataId),n.disposeData(w.dataId),new Error(x);let F=h,N=y;return A!==l[0]&&(F=oa({inputs:{x:h},attrs:{begin:0,size:[A,d]},backend:n}),N=oa({inputs:{x:y},attrs:{begin:0,size:A},backend:n}),n.disposeData(h.dataId),n.disposeData(y.dataId)),[F,N,_,w]}};let ks;const Ms={kernelName:Pt,backendName:"wasm",setupFunc:function(e){ks=e.wasm.cwrap(Pt,null,["number","number","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a}=e,{inputIndices:r,inputShape:u,newShape:i}=a;if(2!==r.shape.length)throw new Error(`Input indices should be a matrix but received shape\n        ${r.shape}`);if(1!==u.shape.length)throw new Error(`Input shape should be a vector but received shape\n        ${u.shape}`);if(1!==i.shape.length)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=t.dataIdMap.get(r.dataId).id,d=t.dataIdMap.get(u.dataId).id,p=t.dataIdMap.get(i.dataId).id,l=r.shape[0],c=n.sizeFromShape(i.shape),m=t.makeOutput([l,c],r.dtype),f=t.dataIdMap.get(m.dataId).id,h=t.makeOutput([c],i.dtype),b=t.dataIdMap.get(h.dataId).id,y=t.makeOutput([3],"int32"),g=t.dataIdMap.get(y.dataId).id;ks(o,d,p,l,f,b,g);const _=t.readSync(y.dataId);let I;switch(_[0]){case 0:I=s.getSparseReshapeMultipleNegativeOneOutputDimErrorMessage(_[1],_[2]);break;case 1:I=s.getSparseReshapeNegativeOutputDimErrorMessage(_[1],_[2]);break;case 2:I=s.getSparseReshapeEmptyTensorZeroOutputDimErrorMessage();break;case 3:{const e=Array.from(t.readSync(u.dataId)),n=Array.from(t.readSync(h.dataId));I=s.getSparseReshapeInputOutputMultipleErrorMessage(e,n);break}case 4:{const e=Array.from(t.readSync(u.dataId)),n=Array.from(t.readSync(h.dataId));I=s.getSparseReshapeInputOutputMismatchErrorMessage(e,n);break}default:I=""}if(t.disposeData(y.dataId),I)throw t.disposeData(m.dataId),t.disposeData(h.dataId),new Error(I);return[m,h]}};let Ss;function As(e){Ss=e.wasm.cwrap("SparseSegmentReduction",null,["number","number","number","number","number","number","number","number","number"])}function vs(e,n){const{backend:t,inputs:a}=e,{data:r,indices:u,segmentIds:i}=a,o=u.shape[0],d=t.readSync(i.dataId,o-1,o)[0],p=o>0?d+1:0;if(p<0)throw new Error(s.getSparseSegmentReductionNegativeSegmentIdsErrorMessage());const l=r.shape.slice();l[0]=p;const c=t.dataIdMap.get(r.dataId).id,m=t.dataIdMap.get(u.dataId).id,f=t.dataIdMap.get(i.dataId).id,h=t.makeOutput(l,r.dtype),b=t.dataIdMap.get(h.dataId).id,y=t.makeOutput([4],"int32"),g=t.dataIdMap.get(y.dataId).id;Ss(c,yn[r.dtype],r.shape[0],m,f,b,g,n,0);const _=t.readSync(y.dataId);let I;switch(_[0]){case 0:I=s.getSparseSegmentReductionNegativeSegmentIdsErrorMessage();break;case 1:I=s.getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage();break;case 2:I=s.getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage(_[1],_[2]);break;case 3:I=s.getSparseSegmentReductionIndicesOutOfRangeErrorMessage(_[1],_[2],_[3]);break;default:I=""}if(t.disposeData(y.dataId),I)throw t.disposeData(h.dataId),new Error(I);return h}const xs={kernelName:Ot,backendName:"wasm",setupFunc:As,kernelFunc:function(e){return vs(e,!0)}},Fs={kernelName:Ct,backendName:"wasm",setupFunc:As,kernelFunc:function(e){return vs(e,!1)}};let Ns;const Ds={kernelName:Tt,backendName:"wasm",setupFunc:function(e){Ns=e.wasm.cwrap(Tt,null,["number","number","number","number","number","number","number","number","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{sparseIndices:u,sparseValues:i,defaultValue:o}=a,{outputShape:d}=r,p=t.makeOutput(d,o.dtype);if(0===n.sizeFromShape(d))return p;const{sliceRank:l,numUpdates:c,sliceSize:m,strides:f,outputSize:h}=s.calculateShapes(i,u,d),b=t.dataIdMap.get(u.dataId).id,y=t.dataIdMap.get(i.dataId).id,g=t.dataIdMap.get(o.dataId).id,_=new Uint8Array(new Int32Array(f).buffer),I=t.dataIdMap.get(p.dataId).id;return Ns(b,y,i.shape.length,g,yn[o.dtype],l,c,m,_,h,I),p}},Rs={kernelName:zt,backendName:"wasm",kernelFunc:function(e){const{inputs:t,attrs:a,backend:r}=e,{x:u}=t,{numOrSizeSplits:i,axis:o}=a,d=n.parseAxisParam(o,u.shape)[0],p=s.prepareSplitSize(u,i,d),l=new Array(u.shape.length).fill(0),c=u.shape.slice();return p.map((e=>{const n=[...c];n[d]=e;const t=oa({inputs:{x:u},attrs:{begin:l,size:n},backend:r});return l[d]+=e,t}))}},Es=wn(Ht),Ws=wn(Bt),Ps=An(Lt);let Os;const Cs={kernelName:Ut,backendName:"wasm",setupFunc:function(e){Os=e.wasm.cwrap(Ut,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{alpha:r}=a,{x:s}=t,u=n.dataIdMap.get(s.dataId).id,i=n.makeOutput(s.shape,s.dtype),o=n.dataIdMap.get(i.dataId).id;return Os(u,r,yn[s.dtype],o),i}};let Ts;const zs={kernelName:jt,backendName:"wasm",setupFunc:function(e){Ts=e.wasm.cwrap(jt,null,["number","array","number","array","array","array","array","array","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{x:s}=a,{begin:u,end:i,strides:o,beginMask:d,endMask:p,ellipsisMask:l,newAxisMask:c,shrinkAxisMask:m}=r,{finalShapeSparse:f,finalShape:h,isIdentity:b,sliceDim0:y,isSimpleSlice:g,begin:_,end:I,strides:w}=x.sliceInfo(s.shape,u,i,o,d,p,l,c,m);let k;if(b)k=ta({inputs:{x:s},backend:t,attrs:{shape:h}});else if(y||g){n.assert(s.shape.length>=1,(()=>`Input must have rank at least 1, got: ${s.shape.length}`));const e=x.computeOutShape(_,I,w),a=oa({inputs:{x:s},backend:t,attrs:{begin:_,size:e}});k=ta({inputs:{x:a},backend:t,attrs:{shape:h}}),t.disposeData(a.dataId)}else{const e=t.makeOutput(f,"float32"),a=t.dataIdMap.get(s.dataId).id,r=new Uint8Array(new Int32Array(n.computeStrides(s.shape)).buffer),u=new Uint8Array(new Int32Array(_).buffer),i=new Uint8Array(new Int32Array(I).buffer),o=new Uint8Array(new Int32Array(w).buffer),d=new Uint8Array(new Int32Array(f).buffer),p=new Uint8Array(new Int32Array(n.computeStrides(f)).buffer),l=t.dataIdMap.get(e.dataId).id;Ts(a,r,s.shape.length,u,i,o,d,p,f.length,l),k=ta({inputs:{x:e},backend:t,attrs:{shape:h}}),t.disposeData(e.dataId)}return k}},Hs={kernelName:Gt,backendName:"wasm",kernelFunc:function(e){const{backend:n,inputs:t,attrs:a}=e,{data:r,dataSplits:s}=t,{separator:u,nGramWidths:i,leftPad:o,rightPad:d,padWidth:p,preserveShortSequences:l}=a,c=n.readSync(r.dataId),m=n.readSync(s.dataId),[f,h]=function(e,n,t,a,r,s,u,i){return new sa(t,a,r,s,u,i).compute(e,n)}(c,m,u,i,o,d,p,l),b=n.makeOutput([f.length],"string");n.dataIdMap.get(b.dataId).stringBytes=f;const y=n.makeOutput(s.shape,"int32");return n.typedArrayFromHeap(y).set(h),[b,y]}},Bs={kernelName:qt,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{input:s,delimiter:u}=a,{skipEmpty:i}=r,o=t.readSync(s.dataId),d=t.readSync(u.dataId),[p,l,c]=function(e,t,a){const r=e.length,s=[];let u=0,i=0;const o=new Array(r);for(let n=0;n<r;++n){const r=s.length;ia(e[n],t,a,s);const d=s.length-r;o[n]=d,u+=d,i=Math.max(i,d)}const d=n.getArrayFromDType("int32",2*u),p=new Array(u),l=[r,i];let c=0;for(let e=0;e<r;++e)for(let n=0;n<o[e];++n)d[2*c]=e,d[2*c+1]=n,p[c]=s[c],++c;return[d,p,l]}(o,d[0],i),m=l.length,f=t.makeOutput([m,2],"int32");t.typedArrayFromHeap(f).set(p);const h=t.makeOutput([m],"string");t.dataIdMap.get(h.dataId).stringBytes=l;const b=t.makeOutput([2],"int32");return t.typedArrayFromHeap(b).set(c),[f,h,b]}},Ls={kernelName:Vt,backendName:"wasm",kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{input:s}=a,{numBuckets:u}=r,i=function(e,t){const a=n.getArrayFromDType("int32",e.length);for(let r=0;r<e.length;++r)a[r]=n.fingerPrint64(e[r]).modulo(t).getLowBitsUnsigned();return a}(t.readSync(s.dataId),u),o=t.makeOutput(s.shape,"int32");return t.typedArrayFromHeap(o).set(i),o}},Us=An($t);let js;const Gs={kernelName:Kt,backendName:"wasm",setupFunc:function(e){js=e.wasm.cwrap(Kt,null,["number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{axis:u,keepDims:i}=r,{x:o}=a,d=t.dataIdMap.get(o.dataId).id;let p=d,l=o;const{transposed:c,axes:m,originalAxes:f,inputWasTransposed:h}=Pn(o,u,t);let b=m;if(h){const e=t.dataIdMap.get(c.dataId).id;e!==d&&(l=c,p=e,b=s.getInnerMostAxes(b.length,l.shape.length))}s.assertAxesAreInnerMostDims("sum",b,l.shape.length);const[y,g]=s.computeOutAndReduceShapes(l.shape,b),_=n.sizeFromShape(g),I=t.makeOutput(y,l.dtype);if(0!==n.sizeFromShape(l.shape)){const e=t.dataIdMap.get(I.dataId).id;js(p,_,yn[I.dtype],e)}if(h&&t.disposeData(c.dataId),i){const e=s.expandShapeToKeepDim(I.shape,f);I.shape=e}return I}},qs=wn(Xt),Vs=wn(Qt);let $s;const Ks={kernelName:Jt,backendName:"wasm",setupFunc:function(e){$s=e.wasm.cwrap(Jt,null,["number","number","number","number","number","number","array","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{tensor:s,indices:u,updates:i}=a,o=t.makeOutput(s.shape,s.dtype);if(0===n.sizeFromShape(s.shape))return o;const{sliceRank:d,numUpdates:p,sliceSize:l,strides:c,outputSize:m}=Mt.calculateShapes(i,u,s.shape),f=t.dataIdMap.get(u.dataId).id,h=t.dataIdMap.get(i.dataId).id,b=t.dataIdMap.get(s.dataId).id,y=new Uint8Array(new Int32Array(c).buffer),g=t.dataIdMap.get(o.dataId).id;return $s(f,h,yn[i.dtype],d,p,l,y,m,g,b),o}};let Xs,Qs,Js;const Zs=[In,kn,Mn,Sn,vn,Fn,Cn,zn,Bn,Ln,Un,jn,Gn,qn,Vn,Kn,ea,Qn,Zn,ra,pa,ca,ma,fa,ba,ya,ga,wa,Ma,Aa,xa,Na,Ra,Ea,Wa,Ca,za,Ba,Ua,Ga,Va,Ka,Qa,Za,er,tr,ar,rr,ur,sr,or,dr,lr,mr,fr,hr,yr,gr,wr,Mr,Ar,vr,xr,Dn,Fr,Nr,Dr,Er,Wr,Pr,Cr,zr,Tr,Hr,Br,Lr,Ur,Gr,Vr,Kr,Xr,Jr,Yr,tu,au,uu,iu,du,pu,mu,_u,gu,Iu,wu,Su,vu,Fu,Nu,Ru,Eu,Wu,Ou,Cu,zu,Bu,Lu,Uu,ju,Gu,qu,na,$u,Xu,Ju,Yu,ts,as,rs,us,is,ds,ls,cs,fs,hs,bs,ys,da,bu,_s,gs,ws,Ms,xs,Fs,Ds,Rs,Es,Ws,Ps,Cs,zs,Hs,Bs,Ls,Us,Gs,qs,Vs,Ks,{kernelName:Zt,backendName:"wasm",setupFunc:function(e){Xs=e.wasm.cwrap(Zt,null,["number","array","number","array","number","number"])},kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{x:r}=n,s=t.dataIdMap.get(r.dataId).id,{reps:u}=a,i=new Array(r.shape.length);for(let e=0;e<i.length;e++)i[e]=r.shape[e]*u[e];const o=new Uint8Array(new Int32Array(r.shape).buffer),d=new Uint8Array(new Int32Array(i).buffer),p=t.makeOutput(i,r.dtype),l=t.dataIdMap.get(p.dataId).id;return Xs(s,o,r.shape.length,d,i.length,yn[p.dtype],l),p}},{kernelName:Yt,backendName:"wasm",setupFunc:function(e){Qs=e.wasm.cwrap(Yt,null,["number","array","number","number","number","bool","number","number"])},kernelFunc:({inputs:e,backend:n,attrs:t})=>{const{x:a}=e,{k:r,sorted:s}=t,u=n.dataIdMap.get(a.dataId).id,i=new Uint8Array(new Int32Array(a.shape).buffer),o=a.shape.slice();o[o.length-1]=r;const d=n.makeOutput(o,a.dtype),p=n.dataIdMap.get(d.dataId).id,l=n.makeOutput(o,"int32"),c=n.dataIdMap.get(l.dataId).id;return Qs(u,i,a.shape.length,yn[a.dtype],r,s,p,c),[d,l]}},{kernelName:en,backendName:"wasm",setupFunc:function(e){Js=e.wasm.cwrap(en,null,["number","number","bool","number","number","number","number","number","number","array","number","array","number","number","number","number","number"])},kernelFunc:function(e){const{backend:t,inputs:a,attrs:r}=e,{image:s,transforms:u}=a,{interpolation:i,fillMode:o,fillValue:d,outputShape:p}=r,[l,c,m,f]=s.shape,[h,b]=null!=p?p:[c,m],y=[l,h,b,f],g=new Uint8Array(new Int32Array(n.computeStrides(s.shape)).buffer),_=new Uint8Array(new Int32Array(n.computeStrides(y)).buffer),I=t.makeOutput(y,s.dtype),w=t.dataIdMap.get(I.dataId).id,k=t.dataIdMap.get(s.dataId).id,M=t.dataIdMap.get(u.dataId).id,S="nearest"===i?1:2;let A;switch(o){case"constant":default:A=1;break;case"reflect":A=2;break;case"wrap":A=3;break;case"nearest":A=4}return Js(k,M,u.shape[0]>1,l,h,b,f,m,c,g,s.shape.length-1,_,y.length-1,S,A,d,w),I}},Wn,{kernelName:tn,backendName:"wasm",kernelFunc:function(e){const{inputs:t,attrs:a,backend:r}=e,{axis:s}=a,{x:u}=t,{outputValues:i,outputShape:o,indices:d}=function(e,t,a,r){const s=n.parseAxisParam(t,a)[0],u=[1,a[0],1];for(let e=0;e<s;e++)u[0]*=a[e];u[1]=a[s];for(let e=s+1;e<a.length;e++)u[2]*=a[e];const i=new Map,o=new Int32Array(a[s]),d=new N(u,r,e),p=[],l=1===u[0]&&1===u[2];for(let n=0;n<a[s];n++){let t;if(l)t=e[n].toString();else{const e=[];for(let t=0;t<u[0];t++)for(let a=0;a<u[2];a++)e.push(d.get(t,n,a));t=e.join(",")}const a=i.get(t);if(null!=a)o[n]=a;else{const e=i.size;i.set(t,e),o[n]=e,p.push(n)}}const c=u.slice();c[1]=i.size;const m=new N(c,r);p.forEach(((e,n)=>{for(let t=0;t<u[0];t++)for(let a=0;a<u[2];a++)m.set(d.get(t,e,a),t,n,a)}));const f=a.slice();return f[s]=c[1],{outputValues:m.values,outputShape:f,indices:o}}(r.readSync(u.dataId),s,u.shape,u.dtype);return[r.makeOutput(o,u.dtype,void 0,i),r.makeOutput([d.length],"int32",void 0,d)]}},{kernelName:nn,backendName:"wasm",kernelFunc:function(e){const{inputs:n,backend:t,attrs:a}=e,{value:r}=n;let{axis:s}=a;s<0&&(s+=r.shape.length);const u=r.shape[s],i=r.shape.length,o=new Array(i-1);let d=0;for(let e=0;e<i;e++)e!==s&&(o[d++]=r.shape[e]);const p=new Array(u),l=new Array(i).fill(0),c=r.shape.slice();c[s]=1;for(let e=0;e<p.length;e++)l[s]=e,p[e]=oa({inputs:{x:r},attrs:{begin:l,size:c},backend:t});return p.map((({dataId:e,dtype:n})=>({dataId:e,dtype:n,shape:o})))}},{kernelName:an,backendName:"wasm",kernelFunc:function(e){const{inputs:{x:n},backend:t}=e,a=t.makeOutput(n.shape,n.dtype);return t.typedArrayFromHeap(a).fill(0),a}}];for(const e of Zs)rn(e);const Ys=un();Ys.registerFlag("WASM_HAS_SIMD_SUPPORT",(async()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]))}catch(e){return!1}})),Ys.registerFlag("WASM_HAS_MULTITHREAD_SUPPORT",(async()=>{if(Ys.get("IS_NODE"))return!1;try{return(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch(e){return!1}}));var ei="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function ti(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ni={exports:{}};!function(e){var n,t=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){function t(){return F.buffer!=E&&L(F.buffer),W}function a(){return F.buffer!=E&&L(F.buffer),O}function r(){return F.buffer!=E&&L(F.buffer),C}function s(){return F.buffer!=E&&L(F.buffer),T}var u,i,o,d=void 0!==(e=e||{})?e:{};d.ready=new Promise((function(e,n){u=e,i=n})),"undefined"!=typeof process&&process.listeners&&(o={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var p,l,c,m=Object.assign({},d),f=(e,n)=>{throw n},h="object"==typeof window,b="function"==typeof importScripts,y="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,g=d.ENVIRONMENT_IS_PTHREAD||!1,_="";function I(e){return d.locateFile?d.locateFile(e,_):_+e}if(y){var w=cn,k=mn;let n;_=b?k.dirname(_)+"/":__dirname+"/",p=(e,n)=>(e=ee(e)?new URL(e):k.normalize(e),w.readFileSync(e,n?void 0:"utf8")),c=e=>{var n=p(e,!0);return n.buffer||(n=new Uint8Array(n)),n},l=(e,n,t)=>{e=ee(e)?new URL(e):k.normalize(e),w.readFile(e,(function(e,a){e?t(e):n(a.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof ae))throw e})),process.on("unhandledRejection",(function(e){throw e})),f=(e,n)=>{if($())throw process.exitCode=e,n;var t;(t=n)instanceof ae||x("exiting due to exception: "+t),process.exit(e)},d.inspect=function(){return"[Emscripten Module object]"};try{n=require("worker_threads")}catch(e){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),e}ei.Worker=n.Worker}else(h||b)&&(b?_=self.location.href:"undefined"!=typeof document&&document.currentScript&&(_=document.currentScript.src),void 0!==n&&n&&(_=n),_=0!==_.indexOf("blob:")?_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1):"",y||(p=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},b&&(c=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),l=(e,n,t)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{200==a.status||0==a.status&&a.response?n(a.response):t()},a.onerror=t,a.send(null)}));y&&"undefined"==typeof performance&&(ei.performance=fn.performance);var M=console.log.bind(console),S=console.warn.bind(console);y&&(M=e=>w.writeSync(1,e+"\n"),S=e=>w.writeSync(2,e+"\n"));var A,v=d.print||M,x=d.printErr||S;Object.assign(d,m),m=null,d.arguments&&d.arguments,d.thisProgram&&d.thisProgram,d.quit&&(f=d.quit),d.wasmBinary&&(A=d.wasmBinary);var F,N,D=d.noExitRuntime||!0;"object"!=typeof WebAssembly&&Y("no native wasm support detected");var R,E,P,W,O,C,T,z=!1,H="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function B(e,n,t){for(var a=(n>>>=0)+t,r=n;e[r]&&!(r>=a);)++r;if(r-n>16&&e.buffer&&H)return H.decode(e.buffer instanceof SharedArrayBuffer?e.slice(n,r):e.subarray(n,r));for(var s="";n<r;){var u=e[n++];if(128&u){var i=63&e[n++];if(192!=(224&u)){var o=63&e[n++];if((u=224==(240&u)?(15&u)<<12|i<<6|o:(7&u)<<18|i<<12|o<<6|63&e[n++])<65536)s+=String.fromCharCode(u);else{var d=u-65536;s+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else s+=String.fromCharCode((31&u)<<6|i)}else s+=String.fromCharCode(u)}return s}function L(e){E=e,d.HEAP8=P=new Int8Array(e),d.HEAP16=new Int16Array(e),d.HEAP32=O=new Int32Array(e),d.HEAPU8=W=new Uint8Array(e),d.HEAPU16=new Uint16Array(e),d.HEAPU32=C=new Uint32Array(e),d.HEAPF32=new Float32Array(e),d.HEAPF64=T=new Float64Array(e)}g&&(E=d.buffer);var U,G=d.INITIAL_MEMORY||16777216;if(g)F=d.wasmMemory,E=d.buffer;else if(d.wasmMemory)F=d.wasmMemory;else if(!((F=new WebAssembly.Memory({initial:G/65536,maximum:65536,shared:!0})).buffer instanceof SharedArrayBuffer))throw x("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&x("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");F&&(E=F.buffer),G=E.byteLength,L(E);var j=[],q=[],V=[];function $(){return D}function K(){g||de(q)}var X,Q=0,J=null;function Y(e){d.onAbort&&d.onAbort(e),x(e="Aborted("+e+")"),z=!0,R=1,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw i(n),n}function Z(e){return e.startsWith("data:application/octet-stream;base64,")}function ee(e){return e.startsWith("file://")}function ne(e){try{if(e==X&&A)return new Uint8Array(A);if(c)return c(e);throw"both async and sync fetching of the wasm failed"}catch(e){Y(e)}}Z(X="tfjs-backend-wasm-threaded-simd.wasm")||(X=I(X));var te={};function ae(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function re(e){var n=oe.pthreads[e];n||Y(void 0),oe.returnWorkerToPool(n)}function se(e){var n=oe.getNewWorker();if(!n)return 6;oe.runningWorkers.push(n),oe.pthreads[e.pthread_ptr]=n,n.pthread_ptr=e.pthread_ptr;var t={cmd:"run",start_routine:e.startRoutine,arg:e.arg,pthread_ptr:e.pthread_ptr};return n.runPthread=()=>{y&&n.ref(),n.postMessage(t,e.transferList),delete n.runPthread},n.loaded&&n.runPthread(),0}function ue(e){if(g)return ye(1,1,e);R=e,$()||(oe.terminateAllThreads(),d.onExit&&d.onExit(e),z=!0),f(e,new ae(e))}var ie=function(e,n){if(R=e,!n&&g)throw pe(e),"unwind";ue(e)},oe={unusedWorkers:[],runningWorkers:[],tlsInitFunctions:[],pthreads:{},init:function(){g?oe.initWorker():oe.initMainThread()},initMainThread:function(){for(var e=8;e--;)oe.allocateUnusedWorker()},initWorker:function(){D=!1},setExitStatus:function(e){R=e},terminateAllThreads:function(){for(var e of Object.values(oe.pthreads))oe.returnWorkerToPool(e);for(var e of oe.unusedWorkers)e.terminate();oe.unusedWorkers=[]},returnWorkerToPool:function(e){var n=e.pthread_ptr;delete oe.pthreads[n],oe.unusedWorkers.push(e),oe.runningWorkers.splice(oe.runningWorkers.indexOf(e),1),e.pthread_ptr=0,y&&e.unref(),Ce(n)},receiveObjectTransfer:function(e){},threadInitTLS:function(){oe.tlsInitFunctions.forEach((e=>e()))},loadWasmModuleToWorker:function(e,t){e.onmessage=n=>{var a,r=n.data,s=r.cmd;if(e.pthread_ptr&&(oe.currentProxiedOperationCallerThread=e.pthread_ptr),r.targetThread&&r.targetThread!=Ne()){var u=oe.pthreads[r.targetThread];return u?u.postMessage(r,r.transferList):x('Internal error! Worker sent a message "'+s+'" to target pthread '+r.targetThread+", but that thread no longer exists!"),void(oe.currentProxiedOperationCallerThread=void 0)}"processProxyingQueue"===s?he(r.queue):"spawnThread"===s?se(r):"cleanupThread"===s?re(r.thread):"killThread"===s?function(e){var n=oe.pthreads[e];delete oe.pthreads[e],n.terminate(),Ce(e),oe.runningWorkers.splice(oe.runningWorkers.indexOf(n),1),n.pthread_ptr=0}(r.thread):"cancelThread"===s?(a=r.thread,oe.pthreads[a].postMessage({cmd:"cancel"})):"loaded"===s?(e.loaded=!0,y&&e.unref(),t&&t(e),e.runPthread&&e.runPthread()):"print"===s?v("Thread "+r.threadId+": "+r.text):"printErr"===s?x("Thread "+r.threadId+": "+r.text):"alert"===s?alert("Thread "+r.threadId+": "+r.text):"setimmediate"===r.target?e.postMessage(r):"callHandler"===s?d[r.handler](...r.args):s&&x("worker sent an unknown command "+s),oe.currentProxiedOperationCallerThread=void 0},e.onerror=e=>{throw x("worker sent an error! "+e.filename+":"+e.lineno+": "+e.message),e},y&&(e.on("message",(function(n){e.onmessage({data:n})})),e.on("error",(function(n){e.onerror(n)})),e.on("detachedExit",(function(){})));var a=[];for(var r of["onExit","onAbort","print","printErr"])d.hasOwnProperty(r)&&a.push(r);e.postMessage({cmd:"load",handlers:a,urlOrBlob:d.mainScriptUrlOrBlob||n,wasmMemory:F,wasmModule:N})},allocateUnusedWorker:function(){var e,n=I("tfjs-backend-wasm-threaded-simd.worker.js");e=new Worker(n),oe.unusedWorkers.push(e)},getNewWorker:function(){return 0==oe.unusedWorkers.length&&(oe.allocateUnusedWorker(),oe.loadWasmModuleToWorker(oe.unusedWorkers[0])),oe.unusedWorkers.pop()}};function de(e){for(;e.length>0;)e.shift()(d)}function pe(e){if(g)return ye(2,0,e);try{ie(e)}catch(e){!function(e){if(e instanceof ae||"unwind"==e)return R;f(1,e)}(e)}}d.PThread=oe,d.establishStackSpace=function(){var e=Ne(),n=a()[e+52>>>2],t=a()[e+56>>>2];ze(n,n-t),Be(n)};var le,ce=[];function me(e,n,t,a){return g?ye(3,1,e,n,t,a):fe(e,n,t,a)}function fe(e,n,t,a){if("undefined"==typeof SharedArrayBuffer)return x("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var r=[];if(g&&0===r.length)return me(e,n,t,a);var s={startRoutine:t,pthread_ptr:e,arg:a,transferList:r};return g?(s.cmd="spawnThread",postMessage(s,r),0):se(s)}function he(e){Atomics.store(a(),e>>2,1),Ne()&&Oe(e),Atomics.compareExchange(a(),e>>2,1,0)}function be(e){be.shown||(be.shown={}),be.shown[e]||(be.shown[e]=1,y&&(e="warning: "+e),x(e))}function ye(e,n){var t=arguments.length-2,a=arguments;return function(e){var n=He(),t=e();return Be(n),t}((()=>{for(var r=t,u=Le(8*r),i=u>>3,o=0;o<t;o++){var d=a[2+o];s()[i+o>>>0]=d}return Re(e,r,u,n)}))}d.invokeEntryPoint=function(e,n){var t,a,r=((a=ce[t=e])||(t>=ce.length&&(ce.length=t+1),ce[t]=a=U.get(t)),a)(n);$()?oe.setExitStatus(r):Te(r)},d.executeNotifiedProxyingQueue=he,le=y?()=>{var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:()=>performance.timeOrigin+performance.now();var ge=[];function _e(e){try{return F.grow(e-E.byteLength+65535>>>16),L(F.buffer),1}catch(e){}}function Ie(e){return g?ye(4,1,e):52}function we(e,n,t,a,r){return g?ye(5,1,e,n,t,a,r):70}var ke=[null,[],[]];function Me(e,n){var t=ke[e];0===n||10===n?((1===e?v:x)(B(t,0)),t.length=0):t.push(n)}function Se(e,n,a,s){if(g)return ye(6,1,e,n,a,s);for(var u=0,i=0;i<a;i++){var o=r()[n>>>2],d=r()[n+4>>>2];n+=8;for(var p=0;p<d;p++)Me(e,t()[o+p>>>0]);u+=d}return r()[s>>>2]=u,0}function Ae(e){return d["_"+e]}function ve(e,n,a,r,s){var u={string:e=>{var n=0;if(null!=e&&0!==e){var a=1+(e.length<<2);!function(e,n,a){!function(e,n,t,a){if(!(a>0))return 0;for(var r=(t>>>=0)+a-1,s=0;s<e.length;++s){var u=e.charCodeAt(s);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&e.charCodeAt(++s)),u<=127){if(t>=r)break;n[t++>>>0]=u}else if(u<=2047){if(t+1>=r)break;n[t++>>>0]=192|u>>6,n[t++>>>0]=128|63&u}else if(u<=65535){if(t+2>=r)break;n[t++>>>0]=224|u>>12,n[t++>>>0]=128|u>>6&63,n[t++>>>0]=128|63&u}else{if(t+3>=r)break;n[t++>>>0]=240|u>>18,n[t++>>>0]=128|u>>12&63,n[t++>>>0]=128|u>>6&63,n[t++>>>0]=128|63&u}}n[t>>>0]=0}(e,t(),n,a)}(e,n=Le(a),a)}return n},array:e=>{var n=Le(e.length);return function(e,n){(F.buffer!=E&&L(F.buffer),P).set(e,n>>>0)}(e,n),n}},i=Ae(e),o=[],d=0;if(r)for(var p=0;p<r.length;p++){var l=u[a[p]];l?(0===d&&(d=He()),o[p]=l(r[p])):o[p]=r[p]}return function(e){return 0!==d&&Be(d),function(e){return"string"===n?(a=e,(a>>>=0)?B(t(),a,void 0):""):"boolean"===n?Boolean(e):e;var a}(e)}(i.apply(null,o))}oe.init();var xe=[null,ue,pe,me,Ie,we,Se],Fe={__emscripten_init_main_thread_js:function(e){De(e,!b,1,!h),oe.threadInitTLS()},__emscripten_thread_cleanup:function(e){g?postMessage({cmd:"cleanupThread",thread:e}):re(e)},__pthread_create_js:fe,_emscripten_default_pthread_stack_size:function(){return 65536},_emscripten_get_now_is_monotonic:function(){return!0},_emscripten_notify_task_queue:function(e,n,t,a){if(e==n)setTimeout((()=>he(a)));else if(g)postMessage({targetThread:e,cmd:"processProxyingQueue",queue:a});else{var r=oe.pthreads[e];if(!r)return;r.postMessage({cmd:"processProxyingQueue",queue:a})}return 1},_emscripten_set_offscreencanvas_size:function(e,n,t){return-1},abort:function(){Y("")},emscripten_check_blocking_allowed:function(){y||b||be("Blocking on the main thread is very dangerous, see https://emscripten.org/docs/porting/pthreads.html#blocking-on-the-main-browser-thread")},emscripten_date_now:function(){return Date.now()},emscripten_get_heap_max:function(){return 4294901760},emscripten_get_now:le,emscripten_memcpy_big:function(e,n,a){t().copyWithin(e>>>0,n>>>0,n+a>>>0)},emscripten_num_logical_cores:function(){return y?hn.cpus().length:navigator.hardwareConcurrency},emscripten_receive_on_main_thread_js:function(e,n,t){ge.length=n;for(var a=t>>3,r=0;r<n;r++)ge[r]=s()[a+r>>>0];return(e<0?te[-e-1]:xe[e]).apply(null,ge)},emscripten_resize_heap:function(e){var n=t().length;if((e>>>=0)<=n)return!1;var a,r=4294901760;if(e>r)return!1;for(var s=1;s<=4;s*=2){var u=n*(1+.2/s);if(u=Math.min(u,e+100663296),_e(Math.min(r,(a=Math.max(e,u))+(65536-a%65536)%65536)))return!0}return!1},emscripten_unwind_to_js_event_loop:function(){throw"unwind"},exit:ie,fd_close:Ie,fd_seek:we,fd_write:Se,memory:F||d.wasmMemory};!function(){var e={env:Fe,wasi_snapshot_preview1:Fe};function n(e,n){var t,a,r=e.exports;if(d.asm=r,t=d.asm._emscripten_tls_init,oe.tlsInitFunctions.push(t),U=d.asm.__indirect_function_table,a=d.asm.__wasm_call_ctors,q.unshift(a),N=n,!g){var s=oe.unusedWorkers.length;oe.unusedWorkers.forEach((function(e){oe.loadWasmModuleToWorker(e,(function(){--s||function(){if(Q--,d.monitorRunDependencies&&d.monitorRunDependencies(Q),0==Q&&J){var e=J;J=null,e()}}()}))}))}}function t(e){n(e.instance,e.module)}function a(n){return function(){if(!A&&(h||b)){if("function"==typeof fetch&&!ee(X))return fetch(X,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+X+"'";return e.arrayBuffer()})).catch((function(){return ne(X)}));if(l)return new Promise((function(e,n){l(X,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return ne(X)}))}().then((function(n){return WebAssembly.instantiate(n,e)})).then((function(e){return e})).then(n,(function(e){x("failed to asynchronously prepare wasm: "+e),Y(e)}))}if(g||(Q++,d.monitorRunDependencies&&d.monitorRunDependencies(Q)),d.instantiateWasm)try{return d.instantiateWasm(e,n)}catch(e){x("Module.instantiateWasm callback failed with error: "+e),i(e)}(A||"function"!=typeof WebAssembly.instantiateStreaming||Z(X)||ee(X)||y||"function"!=typeof fetch?a(t):fetch(X,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(e){return x("wasm streaming compile failed: "+e),x("falling back to ArrayBuffer instantiation"),a(t)}))}))).catch(i)}(),d.___wasm_call_ctors=function(){return(d.___wasm_call_ctors=d.asm.__wasm_call_ctors).apply(null,arguments)},d._init=function(){return(d._init=d.asm.init).apply(null,arguments)},d._init_with_threads_count=function(){return(d._init_with_threads_count=d.asm.init_with_threads_count).apply(null,arguments)},d._get_threads_count=function(){return(d._get_threads_count=d.asm.get_threads_count).apply(null,arguments)},d._register_tensor=function(){return(d._register_tensor=d.asm.register_tensor).apply(null,arguments)},d._dispose_data=function(){return(d._dispose_data=d.asm.dispose_data).apply(null,arguments)},d._dispose=function(){return(d._dispose=d.asm.dispose).apply(null,arguments)},d._Abs=function(){return(d._Abs=d.asm.Abs).apply(null,arguments)},d._Acos=function(){return(d._Acos=d.asm.Acos).apply(null,arguments)},d._Acosh=function(){return(d._Acosh=d.asm.Acosh).apply(null,arguments)},d._Add=function(){return(d._Add=d.asm.Add).apply(null,arguments)},d._AddN=function(){return(d._AddN=d.asm.AddN).apply(null,arguments)},d._All=function(){return(d._All=d.asm.All).apply(null,arguments)},d._Any=function(){return(d._Any=d.asm.Any).apply(null,arguments)},d._ArgMax=function(){return(d._ArgMax=d.asm.ArgMax).apply(null,arguments)},d._ArgMin=function(){return(d._ArgMin=d.asm.ArgMin).apply(null,arguments)},d._Asin=function(){return(d._Asin=d.asm.Asin).apply(null,arguments)},d._Asinh=function(){return(d._Asinh=d.asm.Asinh).apply(null,arguments)},d._Atan=function(){return(d._Atan=d.asm.Atan).apply(null,arguments)},d._Atan2=function(){return(d._Atan2=d.asm.Atan2).apply(null,arguments)},d._Atanh=function(){return(d._Atanh=d.asm.Atanh).apply(null,arguments)},d._AvgPool=function(){return(d._AvgPool=d.asm.AvgPool).apply(null,arguments)},d._AvgPool3D=function(){return(d._AvgPool3D=d.asm.AvgPool3D).apply(null,arguments)},d._AvgPool3DGrad=function(){return(d._AvgPool3DGrad=d.asm.AvgPool3DGrad).apply(null,arguments)},d._AvgPoolGrad=function(){return(d._AvgPoolGrad=d.asm.AvgPoolGrad).apply(null,arguments)},d._BatchMatMul=function(){return(d._BatchMatMul=d.asm.BatchMatMul).apply(null,arguments)},d._Bincount=function(){return(d._Bincount=d.asm.Bincount).apply(null,arguments)},d._BitwiseAnd=function(){return(d._BitwiseAnd=d.asm.BitwiseAnd).apply(null,arguments)},d._Ceil=function(){return(d._Ceil=d.asm.Ceil).apply(null,arguments)},d._ClipByValue=function(){return(d._ClipByValue=d.asm.ClipByValue).apply(null,arguments)},d._Conv2D=function(){return(d._Conv2D=d.asm.Conv2D).apply(null,arguments)},d._Conv2DBackpropInput=function(){return(d._Conv2DBackpropInput=d.asm.Conv2DBackpropInput).apply(null,arguments)},d._Conv3D=function(){return(d._Conv3D=d.asm.Conv3D).apply(null,arguments)},d._Conv3DBackpropFilterV2=function(){return(d._Conv3DBackpropFilterV2=d.asm.Conv3DBackpropFilterV2).apply(null,arguments)},d._Conv3DBackpropInputV2=function(){return(d._Conv3DBackpropInputV2=d.asm.Conv3DBackpropInputV2).apply(null,arguments)},d._Cos=function(){return(d._Cos=d.asm.Cos).apply(null,arguments)},d._Cosh=function(){return(d._Cosh=d.asm.Cosh).apply(null,arguments)},d._CropAndResize=function(){return(d._CropAndResize=d.asm.CropAndResize).apply(null,arguments)},d._Cumprod=function(){return(d._Cumprod=d.asm.Cumprod).apply(null,arguments)},d._Cumsum=function(){return(d._Cumsum=d.asm.Cumsum).apply(null,arguments)},d._DenseBincount=function(){return(d._DenseBincount=d.asm.DenseBincount).apply(null,arguments)},d._DepthToSpace=function(){return(d._DepthToSpace=d.asm.DepthToSpace).apply(null,arguments)},d._DepthwiseConv2dNative=function(){return(d._DepthwiseConv2dNative=d.asm.DepthwiseConv2dNative).apply(null,arguments)},d._Diag=function(){return(d._Diag=d.asm.Diag).apply(null,arguments)},d._Dilation2D=function(){return(d._Dilation2D=d.asm.Dilation2D).apply(null,arguments)},d._Dilation2DBackpropFilter=function(){return(d._Dilation2DBackpropFilter=d.asm.Dilation2DBackpropFilter).apply(null,arguments)},d._Dilation2DBackpropInput=function(){return(d._Dilation2DBackpropInput=d.asm.Dilation2DBackpropInput).apply(null,arguments)},d._Elu=function(){return(d._Elu=d.asm.Elu).apply(null,arguments)},d._EluGrad=function(){return(d._EluGrad=d.asm.EluGrad).apply(null,arguments)},d._Equal=function(){return(d._Equal=d.asm.Equal).apply(null,arguments)},d._Erf=function(){return(d._Erf=d.asm.Erf).apply(null,arguments)},d._Exp=function(){return(d._Exp=d.asm.Exp).apply(null,arguments)},d._Expm1=function(){return(d._Expm1=d.asm.Expm1).apply(null,arguments)},d._FlipLeftRight=function(){return(d._FlipLeftRight=d.asm.FlipLeftRight).apply(null,arguments)},d._Floor=function(){return(d._Floor=d.asm.Floor).apply(null,arguments)},d._FloorDiv=function(){return(d._FloorDiv=d.asm.FloorDiv).apply(null,arguments)},d._FusedBatchNorm=function(){return(d._FusedBatchNorm=d.asm.FusedBatchNorm).apply(null,arguments)},d._FusedConv2D=function(){return(d._FusedConv2D=d.asm.FusedConv2D).apply(null,arguments)},d._FusedDepthwiseConv2D=function(){return(d._FusedDepthwiseConv2D=d.asm.FusedDepthwiseConv2D).apply(null,arguments)},d._Gather=function(){return(d._Gather=d.asm.Gather).apply(null,arguments)},d._GatherNd=function(){return(d._GatherNd=d.asm.GatherNd).apply(null,arguments)},d._Greater=function(){return(d._Greater=d.asm.Greater).apply(null,arguments)},d._GreaterEqual=function(){return(d._GreaterEqual=d.asm.GreaterEqual).apply(null,arguments)},d._IsFinite=function(){return(d._IsFinite=d.asm.IsFinite).apply(null,arguments)},d._IsInf=function(){return(d._IsInf=d.asm.IsInf).apply(null,arguments)},d._IsNan=function(){return(d._IsNan=d.asm.IsNan).apply(null,arguments)},d._LRN=function(){return(d._LRN=d.asm.LRN).apply(null,arguments)},d._LRNGrad=function(){return(d._LRNGrad=d.asm.LRNGrad).apply(null,arguments)},d._LeakyRelu=function(){return(d._LeakyRelu=d.asm.LeakyRelu).apply(null,arguments)},d._Less=function(){return(d._Less=d.asm.Less).apply(null,arguments)},d._LessEqual=function(){return(d._LessEqual=d.asm.LessEqual).apply(null,arguments)},d._LinSpace=function(){return(d._LinSpace=d.asm.LinSpace).apply(null,arguments)},d._Log=function(){return(d._Log=d.asm.Log).apply(null,arguments)},d._Log1p=function(){return(d._Log1p=d.asm.Log1p).apply(null,arguments)},d._LogicalAnd=function(){return(d._LogicalAnd=d.asm.LogicalAnd).apply(null,arguments)},d._LogicalNot=function(){return(d._LogicalNot=d.asm.LogicalNot).apply(null,arguments)},d._LogicalOr=function(){return(d._LogicalOr=d.asm.LogicalOr).apply(null,arguments)},d._LogicalXor=function(){return(d._LogicalXor=d.asm.LogicalXor).apply(null,arguments)},d._Max=function(){return(d._Max=d.asm.Max).apply(null,arguments)},d._MaxPool=function(){return(d._MaxPool=d.asm.MaxPool).apply(null,arguments)},d._MaxPool3D=function(){return(d._MaxPool3D=d.asm.MaxPool3D).apply(null,arguments)},d._MaxPool3DGrad=function(){return(d._MaxPool3DGrad=d.asm.MaxPool3DGrad).apply(null,arguments)},d._MaxPoolGrad=function(){return(d._MaxPoolGrad=d.asm.MaxPoolGrad).apply(null,arguments)},d._MaxPoolWithArgmax=function(){return(d._MaxPoolWithArgmax=d.asm.MaxPoolWithArgmax).apply(null,arguments)},d._Maximum=function(){return(d._Maximum=d.asm.Maximum).apply(null,arguments)},d._Mean=function(){return(d._Mean=d.asm.Mean).apply(null,arguments)},d._Min=function(){return(d._Min=d.asm.Min).apply(null,arguments)},d._Minimum=function(){return(d._Minimum=d.asm.Minimum).apply(null,arguments)},d._MirrorPad=function(){return(d._MirrorPad=d.asm.MirrorPad).apply(null,arguments)},d._Mod=function(){return(d._Mod=d.asm.Mod).apply(null,arguments)},d._Multinomial=function(){return(d._Multinomial=d.asm.Multinomial).apply(null,arguments)},d._Multiply=function(){return(d._Multiply=d.asm.Multiply).apply(null,arguments)},d._Neg=function(){return(d._Neg=d.asm.Neg).apply(null,arguments)},d._NonMaxSuppressionV3=function(){return(d._NonMaxSuppressionV3=d.asm.NonMaxSuppressionV3).apply(null,arguments)},d._NonMaxSuppressionV4=function(){return(d._NonMaxSuppressionV4=d.asm.NonMaxSuppressionV4).apply(null,arguments)},d._NonMaxSuppressionV5=function(){return(d._NonMaxSuppressionV5=d.asm.NonMaxSuppressionV5).apply(null,arguments)},d._NotEqual=function(){return(d._NotEqual=d.asm.NotEqual).apply(null,arguments)},d._OneHot=function(){return(d._OneHot=d.asm.OneHot).apply(null,arguments)},d._PadV2=function(){return(d._PadV2=d.asm.PadV2).apply(null,arguments)},d._Pow=function(){return(d._Pow=d.asm.Pow).apply(null,arguments)},d._Prelu=function(){return(d._Prelu=d.asm.Prelu).apply(null,arguments)},d._Prod=function(){return(d._Prod=d.asm.Prod).apply(null,arguments)},d._RealDiv=function(){return(d._RealDiv=d.asm.RealDiv).apply(null,arguments)},d._Reciprocal=function(){return(d._Reciprocal=d.asm.Reciprocal).apply(null,arguments)},d._Relu=function(){return(d._Relu=d.asm.Relu).apply(null,arguments)},d._Relu6=function(){return(d._Relu6=d.asm.Relu6).apply(null,arguments)},d._ResizeBilinear=function(){return(d._ResizeBilinear=d.asm.ResizeBilinear).apply(null,arguments)},d._ResizeBilinearGrad=function(){return(d._ResizeBilinearGrad=d.asm.ResizeBilinearGrad).apply(null,arguments)},d._ResizeNearestNeighbor=function(){return(d._ResizeNearestNeighbor=d.asm.ResizeNearestNeighbor).apply(null,arguments)},d._ResizeNearestNeighborGrad=function(){return(d._ResizeNearestNeighborGrad=d.asm.ResizeNearestNeighborGrad).apply(null,arguments)},d._Reverse=function(){return(d._Reverse=d.asm.Reverse).apply(null,arguments)},d._RotateWithOffset=function(){return(d._RotateWithOffset=d.asm.RotateWithOffset).apply(null,arguments)},d._Round=function(){return(d._Round=d.asm.Round).apply(null,arguments)},d._Rsqrt=function(){return(d._Rsqrt=d.asm.Rsqrt).apply(null,arguments)},d._ScatterNd=function(){return(d._ScatterNd=d.asm.ScatterNd).apply(null,arguments)},d._SearchSorted=function(){return(d._SearchSorted=d.asm.SearchSorted).apply(null,arguments)},d._SelectV2=function(){return(d._SelectV2=d.asm.SelectV2).apply(null,arguments)},d._Selu=function(){return(d._Selu=d.asm.Selu).apply(null,arguments)},d._Sigmoid=function(){return(d._Sigmoid=d.asm.Sigmoid).apply(null,arguments)},d._Sign=function(){return(d._Sign=d.asm.Sign).apply(null,arguments)},d._Sin=function(){return(d._Sin=d.asm.Sin).apply(null,arguments)},d._Sinh=function(){return(d._Sinh=d.asm.Sinh).apply(null,arguments)},d._Softmax=function(){return(d._Softmax=d.asm.Softmax).apply(null,arguments)},d._Softplus=function(){return(d._Softplus=d.asm.Softplus).apply(null,arguments)},d._SparseFillEmptyRows=function(){return(d._SparseFillEmptyRows=d.asm.SparseFillEmptyRows).apply(null,arguments)},d._SparseReshape=function(){return(d._SparseReshape=d.asm.SparseReshape).apply(null,arguments)},d._SparseSegmentReduction=function(){return(d._SparseSegmentReduction=d.asm.SparseSegmentReduction).apply(null,arguments)},d._SparseToDense=function(){return(d._SparseToDense=d.asm.SparseToDense).apply(null,arguments)},d._Sqrt=function(){return(d._Sqrt=d.asm.Sqrt).apply(null,arguments)},d._Square=function(){return(d._Square=d.asm.Square).apply(null,arguments)},d._SquaredDifference=function(){return(d._SquaredDifference=d.asm.SquaredDifference).apply(null,arguments)},d._Step=function(){return(d._Step=d.asm.Step).apply(null,arguments)},d._StridedSlice=function(){return(d._StridedSlice=d.asm.StridedSlice).apply(null,arguments)},d._Sub=function(){return(d._Sub=d.asm.Sub).apply(null,arguments)},d._Sum=function(){return(d._Sum=d.asm.Sum).apply(null,arguments)},d._Tan=function(){return(d._Tan=d.asm.Tan).apply(null,arguments)},d._Tanh=function(){return(d._Tanh=d.asm.Tanh).apply(null,arguments)},d._TensorScatterUpdate=function(){return(d._TensorScatterUpdate=d.asm.TensorScatterUpdate).apply(null,arguments)},d._Tile=function(){return(d._Tile=d.asm.Tile).apply(null,arguments)},d._TopK=function(){return(d._TopK=d.asm.TopK).apply(null,arguments)},d._Transform=function(){return(d._Transform=d.asm.Transform).apply(null,arguments)},d._Transpose=function(){return(d._Transpose=d.asm.Transpose).apply(null,arguments)},d.__FusedMatMul=function(){return(d.__FusedMatMul=d.asm._FusedMatMul).apply(null,arguments)},d._malloc=function(){return(d._malloc=d.asm.malloc).apply(null,arguments)},d._free=function(){return(d._free=d.asm.free).apply(null,arguments)},d.__emscripten_tls_init=function(){return(d.__emscripten_tls_init=d.asm._emscripten_tls_init).apply(null,arguments)};var Ne=d._pthread_self=function(){return(Ne=d._pthread_self=d.asm.pthread_self).apply(null,arguments)};d.___errno_location=function(){return(d.___errno_location=d.asm.__errno_location).apply(null,arguments)};var De=d.__emscripten_thread_init=function(){return(De=d.__emscripten_thread_init=d.asm._emscripten_thread_init).apply(null,arguments)};d.__emscripten_thread_crashed=function(){return(d.__emscripten_thread_crashed=d.asm._emscripten_thread_crashed).apply(null,arguments)},d._emscripten_main_thread_process_queued_calls=function(){return(d._emscripten_main_thread_process_queued_calls=d.asm.emscripten_main_thread_process_queued_calls).apply(null,arguments)},d._emscripten_main_browser_thread_id=function(){return(d._emscripten_main_browser_thread_id=d.asm.emscripten_main_browser_thread_id).apply(null,arguments)};var Re=d._emscripten_run_in_main_runtime_thread_js=function(){return(Re=d._emscripten_run_in_main_runtime_thread_js=d.asm.emscripten_run_in_main_runtime_thread_js).apply(null,arguments)};d._emscripten_dispatch_to_thread_=function(){return(d._emscripten_dispatch_to_thread_=d.asm.emscripten_dispatch_to_thread_).apply(null,arguments)};var Ee,Pe,We,Oe=d.__emscripten_proxy_execute_task_queue=function(){return(Oe=d.__emscripten_proxy_execute_task_queue=d.asm._emscripten_proxy_execute_task_queue).apply(null,arguments)},Ce=d.__emscripten_thread_free_data=function(){return(Ce=d.__emscripten_thread_free_data=d.asm._emscripten_thread_free_data).apply(null,arguments)},Te=d.__emscripten_thread_exit=function(){return(Te=d.__emscripten_thread_exit=d.asm._emscripten_thread_exit).apply(null,arguments)},ze=d._emscripten_stack_set_limits=function(){return(ze=d._emscripten_stack_set_limits=d.asm.emscripten_stack_set_limits).apply(null,arguments)},He=d.stackSave=function(){return(He=d.stackSave=d.asm.stackSave).apply(null,arguments)},Be=d.stackRestore=function(){return(Be=d.stackRestore=d.asm.stackRestore).apply(null,arguments)},Le=d.stackAlloc=function(){return(Le=d.stackAlloc=d.asm.stackAlloc).apply(null,arguments)};function Ue(e){if(!(Q>0)){if(g)return u(d),K(),void startWorker(d);!function(){if(d.preRun)for("function"==typeof d.preRun&&(d.preRun=[d.preRun]);d.preRun.length;)e=d.preRun.shift(),j.unshift(e);var e;de(j)}(),Q>0||(d.setStatus?(d.setStatus("Running..."),setTimeout((function(){setTimeout((function(){d.setStatus("")}),1),n()}),1)):n())}function n(){Ee||(Ee=!0,d.calledRun=!0,z||(K(),u(d),d.onRuntimeInitialized&&d.onRuntimeInitialized(),function(){if(!g){if(d.postRun)for("function"==typeof d.postRun&&(d.postRun=[d.postRun]);d.postRun.length;)e=d.postRun.shift(),V.unshift(e);var e;de(V)}}()))}}if(d.dynCall_iijjiiii=function(){return(d.dynCall_iijjiiii=d.asm.dynCall_iijjiiii).apply(null,arguments)},d.dynCall_jiji=function(){return(d.dynCall_jiji=d.asm.dynCall_jiji).apply(null,arguments)},d.keepRuntimeAlive=$,d.wasmMemory=F,d.cwrap=function(e,n,t,a){var r=(t=t||[]).every((e=>"number"===e||"boolean"===e));return"string"!==n&&r&&!a?Ae(e):function(){return ve(e,n,t,arguments)}},d.ExitStatus=ae,d.PThread=oe,J=function e(){Ee||Ue(),Ee||(J=e)},d.preInit)for("function"==typeof d.preInit&&(d.preInit=[d.preInit]);d.preInit.length>0;)d.preInit.pop()();if(Ue(),o&&(Pe={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!o.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!o.unhandledRejection.indexOf(e)>-1}))}),"undefined"!=typeof WasmBackendModule)We=WasmBackendModule;else{if(void 0===e)throw new Error("Could not find wasm module in post.js");We=e}if(Pe){var Ge=We._dispose;We._dispose=function(){Ge(),Pe.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),Pe.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=t}(ni);var ai=ni.exports,ri=ti(ai),ui=bn({__proto__:null,default:ri},[ai]),si='"use strict";var Module={};var ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads");var parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",data=>onmessage({data:data}));var fs=require("fs");Object.assign(global,{self:global,require:require,Module:Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:function(f){(0,eval)(fs.readFileSync(f,"utf8")+"//# sourceURL="+f)},postMessage:function(msg){parentPort.postMessage(msg)},performance:global.performance||{now:function(){return Date.now()}}})}var initializedJS=false;var pendingNotifiedProxyingQueues=[];function threadPrintErr(){var text=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,text+"\n");return}console.error(text)}function threadAlert(){var text=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:text,threadId:Module["_pthread_self"]()})}var err=threadPrintErr;self.alert=threadAlert;Module["instantiateWasm"]=(info,receiveInstance)=>{var instance=new WebAssembly.Instance(Module["wasmModule"],info);receiveInstance(instance);Module["wasmModule"]=null;return instance.exports};self.onunhandledrejection=e=>{throw e.reason??e};self.startWorker=instance=>{Module=instance;postMessage({"cmd":"loaded"})};self.onmessage=e=>{try{if(e.data.cmd==="load"){Module["wasmModule"]=e.data.wasmModule;for(const handler of e.data.handlers){Module[handler]=function(){postMessage({cmd:"callHandler",handler:handler,args:[...arguments]})}}Module["wasmMemory"]=e.data.wasmMemory;Module["buffer"]=Module["wasmMemory"].buffer;Module["ENVIRONMENT_IS_PTHREAD"]=true;if(typeof e.data.urlOrBlob=="string"){importScripts(e.data.urlOrBlob)}else{var objectUrl=URL.createObjectURL(e.data.urlOrBlob);importScripts(objectUrl);URL.revokeObjectURL(objectUrl)}WasmBackendModuleThreadedSimd(Module)}else if(e.data.cmd==="run"){Module["__emscripten_thread_init"](e.data.pthread_ptr,0,0,1);Module["establishStackSpace"]();Module["PThread"].receiveObjectTransfer(e.data);Module["PThread"].threadInitTLS();if(!initializedJS){pendingNotifiedProxyingQueues.forEach(queue=>{Module["executeNotifiedProxyingQueue"](queue)});pendingNotifiedProxyingQueues=[];initializedJS=true}try{Module["invokeEntryPoint"](e.data.start_routine,e.data.arg)}catch(ex){if(ex!="unwind"){if(ex instanceof Module["ExitStatus"]){if(Module["keepRuntimeAlive"]()){}else{Module["__emscripten_thread_exit"](ex.status)}}else{throw ex}}}}else if(e.data.cmd==="cancel"){if(Module["_pthread_self"]()){Module["__emscripten_thread_exit"](-1)}}else if(e.data.target==="setimmediate"){}else if(e.data.cmd==="processProxyingQueue"){if(initializedJS){Module["executeNotifiedProxyingQueue"](e.data.queue)}else{pendingNotifiedProxyingQueues.push(e.data.queue)}}else if(e.data.cmd){err("worker.js received unknown command "+e.data.cmd);err(e.data)}}catch(ex){if(Module["__emscripten_thread_crashed"]){Module["__emscripten_thread_crashed"]()}throw ex}};',ii={exports:{}};!function(e){var n,t=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,"undefined"!=typeof __filename&&(n=n||__filename),function(e){var t,a,r,s=void 0!==(e=e||{})?e:{};s.ready=new Promise((function(e,n){t=e,a=n})),"undefined"!=typeof process&&process.listeners&&(r={uncaughtException:process.listeners("uncaughtException"),unhandledRejection:process.listeners("unhandledRejection")});var u,i,o,d=Object.assign({},s),p="object"==typeof window,l="function"==typeof importScripts,c="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,m="";if(c){var f=cn,h=mn;m=l?h.dirname(m)+"/":__dirname+"/",u=(e,n)=>(e=T(e)?new URL(e):h.normalize(e),f.readFileSync(e,n?void 0:"utf8")),o=e=>{var n=u(e,!0);return n.buffer||(n=new Uint8Array(n)),n},i=(e,n,t)=>{e=T(e)?new URL(e):h.normalize(e),f.readFile(e,(function(e,a){e?t(e):n(a.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",(function(e){if(!(e instanceof H))throw e})),process.on("unhandledRejection",(function(e){throw e})),s.inspect=function(){return"[Emscripten Module object]"}}else(p||l)&&(l?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),n&&(m=n),m=0!==m.indexOf("blob:")?m.substr(0,m.replace(/[?#].*/,"").lastIndexOf("/")+1):"",u=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.send(null),n.responseText},l&&(o=e=>{var n=new XMLHttpRequest;return n.open("GET",e,!1),n.responseType="arraybuffer",n.send(null),new Uint8Array(n.response)}),i=(e,n,t)=>{var a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType="arraybuffer",a.onload=()=>{200==a.status||0==a.status&&a.response?n(a.response):t()},a.onerror=t,a.send(null)});var b,y,g=s.print||console.log.bind(console),_=s.printErr||console.warn.bind(console);Object.assign(s,d),d=null,s.arguments&&s.arguments,s.thisProgram&&s.thisProgram,s.quit&&s.quit,s.wasmBinary&&(b=s.wasmBinary),s.noExitRuntime,"object"!=typeof WebAssembly&&O("no native wasm support detected");var I,w,k,M,S=!1,A="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function v(e,n,t){for(var a=(n>>>=0)+t,r=n;e[r]&&!(r>=a);)++r;if(r-n>16&&e.buffer&&A)return A.decode(e.subarray(n,r));for(var s="";n<r;){var u=e[n++];if(128&u){var i=63&e[n++];if(192!=(224&u)){var o=63&e[n++];if((u=224==(240&u)?(15&u)<<12|i<<6|o:(7&u)<<18|i<<12|o<<6|63&e[n++])<65536)s+=String.fromCharCode(u);else{var d=u-65536;s+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else s+=String.fromCharCode((31&u)<<6|i)}else s+=String.fromCharCode(u)}return s}function x(e){I=e,s.HEAP8=w=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=new Int32Array(e),s.HEAPU8=k=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=M=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e)}s.INITIAL_MEMORY;var F,N,D=[],R=[],E=[],P=0,W=null;function O(e){s.onAbort&&s.onAbort(e),_(e="Aborted("+e+")"),S=!0,e+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(e);throw a(n),n}function C(e){return e.startsWith("data:application/octet-stream;base64,")}function T(e){return e.startsWith("file://")}function z(e){try{if(e==F&&b)return new Uint8Array(b);if(o)return o(e);throw"both async and sync fetching of the wasm failed"}catch(e){O(e)}}function H(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function B(e){for(;e.length>0;)e.shift()(s)}function L(e){try{return y.grow(e-I.byteLength+65535>>>16),x(y.buffer),1}catch(e){}}C(F="tfjs-backend-wasm.wasm")||(N=F,F=s.locateFile?s.locateFile(N,m):m+N);var U=[null,[],[]];function G(e,n){var t=U[e];0===n||10===n?((1===e?g:_)(v(t,0)),t.length=0):t.push(n)}function j(e){return s["_"+e]}var q={abort:function(){O("")},emscripten_get_heap_max:function(){return 4294901760},emscripten_memcpy_big:function(e,n,t){k.copyWithin(e>>>0,n>>>0,n+t>>>0)},emscripten_resize_heap:function(e){var n,t=k.length,a=4294901760;if((e>>>=0)>a)return!1;for(var r=1;r<=4;r*=2){var s=t*(1+.2/r);if(s=Math.min(s,e+100663296),L(Math.min(a,(n=Math.max(e,s))+(65536-n%65536)%65536)))return!0}return!1},fd_close:function(e){return 52},fd_seek:function(e,n,t,a,r){return 70},fd_write:function(e,n,t,a){for(var r=0,s=0;s<t;s++){var u=M[n>>>2],i=M[n+4>>>2];n+=8;for(var o=0;o<i;o++)G(e,k[u+o>>>0]);r+=i}return M[a>>>2]=r,0}};!function(){var e={env:q,wasi_snapshot_preview1:q};function n(e,n){var t,a=e.exports;s.asm=a,x((y=s.asm.memory).buffer),s.asm.__indirect_function_table,t=s.asm.__wasm_call_ctors,R.unshift(t),function(){if(P--,s.monitorRunDependencies&&s.monitorRunDependencies(P),0==P&&W){var e=W;W=null,e()}}()}function t(e){n(e.instance)}function r(n){return function(){if(!b&&(p||l)){if("function"==typeof fetch&&!T(F))return fetch(F,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+F+"'";return e.arrayBuffer()})).catch((function(){return z(F)}));if(i)return new Promise((function(e,n){i(F,(function(n){e(new Uint8Array(n))}),n)}))}return Promise.resolve().then((function(){return z(F)}))}().then((function(n){return WebAssembly.instantiate(n,e)})).then((function(e){return e})).then(n,(function(e){_("failed to asynchronously prepare wasm: "+e),O(e)}))}if(P++,s.monitorRunDependencies&&s.monitorRunDependencies(P),s.instantiateWasm)try{return s.instantiateWasm(e,n)}catch(e){_("Module.instantiateWasm callback failed with error: "+e),a(e)}(b||"function"!=typeof WebAssembly.instantiateStreaming||C(F)||T(F)||c||"function"!=typeof fetch?r(t):fetch(F,{credentials:"same-origin"}).then((function(n){return WebAssembly.instantiateStreaming(n,e).then(t,(function(e){return _("wasm streaming compile failed: "+e),_("falling back to ArrayBuffer instantiation"),r(t)}))}))).catch(a)}(),s.___wasm_call_ctors=function(){return(s.___wasm_call_ctors=s.asm.__wasm_call_ctors).apply(null,arguments)},s._init=function(){return(s._init=s.asm.init).apply(null,arguments)},s._init_with_threads_count=function(){return(s._init_with_threads_count=s.asm.init_with_threads_count).apply(null,arguments)},s._get_threads_count=function(){return(s._get_threads_count=s.asm.get_threads_count).apply(null,arguments)},s._register_tensor=function(){return(s._register_tensor=s.asm.register_tensor).apply(null,arguments)},s._dispose_data=function(){return(s._dispose_data=s.asm.dispose_data).apply(null,arguments)},s._dispose=function(){return(s._dispose=s.asm.dispose).apply(null,arguments)},s._Abs=function(){return(s._Abs=s.asm.Abs).apply(null,arguments)},s._Acos=function(){return(s._Acos=s.asm.Acos).apply(null,arguments)},s._Acosh=function(){return(s._Acosh=s.asm.Acosh).apply(null,arguments)},s._Add=function(){return(s._Add=s.asm.Add).apply(null,arguments)},s._AddN=function(){return(s._AddN=s.asm.AddN).apply(null,arguments)},s._All=function(){return(s._All=s.asm.All).apply(null,arguments)},s._Any=function(){return(s._Any=s.asm.Any).apply(null,arguments)},s._ArgMax=function(){return(s._ArgMax=s.asm.ArgMax).apply(null,arguments)},s._ArgMin=function(){return(s._ArgMin=s.asm.ArgMin).apply(null,arguments)},s._Asin=function(){return(s._Asin=s.asm.Asin).apply(null,arguments)},s._Asinh=function(){return(s._Asinh=s.asm.Asinh).apply(null,arguments)},s._Atan=function(){return(s._Atan=s.asm.Atan).apply(null,arguments)},s._Atan2=function(){return(s._Atan2=s.asm.Atan2).apply(null,arguments)},s._Atanh=function(){return(s._Atanh=s.asm.Atanh).apply(null,arguments)},s._AvgPool=function(){return(s._AvgPool=s.asm.AvgPool).apply(null,arguments)},s._AvgPool3D=function(){return(s._AvgPool3D=s.asm.AvgPool3D).apply(null,arguments)},s._AvgPool3DGrad=function(){return(s._AvgPool3DGrad=s.asm.AvgPool3DGrad).apply(null,arguments)},s._AvgPoolGrad=function(){return(s._AvgPoolGrad=s.asm.AvgPoolGrad).apply(null,arguments)},s._BatchMatMul=function(){return(s._BatchMatMul=s.asm.BatchMatMul).apply(null,arguments)},s._Bincount=function(){return(s._Bincount=s.asm.Bincount).apply(null,arguments)},s._BitwiseAnd=function(){return(s._BitwiseAnd=s.asm.BitwiseAnd).apply(null,arguments)},s._Ceil=function(){return(s._Ceil=s.asm.Ceil).apply(null,arguments)},s._ClipByValue=function(){return(s._ClipByValue=s.asm.ClipByValue).apply(null,arguments)},s._Conv2D=function(){return(s._Conv2D=s.asm.Conv2D).apply(null,arguments)},s._Conv2DBackpropInput=function(){return(s._Conv2DBackpropInput=s.asm.Conv2DBackpropInput).apply(null,arguments)},s._Conv3D=function(){return(s._Conv3D=s.asm.Conv3D).apply(null,arguments)},s._Conv3DBackpropFilterV2=function(){return(s._Conv3DBackpropFilterV2=s.asm.Conv3DBackpropFilterV2).apply(null,arguments)},s._Conv3DBackpropInputV2=function(){return(s._Conv3DBackpropInputV2=s.asm.Conv3DBackpropInputV2).apply(null,arguments)},s._Cos=function(){return(s._Cos=s.asm.Cos).apply(null,arguments)},s._Cosh=function(){return(s._Cosh=s.asm.Cosh).apply(null,arguments)},s._CropAndResize=function(){return(s._CropAndResize=s.asm.CropAndResize).apply(null,arguments)},s._Cumprod=function(){return(s._Cumprod=s.asm.Cumprod).apply(null,arguments)},s._Cumsum=function(){return(s._Cumsum=s.asm.Cumsum).apply(null,arguments)},s._DenseBincount=function(){return(s._DenseBincount=s.asm.DenseBincount).apply(null,arguments)},s._DepthToSpace=function(){return(s._DepthToSpace=s.asm.DepthToSpace).apply(null,arguments)},s._DepthwiseConv2dNative=function(){return(s._DepthwiseConv2dNative=s.asm.DepthwiseConv2dNative).apply(null,arguments)},s._Diag=function(){return(s._Diag=s.asm.Diag).apply(null,arguments)},s._Dilation2D=function(){return(s._Dilation2D=s.asm.Dilation2D).apply(null,arguments)},s._Dilation2DBackpropFilter=function(){return(s._Dilation2DBackpropFilter=s.asm.Dilation2DBackpropFilter).apply(null,arguments)},s._Dilation2DBackpropInput=function(){return(s._Dilation2DBackpropInput=s.asm.Dilation2DBackpropInput).apply(null,arguments)},s._Elu=function(){return(s._Elu=s.asm.Elu).apply(null,arguments)},s._EluGrad=function(){return(s._EluGrad=s.asm.EluGrad).apply(null,arguments)},s._Equal=function(){return(s._Equal=s.asm.Equal).apply(null,arguments)},s._Erf=function(){return(s._Erf=s.asm.Erf).apply(null,arguments)},s._Exp=function(){return(s._Exp=s.asm.Exp).apply(null,arguments)},s._Expm1=function(){return(s._Expm1=s.asm.Expm1).apply(null,arguments)},s._FlipLeftRight=function(){return(s._FlipLeftRight=s.asm.FlipLeftRight).apply(null,arguments)},s._Floor=function(){return(s._Floor=s.asm.Floor).apply(null,arguments)},s._FloorDiv=function(){return(s._FloorDiv=s.asm.FloorDiv).apply(null,arguments)},s._FusedBatchNorm=function(){return(s._FusedBatchNorm=s.asm.FusedBatchNorm).apply(null,arguments)},s._FusedConv2D=function(){return(s._FusedConv2D=s.asm.FusedConv2D).apply(null,arguments)},s._FusedDepthwiseConv2D=function(){return(s._FusedDepthwiseConv2D=s.asm.FusedDepthwiseConv2D).apply(null,arguments)},s._Gather=function(){return(s._Gather=s.asm.Gather).apply(null,arguments)},s._GatherNd=function(){return(s._GatherNd=s.asm.GatherNd).apply(null,arguments)},s._Greater=function(){return(s._Greater=s.asm.Greater).apply(null,arguments)},s._GreaterEqual=function(){return(s._GreaterEqual=s.asm.GreaterEqual).apply(null,arguments)},s._IsFinite=function(){return(s._IsFinite=s.asm.IsFinite).apply(null,arguments)},s._IsInf=function(){return(s._IsInf=s.asm.IsInf).apply(null,arguments)},s._IsNan=function(){return(s._IsNan=s.asm.IsNan).apply(null,arguments)},s._LRN=function(){return(s._LRN=s.asm.LRN).apply(null,arguments)},s._LRNGrad=function(){return(s._LRNGrad=s.asm.LRNGrad).apply(null,arguments)},s._LeakyRelu=function(){return(s._LeakyRelu=s.asm.LeakyRelu).apply(null,arguments)},s._Less=function(){return(s._Less=s.asm.Less).apply(null,arguments)},s._LessEqual=function(){return(s._LessEqual=s.asm.LessEqual).apply(null,arguments)},s._LinSpace=function(){return(s._LinSpace=s.asm.LinSpace).apply(null,arguments)},s._Log=function(){return(s._Log=s.asm.Log).apply(null,arguments)},s._Log1p=function(){return(s._Log1p=s.asm.Log1p).apply(null,arguments)},s._LogicalAnd=function(){return(s._LogicalAnd=s.asm.LogicalAnd).apply(null,arguments)},s._LogicalNot=function(){return(s._LogicalNot=s.asm.LogicalNot).apply(null,arguments)},s._LogicalOr=function(){return(s._LogicalOr=s.asm.LogicalOr).apply(null,arguments)},s._LogicalXor=function(){return(s._LogicalXor=s.asm.LogicalXor).apply(null,arguments)},s._Max=function(){return(s._Max=s.asm.Max).apply(null,arguments)},s._MaxPool=function(){return(s._MaxPool=s.asm.MaxPool).apply(null,arguments)},s._MaxPool3D=function(){return(s._MaxPool3D=s.asm.MaxPool3D).apply(null,arguments)},s._MaxPool3DGrad=function(){return(s._MaxPool3DGrad=s.asm.MaxPool3DGrad).apply(null,arguments)},s._MaxPoolGrad=function(){return(s._MaxPoolGrad=s.asm.MaxPoolGrad).apply(null,arguments)},s._MaxPoolWithArgmax=function(){return(s._MaxPoolWithArgmax=s.asm.MaxPoolWithArgmax).apply(null,arguments)},s._Maximum=function(){return(s._Maximum=s.asm.Maximum).apply(null,arguments)},s._Mean=function(){return(s._Mean=s.asm.Mean).apply(null,arguments)},s._Min=function(){return(s._Min=s.asm.Min).apply(null,arguments)},s._Minimum=function(){return(s._Minimum=s.asm.Minimum).apply(null,arguments)},s._MirrorPad=function(){return(s._MirrorPad=s.asm.MirrorPad).apply(null,arguments)},s._Mod=function(){return(s._Mod=s.asm.Mod).apply(null,arguments)},s._Multinomial=function(){return(s._Multinomial=s.asm.Multinomial).apply(null,arguments)},s._Multiply=function(){return(s._Multiply=s.asm.Multiply).apply(null,arguments)},s._Neg=function(){return(s._Neg=s.asm.Neg).apply(null,arguments)},s._NonMaxSuppressionV3=function(){return(s._NonMaxSuppressionV3=s.asm.NonMaxSuppressionV3).apply(null,arguments)},s._NonMaxSuppressionV4=function(){return(s._NonMaxSuppressionV4=s.asm.NonMaxSuppressionV4).apply(null,arguments)},s._NonMaxSuppressionV5=function(){return(s._NonMaxSuppressionV5=s.asm.NonMaxSuppressionV5).apply(null,arguments)},s._NotEqual=function(){return(s._NotEqual=s.asm.NotEqual).apply(null,arguments)},s._OneHot=function(){return(s._OneHot=s.asm.OneHot).apply(null,arguments)},s._PadV2=function(){return(s._PadV2=s.asm.PadV2).apply(null,arguments)},s._Pow=function(){return(s._Pow=s.asm.Pow).apply(null,arguments)},s._Prelu=function(){return(s._Prelu=s.asm.Prelu).apply(null,arguments)},s._Prod=function(){return(s._Prod=s.asm.Prod).apply(null,arguments)},s._RealDiv=function(){return(s._RealDiv=s.asm.RealDiv).apply(null,arguments)},s._Reciprocal=function(){return(s._Reciprocal=s.asm.Reciprocal).apply(null,arguments)},s._Relu=function(){return(s._Relu=s.asm.Relu).apply(null,arguments)},s._Relu6=function(){return(s._Relu6=s.asm.Relu6).apply(null,arguments)},s._ResizeBilinear=function(){return(s._ResizeBilinear=s.asm.ResizeBilinear).apply(null,arguments)},s._ResizeBilinearGrad=function(){return(s._ResizeBilinearGrad=s.asm.ResizeBilinearGrad).apply(null,arguments)},s._ResizeNearestNeighbor=function(){return(s._ResizeNearestNeighbor=s.asm.ResizeNearestNeighbor).apply(null,arguments)},s._ResizeNearestNeighborGrad=function(){return(s._ResizeNearestNeighborGrad=s.asm.ResizeNearestNeighborGrad).apply(null,arguments)},s._Reverse=function(){return(s._Reverse=s.asm.Reverse).apply(null,arguments)},s._RotateWithOffset=function(){return(s._RotateWithOffset=s.asm.RotateWithOffset).apply(null,arguments)},s._Round=function(){return(s._Round=s.asm.Round).apply(null,arguments)},s._Rsqrt=function(){return(s._Rsqrt=s.asm.Rsqrt).apply(null,arguments)},s._ScatterNd=function(){return(s._ScatterNd=s.asm.ScatterNd).apply(null,arguments)},s._SearchSorted=function(){return(s._SearchSorted=s.asm.SearchSorted).apply(null,arguments)},s._SelectV2=function(){return(s._SelectV2=s.asm.SelectV2).apply(null,arguments)},s._Selu=function(){return(s._Selu=s.asm.Selu).apply(null,arguments)},s._Sigmoid=function(){return(s._Sigmoid=s.asm.Sigmoid).apply(null,arguments)},s._Sign=function(){return(s._Sign=s.asm.Sign).apply(null,arguments)},s._Sin=function(){return(s._Sin=s.asm.Sin).apply(null,arguments)},s._Sinh=function(){return(s._Sinh=s.asm.Sinh).apply(null,arguments)},s._Softmax=function(){return(s._Softmax=s.asm.Softmax).apply(null,arguments)},s._Softplus=function(){return(s._Softplus=s.asm.Softplus).apply(null,arguments)},s._SparseFillEmptyRows=function(){return(s._SparseFillEmptyRows=s.asm.SparseFillEmptyRows).apply(null,arguments)},s._SparseReshape=function(){return(s._SparseReshape=s.asm.SparseReshape).apply(null,arguments)},s._SparseSegmentReduction=function(){return(s._SparseSegmentReduction=s.asm.SparseSegmentReduction).apply(null,arguments)},s._SparseToDense=function(){return(s._SparseToDense=s.asm.SparseToDense).apply(null,arguments)},s._Sqrt=function(){return(s._Sqrt=s.asm.Sqrt).apply(null,arguments)},s._Square=function(){return(s._Square=s.asm.Square).apply(null,arguments)},s._SquaredDifference=function(){return(s._SquaredDifference=s.asm.SquaredDifference).apply(null,arguments)},s._Step=function(){return(s._Step=s.asm.Step).apply(null,arguments)},s._StridedSlice=function(){return(s._StridedSlice=s.asm.StridedSlice).apply(null,arguments)},s._Sub=function(){return(s._Sub=s.asm.Sub).apply(null,arguments)},s._Sum=function(){return(s._Sum=s.asm.Sum).apply(null,arguments)},s._Tan=function(){return(s._Tan=s.asm.Tan).apply(null,arguments)},s._Tanh=function(){return(s._Tanh=s.asm.Tanh).apply(null,arguments)},s._TensorScatterUpdate=function(){return(s._TensorScatterUpdate=s.asm.TensorScatterUpdate).apply(null,arguments)},s._Tile=function(){return(s._Tile=s.asm.Tile).apply(null,arguments)},s._TopK=function(){return(s._TopK=s.asm.TopK).apply(null,arguments)},s._Transform=function(){return(s._Transform=s.asm.Transform).apply(null,arguments)},s._Transpose=function(){return(s._Transpose=s.asm.Transpose).apply(null,arguments)},s.__FusedMatMul=function(){return(s.__FusedMatMul=s.asm._FusedMatMul).apply(null,arguments)},s._malloc=function(){return(s._malloc=s.asm.malloc).apply(null,arguments)},s._free=function(){return(s._free=s.asm.free).apply(null,arguments)},s.___errno_location=function(){return(s.___errno_location=s.asm.__errno_location).apply(null,arguments)};var V,$,K,X=s.stackSave=function(){return(X=s.stackSave=s.asm.stackSave).apply(null,arguments)},Q=s.stackRestore=function(){return(Q=s.stackRestore=s.asm.stackRestore).apply(null,arguments)},J=s.stackAlloc=function(){return(J=s.stackAlloc=s.asm.stackAlloc).apply(null,arguments)};function Y(e){function n(){V||(V=!0,s.calledRun=!0,S||(B(R),t(s),s.onRuntimeInitialized&&s.onRuntimeInitialized(),function(){if(s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)e=s.postRun.shift(),E.unshift(e);var e;B(E)}()))}P>0||(function(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)e=s.preRun.shift(),D.unshift(e);var e;B(D)}(),P>0||(s.setStatus?(s.setStatus("Running..."),setTimeout((function(){setTimeout((function(){s.setStatus("")}),1),n()}),1)):n()))}if(s.dynCall_iijjiiii=function(){return(s.dynCall_iijjiiii=s.asm.dynCall_iijjiiii).apply(null,arguments)},s.dynCall_jiji=function(){return(s.dynCall_jiji=s.asm.dynCall_jiji).apply(null,arguments)},s.cwrap=function(e,n,t,a){var r=(t=t||[]).every((e=>"number"===e||"boolean"===e));return"string"!==n&&r&&!a?j(e):function(){return function(e,n,t,a){var r={string:e=>{var n=0;if(null!=e&&0!==e){var t=1+(e.length<<2);!function(e,n,t){!function(e,n,t,a){if(!(a>0))return 0;for(var r=(t>>>=0)+a-1,s=0;s<e.length;++s){var u=e.charCodeAt(s);if(u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&e.charCodeAt(++s)),u<=127){if(t>=r)break;n[t++>>>0]=u}else if(u<=2047){if(t+1>=r)break;n[t++>>>0]=192|u>>6,n[t++>>>0]=128|63&u}else if(u<=65535){if(t+2>=r)break;n[t++>>>0]=224|u>>12,n[t++>>>0]=128|u>>6&63,n[t++>>>0]=128|63&u}else{if(t+3>=r)break;n[t++>>>0]=240|u>>18,n[t++>>>0]=128|u>>12&63,n[t++>>>0]=128|u>>6&63,n[t++>>>0]=128|63&u}}n[t>>>0]=0}(e,k,n,t)}(e,n=J(t),t)}return n},array:e=>{var n=J(e.length);return function(e,n){w.set(e,n>>>0)}(e,n),n}},s=j(e),u=[],i=0;if(a)for(var o=0;o<a.length;o++){var d=r[t[o]];d?(0===i&&(i=X()),u[o]=d(a[o])):u[o]=a[o]}return function(e){return 0!==i&&Q(i),function(e){return"string"===n?(t=e,(t>>>=0)?v(k,t,void 0):""):"boolean"===n?Boolean(e):e;var t}(e)}(s.apply(null,u))}(e,n,t,arguments)}},W=function e(){V||Y(),V||(W=e)},s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();if(Y(),r&&($={uncaughtException:process.listeners("uncaughtException").filter((function(e){return!r.uncaughtException.indexOf(e)>-1})),unhandledRejection:process.listeners("unhandledRejection").filter((function(e){return!r.unhandledRejection.indexOf(e)>-1}))}),void 0!==e)K=e;else{if("undefined"==typeof WasmBackendModuleThreadedSimd)throw new Error("Could not find wasm module in post.js");K=WasmBackendModuleThreadedSimd}if($){var Z=K._dispose;K._dispose=function(){Z(),$.uncaughtException.forEach((function(e){process.removeListener("uncaughtException",e)})),$.unhandledRejection.forEach((function(e){process.removeListener("unhandledRejection",e)}))}}return e.ready});e.exports=t}(ii);var oi=ii.exports,di=ti(oi);const pi=ri||ui,li=di||bn({__proto__:null,default:di},[oi]);class ci extends sn{constructor(e){super(),this.wasm=e,this.dataIdNextNumber=1,this.wasm.tfjs.initWithThreadsCount(Mi),Si=this.wasm.tfjs.getThreadsCount(),this.dataIdMap=new on(this,dn())}write(e,n,t){const a={id:this.dataIdNextNumber++};return this.move(a,e,n,t,1),a}numDataIds(){return this.dataIdMap.numDataIds()}async time(e){const t=n.now();return e(),{kernelMs:n.now()-t}}move(e,t,a,r,s){const u=this.dataIdNextNumber++;if("string"===r){const n=t;return void this.dataIdMap.set(e,{id:u,stringBytes:n,shape:a,dtype:r,memoryOffset:null,refCount:s})}const i=n.sizeFromShape(a),o=i*n.bytesPerElement(r),d=this.wasm._malloc(o)>>>0;this.dataIdMap.set(e,{id:u,memoryOffset:d,shape:a,dtype:r,refCount:s}),this.wasm.tfjs.registerTensor(u,i,d),null!=t&&this.wasm.HEAPU8.set(new Uint8Array(t.buffer,t.byteOffset,o),d)}async read(e){return this.readSync(e)}readSync(e,t,a){const{memoryOffset:r,dtype:s,shape:u,stringBytes:i}=this.dataIdMap.get(e);if("string"===s)return null!=t&&0!==t||!(null==a||a>=i.length)?i.slice(t,a):i;t=t||0,a=a||n.sizeFromShape(u);const o=n.bytesPerElement(s);return function(e,n){switch(n){case"float32":return new Float32Array(e);case"int32":return new Int32Array(e);case"bool":return new Uint8Array(e);default:throw new Error(`Unknown dtype ${n}`)}}(this.wasm.HEAPU8.slice(r+t*o,r+a*o).buffer,s)}disposeData(e,n=!1){if(this.dataIdMap.has(e)){const t=this.dataIdMap.get(e);if(t.refCount--,!n&&t.refCount>0)return!1;this.wasm._free(t.memoryOffset),this.wasm.tfjs.disposeData(t.id),this.dataIdMap.delete(e)}return!0}refCount(e){return this.dataIdMap.has(e)?this.dataIdMap.get(e).refCount:0}incRef(e){const n=this.dataIdMap.get(e);null!=n&&n.refCount++}floatPrecision(){return 32}getMemoryOffset(e){return this.dataIdMap.get(e).memoryOffset}dispose(){this.wasm.tfjs.dispose(),"PThread"in this.wasm&&this.wasm.PThread.terminateAllThreads(),this.wasm=null}memory(){return{unreliable:!1}}makeOutput(e,t,a,r){let s;if(null==a)s=this.write(null!=r?r:null,e,t);else{const r=this.dataIdNextNumber++;s={id:r},this.dataIdMap.set(s,{id:r,memoryOffset:a,shape:e,dtype:t,refCount:1});const u=n.sizeFromShape(e);this.wasm.tfjs.registerTensor(r,u,a)}return{dataId:s,shape:e,dtype:t}}typedArrayFromHeap({shape:e,dtype:t,dataId:a}){const r=this.wasm.HEAPU8.buffer,{memoryOffset:s}=this.dataIdMap.get(a),u=n.sizeFromShape(e);switch(t){case"float32":return new Float32Array(r,s,u);case"int32":return new Int32Array(r,s,u);case"bool":return new Uint8Array(r,s,u);default:throw new Error(`Unknown dtype ${t}`)}}}function mi(e,n,t){if(null!=bi)return bi;let a="tfjs-backend-wasm.wasm";return e&&n?a="tfjs-backend-wasm-threaded-simd.wasm":e&&(a="tfjs-backend-wasm-simd.wasm"),null!=_i&&null!=_i[a]?_i[a]:t+a}async function fi(){const[e,t]=await Promise.all([un().getAsync("WASM_HAS_SIMD_SUPPORT"),un().getAsync("WASM_HAS_MULTITHREAD_SUPPORT")]);return new Promise(((a,r)=>{const s={};var u;s.locateFile=(n,a)=>{if(n.endsWith(".worker.js")){const e=si.replace(/\n/g,"\\n"),n=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(n)}return n.endsWith(".wasm")?mi(e,t,null!=yi?yi:a):a+n},Ii&&(s.instantiateWasm=(u=mi(e,t,null!=yi?yi:""),(e,t)=>(n.fetch(u,{credentials:"same-origin"}).then((n=>{n.ok||e.env.a(`failed to load wasm binary file at '${u}'`),n.arrayBuffer().then((n=>{WebAssembly.instantiate(n,e).then((e=>{t(e.instance,e.module)}))}))})),{})));let i,o=!1;s.onAbort=()=>{o||gi||(gi=!0,r({message:"Make sure the server can serve the `.wasm` file relative to the bundled js file. For more details see https://github.com/tensorflow/tfjs/blob/master/tfjs-backend-wasm/README.md#using-bundlers"}))},t&&e&&null==bi?(s.mainScriptUrlOrBlob=new Blob(["var WasmBackendModuleThreadedSimd = "+pi.toString()],{type:"text/javascript"}),i=pi(s)):i=li(s),i.then((e=>{o=!0,gi=!1,e.tfjs={init:e.cwrap("init",null,[]),initWithThreadsCount:e.cwrap("init_with_threads_count",null,["number"]),getThreadsCount:e.cwrap("get_threads_count","number",[]),registerTensor:e.cwrap("register_tensor",null,["number","number","number"]),disposeData:e.cwrap("dispose_data",null,["number"]),dispose:e.cwrap("dispose",null,[])},a({wasm:e})})).catch(r)}))}const hi=["tfjs-backend-wasm.wasm","tfjs-backend-wasm-simd.wasm","tfjs-backend-wasm-threaded-simd.wasm"];let bi=null,yi=null,_i={},gi=!1,Ii=!1;function wi(e,n=!1){if(pn("setWasmPath has been deprecated in favor of setWasmPaths and will be removed in a future release."),gi)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPath()` before you call `tf.setBackend()` or `tf.ready()`");bi=e,Ii=n}function ki(e,n=!1){if(gi)throw new Error("The WASM backend was already initialized. Make sure you call `setWasmPaths()` before you call `tf.setBackend()` or `tf.ready()`");if("string"==typeof e)yi=e;else{_i=e;const n=hi.filter((e=>null==_i[e]));if(n.length>0)throw new Error(`There were no entries found for the following binaries: ${n.join(",")}. Please either call setWasmPaths with a map providing a path for each binary, or with a string indicating the directory where all the binaries can be found.`)}Ii=n}let Mi=-1,Si=-1;function Ai(e){Mi=e}function vi(){if(-1===Si)throw new Error("WASM backend not initialized.");return Si}const xi="4.20.0";ln("wasm",(async()=>{const{wasm:e}=await fi();return new ci(e)}),2);export{ci as BackendWasm,vi as getThreadsCount,Ai as setThreadsCount,wi as setWasmPath,ki as setWasmPaths,xi as version_wasm};